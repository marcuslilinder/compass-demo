(function () { const e = document.createElement("link").relList; if (e && e.supports && e.supports("modulepreload")) return; for (const n of document.querySelectorAll('link[rel="modulepreload"]')) i(n); new MutationObserver(n => { for (const r of n) if (r.type === "childList") for (const a of r.addedNodes) a.tagName === "LINK" && a.rel === "modulepreload" && i(a) }).observe(document, { childList: !0, subtree: !0 }); function t(n) { const r = {}; return n.integrity && (r.integrity = n.integrity), n.referrerPolicy && (r.referrerPolicy = n.referrerPolicy), n.crossOrigin === "use-credentials" ? r.credentials = "include" : n.crossOrigin === "anonymous" ? r.credentials = "omit" : r.credentials = "same-origin", r } function i(n) { if (n.ep) return; n.ep = !0; const r = t(n); fetch(n.href, r) } })(); const F = { CUIT_ONLY: "cuitOnly", FULLNAME_ONLY: "fullNameOnly", SELECT_AND_DOC: "selectAndDoc" }, q = { CuitInput: 1, CVUData: 2 }, h = { initialFormType: F.CUIT_ONLY, currentStep: q.CuitInput, formData: { cuit: "", dni: "", fullName: "", documentType: "CUIT" }, currency: "", cost: "", currentCVU: "", globalLoader: !1, timerDuration: 1200, timerId: null, errors: {}, headerType: "default" }; function ni(s) { const e = Math.floor(s / 60), t = s % 60; return `${String(e).padStart(2, "0")}:${String(t).padStart(2, "0")}` } function Ot(s, e) { e.textContent = ni(s.timerDuration) } function ri(s, e, t) { s.timerDuration > 0 ? (s.timerDuration--, Ot(s, e), s.timerDuration <= 30 && e.closest(".payment-header-timer") && e.closest(".payment-header-timer").classList.add("is-ending")) : (clearInterval(s.timerId), console.log("Время истекло!"), typeof t == "function" && t()) } function ai(s, e, t) { s.timerId && clearInterval(s.timerId), Ot(s, e), s.timerId = setInterval(() => { ri(s, e, t) }, 1e3) } function ee(s) { return typeof s == "string" || s instanceof String } function lt(s) { var e; return typeof s == "object" && s != null && (s == null || (e = s.constructor) == null ? void 0 : e.name) === "Object" } function Lt(s, e) { return Array.isArray(e) ? Lt(s, (t, i) => e.includes(i)) : Object.entries(s).reduce((t, i) => { let [n, r] = i; return e(r, n) && (t[n] = r), t }, {}) } const m = { NONE: "NONE", LEFT: "LEFT", FORCE_LEFT: "FORCE_LEFT", RIGHT: "RIGHT", FORCE_RIGHT: "FORCE_RIGHT" }; function oi(s) { switch (s) { case m.LEFT: return m.FORCE_LEFT; case m.RIGHT: return m.FORCE_RIGHT; default: return s } } function Me(s) { return s.replace(/([.*+?^=!:${}()|[\]/\\])/g, "\\$1") } function ye(s, e) { if (e === s) return !0; const t = Array.isArray(e), i = Array.isArray(s); let n; if (t && i) { if (e.length != s.length) return !1; for (n = 0; n < e.length; n++)if (!ye(e[n], s[n])) return !1; return !0 } if (t != i) return !1; if (e && s && typeof e == "object" && typeof s == "object") { const r = e instanceof Date, a = s instanceof Date; if (r && a) return e.getTime() == s.getTime(); if (r != a) return !1; const o = e instanceof RegExp, u = s instanceof RegExp; if (o && u) return e.toString() == s.toString(); if (o != u) return !1; const l = Object.keys(e); for (n = 0; n < l.length; n++)if (!Object.prototype.hasOwnProperty.call(s, l[n])) return !1; for (n = 0; n < l.length; n++)if (!ye(s[l[n]], e[l[n]])) return !1; return !0 } else if (e && s && typeof e == "function" && typeof s == "function") return e.toString() === s.toString(); return !1 } class ui { constructor(e) { for (Object.assign(this, e); this.value.slice(0, this.startChangePos) !== this.oldValue.slice(0, this.startChangePos);)--this.oldSelection.start; if (this.insertedCount) for (; this.value.slice(this.cursorPos) !== this.oldValue.slice(this.oldSelection.end);)this.value.length - this.cursorPos < this.oldValue.length - this.oldSelection.end ? ++this.oldSelection.end : ++this.cursorPos } get startChangePos() { return Math.min(this.cursorPos, this.oldSelection.start) } get insertedCount() { return this.cursorPos - this.startChangePos } get inserted() { return this.value.substr(this.startChangePos, this.insertedCount) } get removedCount() { return Math.max(this.oldSelection.end - this.startChangePos || this.oldValue.length - this.value.length, 0) } get removed() { return this.oldValue.substr(this.startChangePos, this.removedCount) } get head() { return this.value.substring(0, this.startChangePos) } get tail() { return this.value.substring(this.startChangePos + this.insertedCount) } get removeDirection() { return !this.removedCount || this.insertedCount ? m.NONE : (this.oldSelection.end === this.cursorPos || this.oldSelection.start === this.cursorPos) && this.oldSelection.end === this.oldSelection.start ? m.RIGHT : m.LEFT } } function _(s, e) { return new _.InputMask(s, e) } function Vt(s) { if (s == null) throw new Error("mask property should be defined"); return s instanceof RegExp ? _.MaskedRegExp : ee(s) ? _.MaskedPattern : s === Date ? _.MaskedDate : s === Number ? _.MaskedNumber : Array.isArray(s) || s === Array ? _.MaskedDynamic : _.Masked && s.prototype instanceof _.Masked ? s : _.Masked && s instanceof _.Masked ? s.constructor : s instanceof Function ? _.MaskedFunction : (console.warn("Mask not found for mask", s), _.Masked) } function me(s) { if (!s) throw new Error("Options in not defined"); if (_.Masked) { if (s.prototype instanceof _.Masked) return { mask: s }; const { mask: e = void 0, ...t } = s instanceof _.Masked ? { mask: s } : lt(s) && s.mask instanceof _.Masked ? s : {}; if (e) { const i = e.mask; return { ...Lt(e, (n, r) => !r.startsWith("_")), mask: e.constructor, _mask: i, ...t } } } return lt(s) ? { ...s } : { mask: s } } function Y(s) { if (_.Masked && s instanceof _.Masked) return s; const e = me(s), t = Vt(e.mask); if (!t) throw new Error("Masked class is not found for provided mask " + e.mask + ", appropriate module needs to be imported manually before creating mask."); return e.mask === t && delete e.mask, e._mask && (e.mask = e._mask, delete e._mask), new t(e) } _.createMask = Y; class Ze { get selectionStart() { let e; try { e = this._unsafeSelectionStart } catch { } return e ?? this.value.length } get selectionEnd() { let e; try { e = this._unsafeSelectionEnd } catch { } return e ?? this.value.length } select(e, t) { if (!(e == null || t == null || e === this.selectionStart && t === this.selectionEnd)) try { this._unsafeSelect(e, t) } catch { } } get isActive() { return !1 } } _.MaskElement = Ze; const ct = 90, li = 89; class ke extends Ze { constructor(e) { super(), this.input = e, this._onKeydown = this._onKeydown.bind(this), this._onInput = this._onInput.bind(this), this._onBeforeinput = this._onBeforeinput.bind(this), this._onCompositionEnd = this._onCompositionEnd.bind(this) } get rootElement() { var e, t, i; return (e = (t = (i = this.input).getRootNode) == null ? void 0 : t.call(i)) != null ? e : document } get isActive() { return this.input === this.rootElement.activeElement } bindEvents(e) { this.input.addEventListener("keydown", this._onKeydown), this.input.addEventListener("input", this._onInput), this.input.addEventListener("beforeinput", this._onBeforeinput), this.input.addEventListener("compositionend", this._onCompositionEnd), this.input.addEventListener("drop", e.drop), this.input.addEventListener("click", e.click), this.input.addEventListener("focus", e.focus), this.input.addEventListener("blur", e.commit), this._handlers = e } _onKeydown(e) { if (this._handlers.redo && (e.keyCode === ct && e.shiftKey && (e.metaKey || e.ctrlKey) || e.keyCode === li && e.ctrlKey)) return e.preventDefault(), this._handlers.redo(e); if (this._handlers.undo && e.keyCode === ct && (e.metaKey || e.ctrlKey)) return e.preventDefault(), this._handlers.undo(e); e.isComposing || this._handlers.selectionChange(e) } _onBeforeinput(e) { if (e.inputType === "historyUndo" && this._handlers.undo) return e.preventDefault(), this._handlers.undo(e); if (e.inputType === "historyRedo" && this._handlers.redo) return e.preventDefault(), this._handlers.redo(e) } _onCompositionEnd(e) { this._handlers.input(e) } _onInput(e) { e.isComposing || this._handlers.input(e) } unbindEvents() { this.input.removeEventListener("keydown", this._onKeydown), this.input.removeEventListener("input", this._onInput), this.input.removeEventListener("beforeinput", this._onBeforeinput), this.input.removeEventListener("compositionend", this._onCompositionEnd), this.input.removeEventListener("drop", this._handlers.drop), this.input.removeEventListener("click", this._handlers.click), this.input.removeEventListener("focus", this._handlers.focus), this.input.removeEventListener("blur", this._handlers.commit), this._handlers = {} } } _.HTMLMaskElement = ke; class ci extends ke { constructor(e) { super(e), this.input = e } get _unsafeSelectionStart() { return this.input.selectionStart != null ? this.input.selectionStart : this.value.length } get _unsafeSelectionEnd() { return this.input.selectionEnd } _unsafeSelect(e, t) { this.input.setSelectionRange(e, t) } get value() { return this.input.value } set value(e) { this.input.value = e } } _.HTMLMaskElement = ke; class Nt extends ke { get _unsafeSelectionStart() { const e = this.rootElement, t = e.getSelection && e.getSelection(), i = t && t.anchorOffset, n = t && t.focusOffset; return n == null || i == null || i < n ? i : n } get _unsafeSelectionEnd() { const e = this.rootElement, t = e.getSelection && e.getSelection(), i = t && t.anchorOffset, n = t && t.focusOffset; return n == null || i == null || i > n ? i : n } _unsafeSelect(e, t) { if (!this.rootElement.createRange) return; const i = this.rootElement.createRange(); i.setStart(this.input.firstChild || this.input, e), i.setEnd(this.input.lastChild || this.input, t); const n = this.rootElement, r = n.getSelection && n.getSelection(); r && (r.removeAllRanges(), r.addRange(i)) } get value() { return this.input.textContent || "" } set value(e) { this.input.textContent = e } } _.HTMLContenteditableMaskElement = Nt; class Ae { constructor() { this.states = [], this.currentIndex = 0 } get currentState() { return this.states[this.currentIndex] } get isEmpty() { return this.states.length === 0 } push(e) { this.currentIndex < this.states.length - 1 && (this.states.length = this.currentIndex + 1), this.states.push(e), this.states.length > Ae.MAX_LENGTH && this.states.shift(), this.currentIndex = this.states.length - 1 } go(e) { return this.currentIndex = Math.min(Math.max(this.currentIndex + e, 0), this.states.length - 1), this.currentState } undo() { return this.go(-1) } redo() { return this.go(1) } clear() { this.states.length = 0, this.currentIndex = 0 } } Ae.MAX_LENGTH = 100; class hi { constructor(e, t) { this.el = e instanceof Ze ? e : e.isContentEditable && e.tagName !== "INPUT" && e.tagName !== "TEXTAREA" ? new Nt(e) : new ci(e), this.masked = Y(t), this._listeners = {}, this._value = "", this._unmaskedValue = "", this._rawInputValue = "", this.history = new Ae, this._saveSelection = this._saveSelection.bind(this), this._onInput = this._onInput.bind(this), this._onChange = this._onChange.bind(this), this._onDrop = this._onDrop.bind(this), this._onFocus = this._onFocus.bind(this), this._onClick = this._onClick.bind(this), this._onUndo = this._onUndo.bind(this), this._onRedo = this._onRedo.bind(this), this.alignCursor = this.alignCursor.bind(this), this.alignCursorFriendly = this.alignCursorFriendly.bind(this), this._bindEvents(), this.updateValue(), this._onChange() } maskEquals(e) { var t; return e == null || ((t = this.masked) == null ? void 0 : t.maskEquals(e)) } get mask() { return this.masked.mask } set mask(e) { if (this.maskEquals(e)) return; if (!(e instanceof _.Masked) && this.masked.constructor === Vt(e)) { this.masked.updateOptions({ mask: e }); return } const t = e instanceof _.Masked ? e : Y({ mask: e }); t.unmaskedValue = this.masked.unmaskedValue, this.masked = t } get value() { return this._value } set value(e) { this.value !== e && (this.masked.value = e, this.updateControl("auto")) } get unmaskedValue() { return this._unmaskedValue } set unmaskedValue(e) { this.unmaskedValue !== e && (this.masked.unmaskedValue = e, this.updateControl("auto")) } get rawInputValue() { return this._rawInputValue } set rawInputValue(e) { this.rawInputValue !== e && (this.masked.rawInputValue = e, this.updateControl(), this.alignCursor()) } get typedValue() { return this.masked.typedValue } set typedValue(e) { this.masked.typedValueEquals(e) || (this.masked.typedValue = e, this.updateControl("auto")) } get displayValue() { return this.masked.displayValue } _bindEvents() { this.el.bindEvents({ selectionChange: this._saveSelection, input: this._onInput, drop: this._onDrop, click: this._onClick, focus: this._onFocus, commit: this._onChange, undo: this._onUndo, redo: this._onRedo }) } _unbindEvents() { this.el && this.el.unbindEvents() } _fireEvent(e, t) { const i = this._listeners[e]; i && i.forEach(n => n(t)) } get selectionStart() { return this._cursorChanging ? this._changingCursorPos : this.el.selectionStart } get cursorPos() { return this._cursorChanging ? this._changingCursorPos : this.el.selectionEnd } set cursorPos(e) { !this.el || !this.el.isActive || (this.el.select(e, e), this._saveSelection()) } _saveSelection() { this.displayValue !== this.el.value && console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."), this._selection = { start: this.selectionStart, end: this.cursorPos } } updateValue() { this.masked.value = this.el.value, this._value = this.masked.value, this._unmaskedValue = this.masked.unmaskedValue, this._rawInputValue = this.masked.rawInputValue } updateControl(e) { const t = this.masked.unmaskedValue, i = this.masked.value, n = this.masked.rawInputValue, r = this.displayValue, a = this.unmaskedValue !== t || this.value !== i || this._rawInputValue !== n; this._unmaskedValue = t, this._value = i, this._rawInputValue = n, this.el.value !== r && (this.el.value = r), e === "auto" ? this.alignCursor() : e != null && (this.cursorPos = e), a && this._fireChangeEvents(), !this._historyChanging && (a || this.history.isEmpty) && this.history.push({ unmaskedValue: t, selection: { start: this.selectionStart, end: this.cursorPos } }) } updateOptions(e) { const { mask: t, ...i } = e, n = !this.maskEquals(t), r = this.masked.optionsIsChanged(i); n && (this.mask = t), r && this.masked.updateOptions(i), (n || r) && this.updateControl() } updateCursor(e) { e != null && (this.cursorPos = e, this._delayUpdateCursor(e)) } _delayUpdateCursor(e) { this._abortUpdateCursor(), this._changingCursorPos = e, this._cursorChanging = setTimeout(() => { this.el && (this.cursorPos = this._changingCursorPos, this._abortUpdateCursor()) }, 10) } _fireChangeEvents() { this._fireEvent("accept", this._inputEvent), this.masked.isComplete && this._fireEvent("complete", this._inputEvent) } _abortUpdateCursor() { this._cursorChanging && (clearTimeout(this._cursorChanging), delete this._cursorChanging) } alignCursor() { this.cursorPos = this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos, m.LEFT)) } alignCursorFriendly() { this.selectionStart === this.cursorPos && this.alignCursor() } on(e, t) { return this._listeners[e] || (this._listeners[e] = []), this._listeners[e].push(t), this } off(e, t) { if (!this._listeners[e]) return this; if (!t) return delete this._listeners[e], this; const i = this._listeners[e].indexOf(t); return i >= 0 && this._listeners[e].splice(i, 1), this } _onInput(e) { this._inputEvent = e, this._abortUpdateCursor(); const t = new ui({ value: this.el.value, cursorPos: this.cursorPos, oldValue: this.displayValue, oldSelection: this._selection }), i = this.masked.rawInputValue, n = this.masked.splice(t.startChangePos, t.removed.length, t.inserted, t.removeDirection, { input: !0, raw: !0 }).offset, r = i === this.masked.rawInputValue ? t.removeDirection : m.NONE; let a = this.masked.nearestInputPos(t.startChangePos + n, r); r !== m.NONE && (a = this.masked.nearestInputPos(a, m.NONE)), this.updateControl(a), delete this._inputEvent } _onChange() { this.displayValue !== this.el.value && this.updateValue(), this.masked.doCommit(), this.updateControl(), this._saveSelection() } _onDrop(e) { e.preventDefault(), e.stopPropagation() } _onFocus(e) { this.alignCursorFriendly() } _onClick(e) { this.alignCursorFriendly() } _onUndo() { this._applyHistoryState(this.history.undo()) } _onRedo() { this._applyHistoryState(this.history.redo()) } _applyHistoryState(e) { e && (this._historyChanging = !0, this.unmaskedValue = e.unmaskedValue, this.el.select(e.selection.start, e.selection.end), this._saveSelection(), this._historyChanging = !1) } destroy() { this._unbindEvents(), this._listeners.length = 0, delete this.el } } _.InputMask = hi; class y { static normalize(e) { return Array.isArray(e) ? e : [e, new y] } constructor(e) { Object.assign(this, { inserted: "", rawInserted: "", tailShift: 0, skip: !1 }, e) } aggregate(e) { return this.inserted += e.inserted, this.rawInserted += e.rawInserted, this.tailShift += e.tailShift, this.skip = this.skip || e.skip, this } get offset() { return this.tailShift + this.inserted.length } get consumed() { return !!this.rawInserted || this.skip } equals(e) { return this.inserted === e.inserted && this.tailShift === e.tailShift && this.rawInserted === e.rawInserted && this.skip === e.skip } } _.ChangeDetails = y; class j { constructor(e, t, i) { e === void 0 && (e = ""), t === void 0 && (t = 0), this.value = e, this.from = t, this.stop = i } toString() { return this.value } extend(e) { this.value += String(e) } appendTo(e) { return e.append(this.toString(), { tail: !0 }).aggregate(e._appendPlaceholder()) } get state() { return { value: this.value, from: this.from, stop: this.stop } } set state(e) { Object.assign(this, e) } unshift(e) { if (!this.value.length || e != null && this.from >= e) return ""; const t = this.value[0]; return this.value = this.value.slice(1), t } shift() { if (!this.value.length) return ""; const e = this.value[this.value.length - 1]; return this.value = this.value.slice(0, -1), e } } class w { constructor(e) { this._value = "", this._update({ ...w.DEFAULTS, ...e }), this._initialized = !0 } updateOptions(e) { this.optionsIsChanged(e) && this.withValueRefresh(this._update.bind(this, e)) } _update(e) { Object.assign(this, e) } get state() { return { _value: this.value, _rawInputValue: this.rawInputValue } } set state(e) { this._value = e._value } reset() { this._value = "" } get value() { return this._value } set value(e) { this.resolve(e, { input: !0 }) } resolve(e, t) { t === void 0 && (t = { input: !0 }), this.reset(), this.append(e, t, ""), this.doCommit() } get unmaskedValue() { return this.value } set unmaskedValue(e) { this.resolve(e, {}) } get typedValue() { return this.parse ? this.parse(this.value, this) : this.unmaskedValue } set typedValue(e) { this.format ? this.value = this.format(e, this) : this.unmaskedValue = String(e) } get rawInputValue() { return this.extractInput(0, this.displayValue.length, { raw: !0 }) } set rawInputValue(e) { this.resolve(e, { raw: !0 }) } get displayValue() { return this.value } get isComplete() { return !0 } get isFilled() { return this.isComplete } nearestInputPos(e, t) { return e } totalInputPositions(e, t) { return e === void 0 && (e = 0), t === void 0 && (t = this.displayValue.length), Math.min(this.displayValue.length, t - e) } extractInput(e, t, i) { return e === void 0 && (e = 0), t === void 0 && (t = this.displayValue.length), this.displayValue.slice(e, t) } extractTail(e, t) { return e === void 0 && (e = 0), t === void 0 && (t = this.displayValue.length), new j(this.extractInput(e, t), e) } appendTail(e) { return ee(e) && (e = new j(String(e))), e.appendTo(this) } _appendCharRaw(e, t) { return e ? (this._value += e, new y({ inserted: e, rawInserted: e })) : new y } _appendChar(e, t, i) { t === void 0 && (t = {}); const n = this.state; let r; if ([e, r] = this.doPrepareChar(e, t), e && (r = r.aggregate(this._appendCharRaw(e, t)), !r.rawInserted && this.autofix === "pad")) { const a = this.state; this.state = n; let o = this.pad(t); const u = this._appendCharRaw(e, t); o = o.aggregate(u), u.rawInserted || o.equals(r) ? r = o : this.state = a } if (r.inserted) { let a, o = this.doValidate(t) !== !1; if (o && i != null) { const u = this.state; if (this.overwrite === !0) { a = i.state; for (let c = 0; c < r.rawInserted.length; ++c)i.unshift(this.displayValue.length - r.tailShift) } let l = this.appendTail(i); if (o = l.rawInserted.length === i.toString().length, !(o && l.inserted) && this.overwrite === "shift") { this.state = u, a = i.state; for (let c = 0; c < r.rawInserted.length; ++c)i.shift(); l = this.appendTail(i), o = l.rawInserted.length === i.toString().length } o && l.inserted && (this.state = u) } o || (r = new y, this.state = n, i && a && (i.state = a)) } return r } _appendPlaceholder() { return new y } _appendEager() { return new y } append(e, t, i) { if (!ee(e)) throw new Error("value should be string"); const n = ee(i) ? new j(String(i)) : i; t != null && t.tail && (t._beforeTailState = this.state); let r;[e, r] = this.doPrepare(e, t); for (let a = 0; a < e.length; ++a) { const o = this._appendChar(e[a], t, n); if (!o.rawInserted && !this.doSkipInvalid(e[a], t, n)) break; r.aggregate(o) } return (this.eager === !0 || this.eager === "append") && t != null && t.input && e && r.aggregate(this._appendEager()), n != null && (r.tailShift += this.appendTail(n).tailShift), r } remove(e, t) { return e === void 0 && (e = 0), t === void 0 && (t = this.displayValue.length), this._value = this.displayValue.slice(0, e) + this.displayValue.slice(t), new y } withValueRefresh(e) { if (this._refreshing || !this._initialized) return e(); this._refreshing = !0; const t = this.rawInputValue, i = this.value, n = e(); return this.rawInputValue = t, this.value && this.value !== i && i.indexOf(this.value) === 0 && (this.append(i.slice(this.displayValue.length), {}, ""), this.doCommit()), delete this._refreshing, n } runIsolated(e) { if (this._isolated || !this._initialized) return e(this); this._isolated = !0; const t = this.state, i = e(this); return this.state = t, delete this._isolated, i } doSkipInvalid(e, t, i) { return !!this.skipInvalid } doPrepare(e, t) { return t === void 0 && (t = {}), y.normalize(this.prepare ? this.prepare(e, this, t) : e) } doPrepareChar(e, t) { return t === void 0 && (t = {}), y.normalize(this.prepareChar ? this.prepareChar(e, this, t) : e) } doValidate(e) { return (!this.validate || this.validate(this.value, this, e)) && (!this.parent || this.parent.doValidate(e)) } doCommit() { this.commit && this.commit(this.value, this) } splice(e, t, i, n, r) { i === void 0 && (i = ""), n === void 0 && (n = m.NONE), r === void 0 && (r = { input: !0 }); const a = e + t, o = this.extractTail(a), u = this.eager === !0 || this.eager === "remove"; let l; u && (n = oi(n), l = this.extractInput(0, a, { raw: !0 })); let c = e; const d = new y; if (n !== m.NONE && (c = this.nearestInputPos(e, t > 1 && e !== 0 && !u ? m.NONE : n), d.tailShift = c - e), d.aggregate(this.remove(c)), u && n !== m.NONE && l === this.rawInputValue) if (n === m.FORCE_LEFT) { let p; for (; l === this.rawInputValue && (p = this.displayValue.length);)d.aggregate(new y({ tailShift: -1 })).aggregate(this.remove(p - 1)) } else n === m.FORCE_RIGHT && o.unshift(); return d.aggregate(this.append(i, r, o)) } maskEquals(e) { return this.mask === e } optionsIsChanged(e) { return !ye(this, e) } typedValueEquals(e) { const t = this.typedValue; return e === t || w.EMPTY_VALUES.includes(e) && w.EMPTY_VALUES.includes(t) || (this.format ? this.format(e, this) === this.format(this.typedValue, this) : !1) } pad(e) { return new y } } w.DEFAULTS = { skipInvalid: !0 }; w.EMPTY_VALUES = [void 0, null, ""]; _.Masked = w; class ne { constructor(e, t) { e === void 0 && (e = []), t === void 0 && (t = 0), this.chunks = e, this.from = t } toString() { return this.chunks.map(String).join("") } extend(e) { if (!String(e)) return; e = ee(e) ? new j(String(e)) : e; const t = this.chunks[this.chunks.length - 1], i = t && (t.stop === e.stop || e.stop == null) && e.from === t.from + t.toString().length; if (e instanceof j) i ? t.extend(e.toString()) : this.chunks.push(e); else if (e instanceof ne) { if (e.stop == null) { let n; for (; e.chunks.length && e.chunks[0].stop == null;)n = e.chunks.shift(), n.from += e.from, this.extend(n) } e.toString() && (e.stop = e.blockIndex, this.chunks.push(e)) } } appendTo(e) { if (!(e instanceof _.MaskedPattern)) return new j(this.toString()).appendTo(e); const t = new y; for (let i = 0; i < this.chunks.length; ++i) { const n = this.chunks[i], r = e._mapPosToBlock(e.displayValue.length), a = n.stop; let o; if (a != null && (!r || r.index <= a) && ((n instanceof ne || e._stops.indexOf(a) >= 0) && t.aggregate(e._appendPlaceholder(a)), o = n instanceof ne && e._blocks[a]), o) { const u = o.appendTail(n); t.aggregate(u); const l = n.toString().slice(u.rawInserted.length); l && t.aggregate(e.append(l, { tail: !0 })) } else t.aggregate(e.append(n.toString(), { tail: !0 })) } return t } get state() { return { chunks: this.chunks.map(e => e.state), from: this.from, stop: this.stop, blockIndex: this.blockIndex } } set state(e) { const { chunks: t, ...i } = e; Object.assign(this, i), this.chunks = t.map(n => { const r = "chunks" in n ? new ne : new j; return r.state = n, r }) } unshift(e) { if (!this.chunks.length || e != null && this.from >= e) return ""; const t = e != null ? e - this.from : e; let i = 0; for (; i < this.chunks.length;) { const n = this.chunks[i], r = n.unshift(t); if (n.toString()) { if (!r) break; ++i } else this.chunks.splice(i, 1); if (r) return r } return "" } shift() { if (!this.chunks.length) return ""; let e = this.chunks.length - 1; for (; 0 <= e;) { const t = this.chunks[e], i = t.shift(); if (t.toString()) { if (!i) break; --e } else this.chunks.splice(e, 1); if (i) return i } return "" } } class di { constructor(e, t) { this.masked = e, this._log = []; const { offset: i, index: n } = e._mapPosToBlock(t) || (t < 0 ? { index: 0, offset: 0 } : { index: this.masked._blocks.length, offset: 0 }); this.offset = i, this.index = n, this.ok = !1 } get block() { return this.masked._blocks[this.index] } get pos() { return this.masked._blockStartPos(this.index) + this.offset } get state() { return { index: this.index, offset: this.offset, ok: this.ok } } set state(e) { Object.assign(this, e) } pushState() { this._log.push(this.state) } popState() { const e = this._log.pop(); return e && (this.state = e), e } bindBlock() { this.block || (this.index < 0 && (this.index = 0, this.offset = 0), this.index >= this.masked._blocks.length && (this.index = this.masked._blocks.length - 1, this.offset = this.block.displayValue.length)) } _pushLeft(e) { for (this.pushState(), this.bindBlock(); 0 <= this.index; --this.index, this.offset = ((t = this.block) == null ? void 0 : t.displayValue.length) || 0) { var t; if (e()) return this.ok = !0 } return this.ok = !1 } _pushRight(e) { for (this.pushState(), this.bindBlock(); this.index < this.masked._blocks.length; ++this.index, this.offset = 0)if (e()) return this.ok = !0; return this.ok = !1 } pushLeftBeforeFilled() { return this._pushLeft(() => { if (!(this.block.isFixed || !this.block.value) && (this.offset = this.block.nearestInputPos(this.offset, m.FORCE_LEFT), this.offset !== 0)) return !0 }) } pushLeftBeforeInput() { return this._pushLeft(() => { if (!this.block.isFixed) return this.offset = this.block.nearestInputPos(this.offset, m.LEFT), !0 }) } pushLeftBeforeRequired() { return this._pushLeft(() => { if (!(this.block.isFixed || this.block.isOptional && !this.block.value)) return this.offset = this.block.nearestInputPos(this.offset, m.LEFT), !0 }) } pushRightBeforeFilled() { return this._pushRight(() => { if (!(this.block.isFixed || !this.block.value) && (this.offset = this.block.nearestInputPos(this.offset, m.FORCE_RIGHT), this.offset !== this.block.value.length)) return !0 }) } pushRightBeforeInput() { return this._pushRight(() => { if (!this.block.isFixed) return this.offset = this.block.nearestInputPos(this.offset, m.NONE), !0 }) } pushRightBeforeRequired() { return this._pushRight(() => { if (!(this.block.isFixed || this.block.isOptional && !this.block.value)) return this.offset = this.block.nearestInputPos(this.offset, m.NONE), !0 }) } } class Rt { constructor(e) { Object.assign(this, e), this._value = "", this.isFixed = !0 } get value() { return this._value } get unmaskedValue() { return this.isUnmasking ? this.value : "" } get rawInputValue() { return this._isRawInput ? this.value : "" } get displayValue() { return this.value } reset() { this._isRawInput = !1, this._value = "" } remove(e, t) { return e === void 0 && (e = 0), t === void 0 && (t = this._value.length), this._value = this._value.slice(0, e) + this._value.slice(t), this._value || (this._isRawInput = !1), new y } nearestInputPos(e, t) { t === void 0 && (t = m.NONE); const i = 0, n = this._value.length; switch (t) { case m.LEFT: case m.FORCE_LEFT: return i; case m.NONE: case m.RIGHT: case m.FORCE_RIGHT: default: return n } } totalInputPositions(e, t) { return e === void 0 && (e = 0), t === void 0 && (t = this._value.length), this._isRawInput ? t - e : 0 } extractInput(e, t, i) { return e === void 0 && (e = 0), t === void 0 && (t = this._value.length), i === void 0 && (i = {}), i.raw && this._isRawInput && this._value.slice(e, t) || "" } get isComplete() { return !0 } get isFilled() { return !!this._value } _appendChar(e, t) { if (t === void 0 && (t = {}), this.isFilled) return new y; const i = this.eager === !0 || this.eager === "append", r = this.char === e && (this.isUnmasking || t.input || t.raw) && (!t.raw || !i) && !t.tail, a = new y({ inserted: this.char, rawInserted: r ? this.char : "" }); return this._value = this.char, this._isRawInput = r && (t.raw || t.input), a } _appendEager() { return this._appendChar(this.char, { tail: !0 }) } _appendPlaceholder() { const e = new y; return this.isFilled || (this._value = e.inserted = this.char), e } extractTail() { return new j("") } appendTail(e) { return ee(e) && (e = new j(String(e))), e.appendTo(this) } append(e, t, i) { const n = this._appendChar(e[0], t); return i != null && (n.tailShift += this.appendTail(i).tailShift), n } doCommit() { } get state() { return { _value: this._value, _rawInputValue: this.rawInputValue } } set state(e) { this._value = e._value, this._isRawInput = !!e._rawInputValue } pad(e) { return this._appendPlaceholder() } } class be { constructor(e) { const { parent: t, isOptional: i, placeholderChar: n, displayChar: r, lazy: a, eager: o, ...u } = e; this.masked = Y(u), Object.assign(this, { parent: t, isOptional: i, placeholderChar: n, displayChar: r, lazy: a, eager: o }) } reset() { this.isFilled = !1, this.masked.reset() } remove(e, t) { return e === void 0 && (e = 0), t === void 0 && (t = this.value.length), e === 0 && t >= 1 ? (this.isFilled = !1, this.masked.remove(e, t)) : new y } get value() { return this.masked.value || (this.isFilled && !this.isOptional ? this.placeholderChar : "") } get unmaskedValue() { return this.masked.unmaskedValue } get rawInputValue() { return this.masked.rawInputValue } get displayValue() { return this.masked.value && this.displayChar || this.value } get isComplete() { return !!this.masked.value || this.isOptional } _appendChar(e, t) { if (t === void 0 && (t = {}), this.isFilled) return new y; const i = this.masked.state; let n = this.masked._appendChar(e, this.currentMaskFlags(t)); return n.inserted && this.doValidate(t) === !1 && (n = new y, this.masked.state = i), !n.inserted && !this.isOptional && !this.lazy && !t.input && (n.inserted = this.placeholderChar), n.skip = !n.inserted && !this.isOptional, this.isFilled = !!n.inserted, n } append(e, t, i) { return this.masked.append(e, this.currentMaskFlags(t), i) } _appendPlaceholder() { return this.isFilled || this.isOptional ? new y : (this.isFilled = !0, new y({ inserted: this.placeholderChar })) } _appendEager() { return new y } extractTail(e, t) { return this.masked.extractTail(e, t) } appendTail(e) { return this.masked.appendTail(e) } extractInput(e, t, i) { return e === void 0 && (e = 0), t === void 0 && (t = this.value.length), this.masked.extractInput(e, t, i) } nearestInputPos(e, t) { t === void 0 && (t = m.NONE); const i = 0, n = this.value.length, r = Math.min(Math.max(e, i), n); switch (t) { case m.LEFT: case m.FORCE_LEFT: return this.isComplete ? r : i; case m.RIGHT: case m.FORCE_RIGHT: return this.isComplete ? r : n; case m.NONE: default: return r } } totalInputPositions(e, t) { return e === void 0 && (e = 0), t === void 0 && (t = this.value.length), this.value.slice(e, t).length } doValidate(e) { return this.masked.doValidate(this.currentMaskFlags(e)) && (!this.parent || this.parent.doValidate(this.currentMaskFlags(e))) } doCommit() { this.masked.doCommit() } get state() { return { _value: this.value, _rawInputValue: this.rawInputValue, masked: this.masked.state, isFilled: this.isFilled } } set state(e) { this.masked.state = e.masked, this.isFilled = e.isFilled } currentMaskFlags(e) { var t; return { ...e, _beforeTailState: (e == null || (t = e._beforeTailState) == null ? void 0 : t.masked) || e?._beforeTailState } } pad(e) { return new y } } be.DEFAULT_DEFINITIONS = { 0: /\d/, a: /[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/, "*": /./ }; class pi extends w { updateOptions(e) { super.updateOptions(e) } _update(e) { const t = e.mask; t && (e.validate = i => i.search(t) >= 0), super._update(e) } } _.MaskedRegExp = pi; class D extends w { constructor(e) { super({ ...D.DEFAULTS, ...e, definitions: Object.assign({}, be.DEFAULT_DEFINITIONS, e?.definitions) }) } updateOptions(e) { super.updateOptions(e) } _update(e) { e.definitions = Object.assign({}, this.definitions, e.definitions), super._update(e), this._rebuildMask() } _rebuildMask() { const e = this.definitions; this._blocks = [], this.exposeBlock = void 0, this._stops = [], this._maskedBlocks = {}; const t = this.mask; if (!t || !e) return; let i = !1, n = !1; for (let r = 0; r < t.length; ++r) { if (this.blocks) { const l = t.slice(r), c = Object.keys(this.blocks).filter(p => l.indexOf(p) === 0); c.sort((p, v) => v.length - p.length); const d = c[0]; if (d) { const { expose: p, repeat: v, ...f } = me(this.blocks[d]), g = { lazy: this.lazy, eager: this.eager, placeholderChar: this.placeholderChar, displayChar: this.displayChar, overwrite: this.overwrite, autofix: this.autofix, ...f, repeat: v, parent: this }, S = v != null ? new _.RepeatBlock(g) : Y(g); S && (this._blocks.push(S), p && (this.exposeBlock = S), this._maskedBlocks[d] || (this._maskedBlocks[d] = []), this._maskedBlocks[d].push(this._blocks.length - 1)), r += d.length - 1; continue } } let a = t[r], o = a in e; if (a === D.STOP_CHAR) { this._stops.push(this._blocks.length); continue } if (a === "{" || a === "}") { i = !i; continue } if (a === "[" || a === "]") { n = !n; continue } if (a === D.ESCAPE_CHAR) { if (++r, a = t[r], !a) break; o = !1 } const u = o ? new be({ isOptional: n, lazy: this.lazy, eager: this.eager, placeholderChar: this.placeholderChar, displayChar: this.displayChar, ...me(e[a]), parent: this }) : new Rt({ char: a, eager: this.eager, isUnmasking: i }); this._blocks.push(u) } } get state() { return { ...super.state, _blocks: this._blocks.map(e => e.state) } } set state(e) { if (!e) { this.reset(); return } const { _blocks: t, ...i } = e; this._blocks.forEach((n, r) => n.state = t[r]), super.state = i } reset() { super.reset(), this._blocks.forEach(e => e.reset()) } get isComplete() { return this.exposeBlock ? this.exposeBlock.isComplete : this._blocks.every(e => e.isComplete) } get isFilled() { return this._blocks.every(e => e.isFilled) } get isFixed() { return this._blocks.every(e => e.isFixed) } get isOptional() { return this._blocks.every(e => e.isOptional) } doCommit() { this._blocks.forEach(e => e.doCommit()), super.doCommit() } get unmaskedValue() { return this.exposeBlock ? this.exposeBlock.unmaskedValue : this._blocks.reduce((e, t) => e += t.unmaskedValue, "") } set unmaskedValue(e) { if (this.exposeBlock) { const t = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length); this.exposeBlock.unmaskedValue = e, this.appendTail(t), this.doCommit() } else super.unmaskedValue = e } get value() { return this.exposeBlock ? this.exposeBlock.value : this._blocks.reduce((e, t) => e += t.value, "") } set value(e) { if (this.exposeBlock) { const t = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length); this.exposeBlock.value = e, this.appendTail(t), this.doCommit() } else super.value = e } get typedValue() { return this.exposeBlock ? this.exposeBlock.typedValue : super.typedValue } set typedValue(e) { if (this.exposeBlock) { const t = this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock)) + this.exposeBlock.displayValue.length); this.exposeBlock.typedValue = e, this.appendTail(t), this.doCommit() } else super.typedValue = e } get displayValue() { return this._blocks.reduce((e, t) => e += t.displayValue, "") } appendTail(e) { return super.appendTail(e).aggregate(this._appendPlaceholder()) } _appendEager() { var e; const t = new y; let i = (e = this._mapPosToBlock(this.displayValue.length)) == null ? void 0 : e.index; if (i == null) return t; this._blocks[i].isFilled && ++i; for (let n = i; n < this._blocks.length; ++n) { const r = this._blocks[n]._appendEager(); if (!r.inserted) break; t.aggregate(r) } return t } _appendCharRaw(e, t) { t === void 0 && (t = {}); const i = this._mapPosToBlock(this.displayValue.length), n = new y; if (!i) return n; for (let a = i.index, o; o = this._blocks[a]; ++a) { var r; const u = o._appendChar(e, { ...t, _beforeTailState: (r = t._beforeTailState) == null || (r = r._blocks) == null ? void 0 : r[a] }); if (n.aggregate(u), u.consumed) break } return n } extractTail(e, t) { e === void 0 && (e = 0), t === void 0 && (t = this.displayValue.length); const i = new ne; return e === t || this._forEachBlocksInRange(e, t, (n, r, a, o) => { const u = n.extractTail(a, o); u.stop = this._findStopBefore(r), u.from = this._blockStartPos(r), u instanceof ne && (u.blockIndex = r), i.extend(u) }), i } extractInput(e, t, i) { if (e === void 0 && (e = 0), t === void 0 && (t = this.displayValue.length), i === void 0 && (i = {}), e === t) return ""; let n = ""; return this._forEachBlocksInRange(e, t, (r, a, o, u) => { n += r.extractInput(o, u, i) }), n } _findStopBefore(e) { let t; for (let i = 0; i < this._stops.length; ++i) { const n = this._stops[i]; if (n <= e) t = n; else break } return t } _appendPlaceholder(e) { const t = new y; if (this.lazy && e == null) return t; const i = this._mapPosToBlock(this.displayValue.length); if (!i) return t; const n = i.index, r = e ?? this._blocks.length; return this._blocks.slice(n, r).forEach(a => { if (!a.lazy || e != null) { var o; t.aggregate(a._appendPlaceholder((o = a._blocks) == null ? void 0 : o.length)) } }), t } _mapPosToBlock(e) { let t = ""; for (let i = 0; i < this._blocks.length; ++i) { const n = this._blocks[i], r = t.length; if (t += n.displayValue, e <= t.length) return { index: i, offset: e - r } } } _blockStartPos(e) { return this._blocks.slice(0, e).reduce((t, i) => t += i.displayValue.length, 0) } _forEachBlocksInRange(e, t, i) { t === void 0 && (t = this.displayValue.length); const n = this._mapPosToBlock(e); if (n) { const r = this._mapPosToBlock(t), a = r && n.index === r.index, o = n.offset, u = r && a ? r.offset : this._blocks[n.index].displayValue.length; if (i(this._blocks[n.index], n.index, o, u), r && !a) { for (let l = n.index + 1; l < r.index; ++l)i(this._blocks[l], l, 0, this._blocks[l].displayValue.length); i(this._blocks[r.index], r.index, 0, r.offset) } } } remove(e, t) { e === void 0 && (e = 0), t === void 0 && (t = this.displayValue.length); const i = super.remove(e, t); return this._forEachBlocksInRange(e, t, (n, r, a, o) => { i.aggregate(n.remove(a, o)) }), i } nearestInputPos(e, t) { if (t === void 0 && (t = m.NONE), !this._blocks.length) return 0; const i = new di(this, e); if (t === m.NONE) return i.pushRightBeforeInput() || (i.popState(), i.pushLeftBeforeInput()) ? i.pos : this.displayValue.length; if (t === m.LEFT || t === m.FORCE_LEFT) { if (t === m.LEFT) { if (i.pushRightBeforeFilled(), i.ok && i.pos === e) return e; i.popState() } if (i.pushLeftBeforeInput(), i.pushLeftBeforeRequired(), i.pushLeftBeforeFilled(), t === m.LEFT) { if (i.pushRightBeforeInput(), i.pushRightBeforeRequired(), i.ok && i.pos <= e || (i.popState(), i.ok && i.pos <= e)) return i.pos; i.popState() } return i.ok ? i.pos : t === m.FORCE_LEFT ? 0 : (i.popState(), i.ok || (i.popState(), i.ok) ? i.pos : 0) } return t === m.RIGHT || t === m.FORCE_RIGHT ? (i.pushRightBeforeInput(), i.pushRightBeforeRequired(), i.pushRightBeforeFilled() ? i.pos : t === m.FORCE_RIGHT ? this.displayValue.length : (i.popState(), i.ok || (i.popState(), i.ok) ? i.pos : this.nearestInputPos(e, m.LEFT))) : e } totalInputPositions(e, t) { e === void 0 && (e = 0), t === void 0 && (t = this.displayValue.length); let i = 0; return this._forEachBlocksInRange(e, t, (n, r, a, o) => { i += n.totalInputPositions(a, o) }), i } maskedBlock(e) { return this.maskedBlocks(e)[0] } maskedBlocks(e) { const t = this._maskedBlocks[e]; return t ? t.map(i => this._blocks[i]) : [] } pad(e) { const t = new y; return this._forEachBlocksInRange(0, this.displayValue.length, i => t.aggregate(i.pad(e))), t } } D.DEFAULTS = { ...w.DEFAULTS, lazy: !0, placeholderChar: "_" }; D.STOP_CHAR = "`"; D.ESCAPE_CHAR = "\\"; D.InputDefinition = be; D.FixedDefinition = Rt; _.MaskedPattern = D; class Ee extends D { get _matchFrom() { return this.maxLength - String(this.from).length } constructor(e) { super(e) } updateOptions(e) { super.updateOptions(e) } _update(e) { const { to: t = this.to || 0, from: i = this.from || 0, maxLength: n = this.maxLength || 0, autofix: r = this.autofix, ...a } = e; this.to = t, this.from = i, this.maxLength = Math.max(String(t).length, n), this.autofix = r; const o = String(this.from).padStart(this.maxLength, "0"), u = String(this.to).padStart(this.maxLength, "0"); let l = 0; for (; l < u.length && u[l] === o[l];)++l; a.mask = u.slice(0, l).replace(/0/g, "\\0") + "0".repeat(this.maxLength - l), super._update(a) } get isComplete() { return super.isComplete && !!this.value } boundaries(e) { let t = "", i = ""; const [, n, r] = e.match(/^(\D*)(\d*)(\D*)/) || []; return r && (t = "0".repeat(n.length) + r, i = "9".repeat(n.length) + r), t = t.padEnd(this.maxLength, "0"), i = i.padEnd(this.maxLength, "9"), [t, i] } doPrepareChar(e, t) { t === void 0 && (t = {}); let i; return [e, i] = super.doPrepareChar(e.replace(/\D/g, ""), t), e || (i.skip = !this.isComplete), [e, i] } _appendCharRaw(e, t) { if (t === void 0 && (t = {}), !this.autofix || this.value.length + 1 > this.maxLength) return super._appendCharRaw(e, t); const i = String(this.from).padStart(this.maxLength, "0"), n = String(this.to).padStart(this.maxLength, "0"), [r, a] = this.boundaries(this.value + e); return Number(a) < this.from ? super._appendCharRaw(i[this.value.length], t) : Number(r) > this.to ? !t.tail && this.autofix === "pad" && this.value.length + 1 < this.maxLength ? super._appendCharRaw(i[this.value.length], t).aggregate(this._appendCharRaw(e, t)) : super._appendCharRaw(n[this.value.length], t) : super._appendCharRaw(e, t) } doValidate(e) { const t = this.value; if (t.search(/[^0]/) === -1 && t.length <= this._matchFrom) return !0; const [n, r] = this.boundaries(t); return this.from <= Number(r) && Number(n) <= this.to && super.doValidate(e) } pad(e) { const t = new y; if (this.value.length === this.maxLength) return t; const i = this.value, n = this.maxLength - this.value.length; if (n) { this.reset(); for (let r = 0; r < n; ++r)t.aggregate(super._appendCharRaw("0", e)); i.split("").forEach(r => this._appendCharRaw(r)) } return t } } _.MaskedRange = Ee; const fi = "d{.}`m{.}`Y"; class $ extends D { static extractPatternOptions(e) { const { mask: t, pattern: i, ...n } = e; return { ...n, mask: ee(t) ? t : i } } constructor(e) { super($.extractPatternOptions({ ...$.DEFAULTS, ...e })) } updateOptions(e) { super.updateOptions(e) } _update(e) { const { mask: t, pattern: i, blocks: n, ...r } = { ...$.DEFAULTS, ...e }, a = Object.assign({}, $.GET_DEFAULT_BLOCKS()); e.min && (a.Y.from = e.min.getFullYear()), e.max && (a.Y.to = e.max.getFullYear()), e.min && e.max && a.Y.from === a.Y.to && (a.m.from = e.min.getMonth() + 1, a.m.to = e.max.getMonth() + 1, a.m.from === a.m.to && (a.d.from = e.min.getDate(), a.d.to = e.max.getDate())), Object.assign(a, this.blocks, n), super._update({ ...r, mask: ee(t) ? t : i, blocks: a }) } doValidate(e) { const t = this.date; return super.doValidate(e) && (!this.isComplete || this.isDateExist(this.value) && t != null && (this.min == null || this.min <= t) && (this.max == null || t <= this.max)) } isDateExist(e) { return this.format(this.parse(e, this), this).indexOf(e) >= 0 } get date() { return this.typedValue } set date(e) { this.typedValue = e } get typedValue() { return this.isComplete ? super.typedValue : null } set typedValue(e) { super.typedValue = e } maskEquals(e) { return e === Date || super.maskEquals(e) } optionsIsChanged(e) { return super.optionsIsChanged($.extractPatternOptions(e)) } } $.GET_DEFAULT_BLOCKS = () => ({ d: { mask: Ee, from: 1, to: 31, maxLength: 2 }, m: { mask: Ee, from: 1, to: 12, maxLength: 2 }, Y: { mask: Ee, from: 1900, to: 9999 } }); $.DEFAULTS = { ...D.DEFAULTS, mask: Date, pattern: fi, format: (s, e) => { if (!s) return ""; const t = String(s.getDate()).padStart(2, "0"), i = String(s.getMonth() + 1).padStart(2, "0"), n = s.getFullYear(); return [t, i, n].join(".") }, parse: (s, e) => { const [t, i, n] = s.split(".").map(Number); return new Date(n, i - 1, t) } }; _.MaskedDate = $; class Fe extends w { constructor(e) { super({ ...Fe.DEFAULTS, ...e }), this.currentMask = void 0 } updateOptions(e) { super.updateOptions(e) } _update(e) { super._update(e), "mask" in e && (this.exposeMask = void 0, this.compiledMasks = Array.isArray(e.mask) ? e.mask.map(t => { const { expose: i, ...n } = me(t), r = Y({ overwrite: this._overwrite, eager: this._eager, skipInvalid: this._skipInvalid, ...n }); return i && (this.exposeMask = r), r }) : []) } _appendCharRaw(e, t) { t === void 0 && (t = {}); const i = this._applyDispatch(e, t); return this.currentMask && i.aggregate(this.currentMask._appendChar(e, this.currentMaskFlags(t))), i } _applyDispatch(e, t, i) { e === void 0 && (e = ""), t === void 0 && (t = {}), i === void 0 && (i = ""); const n = t.tail && t._beforeTailState != null ? t._beforeTailState._value : this.value, r = this.rawInputValue, a = t.tail && t._beforeTailState != null ? t._beforeTailState._rawInputValue : r, o = r.slice(a.length), u = this.currentMask, l = new y, c = u?.state; return this.currentMask = this.doDispatch(e, { ...t }, i), this.currentMask && (this.currentMask !== u ? (this.currentMask.reset(), a && (this.currentMask.append(a, { raw: !0 }), l.tailShift = this.currentMask.value.length - n.length), o && (l.tailShift += this.currentMask.append(o, { raw: !0, tail: !0 }).tailShift)) : c && (this.currentMask.state = c)), l } _appendPlaceholder() { const e = this._applyDispatch(); return this.currentMask && e.aggregate(this.currentMask._appendPlaceholder()), e } _appendEager() { const e = this._applyDispatch(); return this.currentMask && e.aggregate(this.currentMask._appendEager()), e } appendTail(e) { const t = new y; return e && t.aggregate(this._applyDispatch("", {}, e)), t.aggregate(this.currentMask ? this.currentMask.appendTail(e) : super.appendTail(e)) } currentMaskFlags(e) { var t, i; return { ...e, _beforeTailState: ((t = e._beforeTailState) == null ? void 0 : t.currentMaskRef) === this.currentMask && ((i = e._beforeTailState) == null ? void 0 : i.currentMask) || e._beforeTailState } } doDispatch(e, t, i) { return t === void 0 && (t = {}), i === void 0 && (i = ""), this.dispatch(e, this, t, i) } doValidate(e) { return super.doValidate(e) && (!this.currentMask || this.currentMask.doValidate(this.currentMaskFlags(e))) } doPrepare(e, t) { t === void 0 && (t = {}); let [i, n] = super.doPrepare(e, t); if (this.currentMask) { let r;[i, r] = super.doPrepare(i, this.currentMaskFlags(t)), n = n.aggregate(r) } return [i, n] } doPrepareChar(e, t) { t === void 0 && (t = {}); let [i, n] = super.doPrepareChar(e, t); if (this.currentMask) { let r;[i, r] = super.doPrepareChar(i, this.currentMaskFlags(t)), n = n.aggregate(r) } return [i, n] } reset() { var e; (e = this.currentMask) == null || e.reset(), this.compiledMasks.forEach(t => t.reset()) } get value() { return this.exposeMask ? this.exposeMask.value : this.currentMask ? this.currentMask.value : "" } set value(e) { this.exposeMask ? (this.exposeMask.value = e, this.currentMask = this.exposeMask, this._applyDispatch()) : super.value = e } get unmaskedValue() { return this.exposeMask ? this.exposeMask.unmaskedValue : this.currentMask ? this.currentMask.unmaskedValue : "" } set unmaskedValue(e) { this.exposeMask ? (this.exposeMask.unmaskedValue = e, this.currentMask = this.exposeMask, this._applyDispatch()) : super.unmaskedValue = e } get typedValue() { return this.exposeMask ? this.exposeMask.typedValue : this.currentMask ? this.currentMask.typedValue : "" } set typedValue(e) { if (this.exposeMask) { this.exposeMask.typedValue = e, this.currentMask = this.exposeMask, this._applyDispatch(); return } let t = String(e); this.currentMask && (this.currentMask.typedValue = e, t = this.currentMask.unmaskedValue), this.unmaskedValue = t } get displayValue() { return this.currentMask ? this.currentMask.displayValue : "" } get isComplete() { var e; return !!((e = this.currentMask) != null && e.isComplete) } get isFilled() { var e; return !!((e = this.currentMask) != null && e.isFilled) } remove(e, t) { const i = new y; return this.currentMask && i.aggregate(this.currentMask.remove(e, t)).aggregate(this._applyDispatch()), i } get state() { var e; return { ...super.state, _rawInputValue: this.rawInputValue, compiledMasks: this.compiledMasks.map(t => t.state), currentMaskRef: this.currentMask, currentMask: (e = this.currentMask) == null ? void 0 : e.state } } set state(e) { const { compiledMasks: t, currentMaskRef: i, currentMask: n, ...r } = e; t && this.compiledMasks.forEach((a, o) => a.state = t[o]), i != null && (this.currentMask = i, this.currentMask.state = n), super.state = r } extractInput(e, t, i) { return this.currentMask ? this.currentMask.extractInput(e, t, i) : "" } extractTail(e, t) { return this.currentMask ? this.currentMask.extractTail(e, t) : super.extractTail(e, t) } doCommit() { this.currentMask && this.currentMask.doCommit(), super.doCommit() } nearestInputPos(e, t) { return this.currentMask ? this.currentMask.nearestInputPos(e, t) : super.nearestInputPos(e, t) } get overwrite() { return this.currentMask ? this.currentMask.overwrite : this._overwrite } set overwrite(e) { this._overwrite = e } get eager() { return this.currentMask ? this.currentMask.eager : this._eager } set eager(e) { this._eager = e } get skipInvalid() { return this.currentMask ? this.currentMask.skipInvalid : this._skipInvalid } set skipInvalid(e) { this._skipInvalid = e } get autofix() { return this.currentMask ? this.currentMask.autofix : this._autofix } set autofix(e) { this._autofix = e } maskEquals(e) { return Array.isArray(e) ? this.compiledMasks.every((t, i) => { if (!e[i]) return; const { mask: n, ...r } = e[i]; return ye(t, r) && t.maskEquals(n) }) : super.maskEquals(e) } typedValueEquals(e) { var t; return !!((t = this.currentMask) != null && t.typedValueEquals(e)) } } Fe.DEFAULTS = { ...w.DEFAULTS, dispatch: (s, e, t, i) => { if (!e.compiledMasks.length) return; const n = e.rawInputValue, r = e.compiledMasks.map((a, o) => { const u = e.currentMask === a, l = u ? a.displayValue.length : a.nearestInputPos(a.displayValue.length, m.FORCE_LEFT); return a.rawInputValue !== n ? (a.reset(), a.append(n, { raw: !0 })) : u || a.remove(l), a.append(s, e.currentMaskFlags(t)), a.appendTail(i), { index: o, weight: a.rawInputValue.length, totalInputPositions: a.totalInputPositions(0, Math.max(l, a.nearestInputPos(a.displayValue.length, m.FORCE_LEFT))) } }); return r.sort((a, o) => o.weight - a.weight || o.totalInputPositions - a.totalInputPositions), e.compiledMasks[r[0].index] } }; _.MaskedDynamic = Fe; class Ie extends D { constructor(e) { super({ ...Ie.DEFAULTS, ...e }) } updateOptions(e) { super.updateOptions(e) } _update(e) { const { enum: t, ...i } = e; if (t) { const n = t.map(o => o.length), r = Math.min(...n), a = Math.max(...n) - r; i.mask = "*".repeat(r), a && (i.mask += "[" + "*".repeat(a) + "]"), this.enum = t } super._update(i) } _appendCharRaw(e, t) { t === void 0 && (t = {}); const i = Math.min(this.nearestInputPos(0, m.FORCE_RIGHT), this.value.length), n = this.enum.filter(r => this.matchValue(r, this.unmaskedValue + e, i)); if (n.length) { n.length === 1 && this._forEachBlocksInRange(0, this.value.length, (a, o) => { const u = n[0][o]; o >= this.value.length || u === a.value || (a.reset(), a._appendChar(u, t)) }); const r = super._appendCharRaw(n[0][this.value.length], t); return n.length === 1 && n[0].slice(this.unmaskedValue.length).split("").forEach(a => r.aggregate(super._appendCharRaw(a))), r } return new y({ skip: !this.isComplete }) } extractTail(e, t) { return e === void 0 && (e = 0), t === void 0 && (t = this.displayValue.length), new j("", e) } remove(e, t) { if (e === void 0 && (e = 0), t === void 0 && (t = this.displayValue.length), e === t) return new y; const i = Math.min(super.nearestInputPos(0, m.FORCE_RIGHT), this.value.length); let n; for (n = e; n >= 0 && !(this.enum.filter(o => this.matchValue(o, this.value.slice(i, n), i)).length > 1); --n); const r = super.remove(n, t); return r.tailShift += n - e, r } get isComplete() { return this.enum.indexOf(this.value) >= 0 } } Ie.DEFAULTS = { ...D.DEFAULTS, matchValue: (s, e, t) => s.indexOf(e, t) === t }; _.MaskedEnum = Ie; class mi extends w { updateOptions(e) { super.updateOptions(e) } _update(e) { super._update({ ...e, validate: e.mask }) } } _.MaskedFunction = mi; var Ut; class V extends w { constructor(e) { super({ ...V.DEFAULTS, ...e }) } updateOptions(e) { super.updateOptions(e) } _update(e) { super._update(e), this._updateRegExps() } _updateRegExps() { const e = "^" + (this.allowNegative ? "[+|\\-]?" : ""), t = "\\d*", i = (this.scale ? "(" + Me(this.radix) + "\\d{0," + this.scale + "})?" : "") + "$"; this._numberRegExp = new RegExp(e + t + i), this._mapToRadixRegExp = new RegExp("[" + this.mapToRadix.map(Me).join("") + "]", "g"), this._thousandsSeparatorRegExp = new RegExp(Me(this.thousandsSeparator), "g") } _removeThousandsSeparators(e) { return e.replace(this._thousandsSeparatorRegExp, "") } _insertThousandsSeparators(e) { const t = e.split(this.radix); return t[0] = t[0].replace(/\B(?=(\d{3})+(?!\d))/g, this.thousandsSeparator), t.join(this.radix) } doPrepareChar(e, t) { t === void 0 && (t = {}); const [i, n] = super.doPrepareChar(this._removeThousandsSeparators(this.scale && this.mapToRadix.length && (t.input && t.raw || !t.input && !t.raw) ? e.replace(this._mapToRadixRegExp, this.radix) : e), t); return e && !i && (n.skip = !0), i && !this.allowPositive && !this.value && i !== "-" && n.aggregate(this._appendChar("-")), [i, n] } _separatorsCount(e, t) { t === void 0 && (t = !1); let i = 0; for (let n = 0; n < e; ++n)this._value.indexOf(this.thousandsSeparator, n) === n && (++i, t && (e += this.thousandsSeparator.length)); return i } _separatorsCountFromSlice(e) { return e === void 0 && (e = this._value), this._separatorsCount(this._removeThousandsSeparators(e).length, !0) } extractInput(e, t, i) { return e === void 0 && (e = 0), t === void 0 && (t = this.displayValue.length), [e, t] = this._adjustRangeWithSeparators(e, t), this._removeThousandsSeparators(super.extractInput(e, t, i)) } _appendCharRaw(e, t) { t === void 0 && (t = {}); const i = t.tail && t._beforeTailState ? t._beforeTailState._value : this._value, n = this._separatorsCountFromSlice(i); this._value = this._removeThousandsSeparators(this.value); const r = this._value; this._value += e; const a = this.number; let o = !isNaN(a), u = !1; if (o) { let p; this.min != null && this.min < 0 && this.number < this.min && (p = this.min), this.max != null && this.max > 0 && this.number > this.max && (p = this.max), p != null && (this.autofix ? (this._value = this.format(p, this).replace(V.UNMASKED_RADIX, this.radix), u || (u = r === this._value && !t.tail)) : o = !1), o && (o = !!this._value.match(this._numberRegExp)) } let l; o ? l = new y({ inserted: this._value.slice(r.length), rawInserted: u ? "" : e, skip: u }) : (this._value = r, l = new y), this._value = this._insertThousandsSeparators(this._value); const c = t.tail && t._beforeTailState ? t._beforeTailState._value : this._value, d = this._separatorsCountFromSlice(c); return l.tailShift += (d - n) * this.thousandsSeparator.length, l } _findSeparatorAround(e) { if (this.thousandsSeparator) { const t = e - this.thousandsSeparator.length + 1, i = this.value.indexOf(this.thousandsSeparator, t); if (i <= e) return i } return -1 } _adjustRangeWithSeparators(e, t) { const i = this._findSeparatorAround(e); i >= 0 && (e = i); const n = this._findSeparatorAround(t); return n >= 0 && (t = n + this.thousandsSeparator.length), [e, t] } remove(e, t) { e === void 0 && (e = 0), t === void 0 && (t = this.displayValue.length), [e, t] = this._adjustRangeWithSeparators(e, t); const i = this.value.slice(0, e), n = this.value.slice(t), r = this._separatorsCount(i.length); this._value = this._insertThousandsSeparators(this._removeThousandsSeparators(i + n)); const a = this._separatorsCountFromSlice(i); return new y({ tailShift: (a - r) * this.thousandsSeparator.length }) } nearestInputPos(e, t) { if (!this.thousandsSeparator) return e; switch (t) { case m.NONE: case m.LEFT: case m.FORCE_LEFT: { const i = this._findSeparatorAround(e - 1); if (i >= 0) { const n = i + this.thousandsSeparator.length; if (e < n || this.value.length <= n || t === m.FORCE_LEFT) return i } break } case m.RIGHT: case m.FORCE_RIGHT: { const i = this._findSeparatorAround(e); if (i >= 0) return i + this.thousandsSeparator.length } }return e } doCommit() { if (this.value) { const e = this.number; let t = e; this.min != null && (t = Math.max(t, this.min)), this.max != null && (t = Math.min(t, this.max)), t !== e && (this.unmaskedValue = this.format(t, this)); let i = this.value; this.normalizeZeros && (i = this._normalizeZeros(i)), this.padFractionalZeros && this.scale > 0 && (i = this._padFractionalZeros(i)), this._value = i } super.doCommit() } _normalizeZeros(e) { const t = this._removeThousandsSeparators(e).split(this.radix); return t[0] = t[0].replace(/^(\D*)(0*)(\d*)/, (i, n, r, a) => n + a), e.length && !/\d$/.test(t[0]) && (t[0] = t[0] + "0"), t.length > 1 && (t[1] = t[1].replace(/0*$/, ""), t[1].length || (t.length = 1)), this._insertThousandsSeparators(t.join(this.radix)) } _padFractionalZeros(e) { if (!e) return e; const t = e.split(this.radix); return t.length < 2 && t.push(""), t[1] = t[1].padEnd(this.scale, "0"), t.join(this.radix) } doSkipInvalid(e, t, i) { t === void 0 && (t = {}); const n = this.scale === 0 && e !== this.thousandsSeparator && (e === this.radix || e === V.UNMASKED_RADIX || this.mapToRadix.includes(e)); return super.doSkipInvalid(e, t, i) && !n } get unmaskedValue() { return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix, V.UNMASKED_RADIX) } set unmaskedValue(e) { super.unmaskedValue = e } get typedValue() { return this.parse(this.unmaskedValue, this) } set typedValue(e) { this.rawInputValue = this.format(e, this).replace(V.UNMASKED_RADIX, this.radix) } get number() { return this.typedValue } set number(e) { this.typedValue = e } get allowNegative() { return this.min != null && this.min < 0 || this.max != null && this.max < 0 } get allowPositive() { return this.min != null && this.min > 0 || this.max != null && this.max > 0 } typedValueEquals(e) { return (super.typedValueEquals(e) || V.EMPTY_VALUES.includes(e) && V.EMPTY_VALUES.includes(this.typedValue)) && !(e === 0 && this.value === "") } } Ut = V; V.UNMASKED_RADIX = "."; V.EMPTY_VALUES = [...w.EMPTY_VALUES, 0]; V.DEFAULTS = { ...w.DEFAULTS, mask: Number, radix: ",", thousandsSeparator: "", mapToRadix: [Ut.UNMASKED_RADIX], min: Number.MIN_SAFE_INTEGER, max: Number.MAX_SAFE_INTEGER, scale: 2, normalizeZeros: !0, padFractionalZeros: !1, parse: Number, format: s => s.toLocaleString("en-US", { useGrouping: !1, maximumFractionDigits: 20 }) }; _.MaskedNumber = V; const Pe = { MASKED: "value", UNMASKED: "unmaskedValue", TYPED: "typedValue" }; function Pt(s, e, t) { e === void 0 && (e = Pe.MASKED), t === void 0 && (t = Pe.MASKED); const i = Y(s); return n => i.runIsolated(r => (r[e] = n, r[t])) } function gi(s, e, t, i) { return Pt(e, t, i)(s) } _.PIPE_TYPE = Pe; _.createPipe = Pt; _.pipe = gi; class vi extends D { get repeatFrom() { var e; return (e = Array.isArray(this.repeat) ? this.repeat[0] : this.repeat === 1 / 0 ? 0 : this.repeat) != null ? e : 0 } get repeatTo() { var e; return (e = Array.isArray(this.repeat) ? this.repeat[1] : this.repeat) != null ? e : 1 / 0 } constructor(e) { super(e) } updateOptions(e) { super.updateOptions(e) } _update(e) { var t, i, n; const { repeat: r, ...a } = me(e); this._blockOpts = Object.assign({}, this._blockOpts, a); const o = Y(this._blockOpts); this.repeat = (t = (i = r ?? o.repeat) != null ? i : this.repeat) != null ? t : 1 / 0, super._update({ mask: "m".repeat(Math.max(this.repeatTo === 1 / 0 && ((n = this._blocks) == null ? void 0 : n.length) || 0, this.repeatFrom)), blocks: { m: o }, eager: o.eager, overwrite: o.overwrite, skipInvalid: o.skipInvalid, lazy: o.lazy, placeholderChar: o.placeholderChar, displayChar: o.displayChar }) } _allocateBlock(e) { if (e < this._blocks.length) return this._blocks[e]; if (this.repeatTo === 1 / 0 || this._blocks.length < this.repeatTo) return this._blocks.push(Y(this._blockOpts)), this.mask += "m", this._blocks[this._blocks.length - 1] } _appendCharRaw(e, t) { t === void 0 && (t = {}); const i = new y; for (let u = (n = (r = this._mapPosToBlock(this.displayValue.length)) == null ? void 0 : r.index) != null ? n : Math.max(this._blocks.length - 1, 0), l, c; l = (a = this._blocks[u]) != null ? a : c = !c && this._allocateBlock(u); ++u) { var n, r, a, o; const d = l._appendChar(e, { ...t, _beforeTailState: (o = t._beforeTailState) == null || (o = o._blocks) == null ? void 0 : o[u] }); if (d.skip && c) { this._blocks.pop(), this.mask = this.mask.slice(1); break } if (i.aggregate(d), d.consumed) break } return i } _trimEmptyTail(e, t) { var i, n; e === void 0 && (e = 0); const r = Math.max(((i = this._mapPosToBlock(e)) == null ? void 0 : i.index) || 0, this.repeatFrom, 0); let a; t != null && (a = (n = this._mapPosToBlock(t)) == null ? void 0 : n.index), a == null && (a = this._blocks.length - 1); let o = 0; for (let u = a; r <= u && !this._blocks[u].unmaskedValue; --u, ++o); o && (this._blocks.splice(a - o + 1, o), this.mask = this.mask.slice(o)) } reset() { super.reset(), this._trimEmptyTail() } remove(e, t) { e === void 0 && (e = 0), t === void 0 && (t = this.displayValue.length); const i = super.remove(e, t); return this._trimEmptyTail(e, t), i } totalInputPositions(e, t) { return e === void 0 && (e = 0), t == null && this.repeatTo === 1 / 0 ? 1 / 0 : super.totalInputPositions(e, t) } get state() { return super.state } set state(e) { this._blocks.length = e._blocks.length, this.mask = this.mask.slice(0, this._blocks.length), super.state = e } } _.RepeatBlock = vi; try { globalThis.IMask = _ } catch { } class Te extends Error { constructor(e) { super(e), this.name = "ValidationError" } } class Ht extends Te { constructor(e = "The number has an invlidad format.") { super(e), this.name = "InvalidFormat" } } class jt extends Te { constructor(e = "The number number's checksum or check digit is invalid.") { super(e), this.name = "InvalidChecksum" } } class Xe extends Te { constructor(e = "The number has an invalid length.") { super(e), this.name = "InvalidLength" } } class Qe extends Te { constructor(e = "One of the parts of the number are invalid or unknown.") { super(e), this.name = "InvalidComponent" } } const _i = /^[0-9]+$/; function et(s) { return _i.test(s) } const Ci = { "-": "-", "­": "-", "¯": "-", "˗": "-", "֊": "-", "־": "-", "᠊": "-", "‐": "-", "‑": "-", "‒": "-", "–": "-", "—": "-", "―": "-", "‾": "-", "⁃": "-", "⁻": "-", "₋": "-", "−": "-", "⎯": "-", "⎺": "-", "⎻": "-", "⎼": "-", "⎽": "-", "⏤": "-", "－": "-", "﹣": "-", "￣": "-", "*": "*", "٭": "*", "܍": "*", "⁕": "*", "꘎": "*", "∗": "*", "⋆": "*", "⁎": "*", "✱": "*", "✲": "*", "✳": "*", "✺": "*", "✻": "*", "✼": "*", "✽": "*", "❃": "*", "❉": "*", "❊": "*", "❋": "*", "﹡": "*", "＊": "*", ",": ",", "¸": ",", "،": ",", "٫": ",", "٬": ",", "‚": ",", "′": ",", "⸴": ",", "、": ",", "，": ",", "︑": ",", "﹐": ",", "﹑": ",", "､": ",", ".": ".", "·": ".", "˙": ".", "·": ".", "۔": ".", "܁": ".", "܂": ".", "࠰": ".", "་": ".", "༌": ".", ᐧ: ".", "᛫": ".", "∙": ".", "•": ".", "․": ".", "‧": ".", "⋅": ".", "⸱": ".", "⸳": ".", "。": ".", "・": ".", "﹒": ".", "．": ".", "･": ".", "﮲": ".", "﮳": ".", "𐄁": ".", "𐤟": ".", "𐩐": ".", "/": "/", "⁄": "/", "∕": "/", "⧸": "/", "／": "/", "࠼": "/", "⟋": "/", ":": ":", "፡": ":", "᛬": ":", "᠄": ":", "︓": ":", "︰": ":", "：": ":", "﹕": ":", " ": " ", "	": " ", "\v": " ", "\f": " ", " ": " ", " ": " ", " ": " ", " ": " ", " ": " ", " ": " ", " ": " ", " ": " ", " ": " ", " ": " ", " ": " ", " ": " ", " ": " ", "\u2028": " ", "\u2029": " ", " ": " ", " ": " ", "　": " ", "'": "'", "`": "'", "´": "'", ʾ: "'", ʿ: "'", "ʹ": "'", ʻ: "'", ʼ: "'", "ˈ": "'", "̀": "'", "́": "'", "̒": "'", "̓": "'", "՚": "'", "‛": "'", "‘": "'", "’": "'", 0: "0", "٠": "0", "۰": "0", "０": "0", "𝟎": "0", "𝟘": "0", "𝟢": "0", "𝟬": "0", "𝟶": "0", 1: "1", "١": "1", "۱": "1", "１": "1", "𝟏": "1", "𝟙": "1", "𝟣": "1", "𝟭": "1", "𝟷": "1", 2: "2", "۲": "2", "٢": "2", "２": "2", "𝟐": "2", "𝟚": "2", "𝟤": "2", "𝟮": "2", "𝟸": "2", 3: "3", "۳": "3", "٣": "3", "３": "3", "𝟑": "3", "𝟛": "3", "𝟥": "3", "𝟯": "3", "𝟹": "3", 4: "4", "۴": "4", "٤": "4", "４": "4", "𝟒": "4", "𝟜": "4", "𝟦": "4", "𝟰": "4", "𝟺": "4", 5: "5", "۵": "5", "٥": "5", "５": "5", "𝟓": "5", "𝟝": "5", "𝟧": "5", "𝟱": "5", "𝟻": "5", 6: "6", "۶": "6", "٦": "6", "６": "6", "𝟔": "6", "𝟞": "6", "𝟨": "6", "𝟲": "6", "𝟼": "6", 7: "7", "۷": "7", "٧": "7", "７": "7", "𝟕": "7", "𝟟": "7", "𝟩": "7", "𝟳": "7", "𝟽": "7", 8: "8", "۸": "8", "٨": "8", "８": "8", "𝟖": "8", "𝟠": "8", "𝟪": "8", "𝟴": "8", "𝟾": "8", 9: "9", "۹": "9", "٩": "9", "９": "9", "𝟗": "9", "𝟡": "9", "𝟫": "9", "𝟵": "9", "𝟿": "9" }; function tt(s, e = " ", t) { return typeof s != "string" ? ["", new Ht] : [[...s].map(n => { var r; return (r = Ci[n]) !== null && r !== void 0 ? r : n }).filter(n => !e.includes(n)).join("").toLocaleUpperCase(), null] } function ge(s, ...e) { return [0, ...e].map((i, n) => { const r = n >= e.length ? s.length : e[n], a = r < 0 ? s.length + r : r, o = i < 0 ? s.length + i : i; return s.substr(o, a - o) }).filter(i => i.length !== 0) } function He(s, { alphabet: e = "0123456789", reverse: t = !1, weights: i = [1], modulus: n = 0 }) { const r = i.length, a = s.split("").map(u => e.indexOf(u)); return (t ? a.reverse() : a).map((u, l) => u * i[l % r]).reduce((u, l) => { let c = l; for (; c < 0;)c += n; return (u + c) % n }, 0) } function Oe(s) { return tt(s, " -") } const Ei = { compact(s) { const [e, t] = Oe(s); if (t) throw t; return e }, format(s) { const [e] = Oe(s), [t, i] = ge(e, 8); return `${t} ${i}` }, validate(s) { const [e, t] = Oe(s); if (t) return { isValid: !1, error: t }; if (e.length !== 22) return { isValid: !1, error: new Xe }; if (!et(e)) return { isValid: !1, error: new Qe }; const [i, n, r, a] = ge(e, 7, 8, 21), o = String(10 - He(i, { reverse: !0, weights: [3, 1, 7, 9, 3, 1, 7], modulus: 10 })), u = String(10 - He(r, { reverse: !0, weights: [3, 1, 7, 9, 3, 1, 7, 9, 3, 1, 7, 9, 3, 1], modulus: 10 })); return o !== n || u !== a ? { isValid: !1, error: new jt } : { isValid: !0, compact: e, isIndividual: !1, isCompany: !1 } } }, { validate: yi, format: bi, compact: Si } = Ei, ki = Object.freeze(Object.defineProperty({ __proto__: null, compact: Si, format: bi, validate: yi }, Symbol.toStringTag, { value: "Module" })), Ai = ["20", "23", "24", "27", "30", "33", "34", "50", "51", "55"]; function Le(s) { return tt(s, " -") } const Fi = { compact(s) { const [e, t] = Le(s); if (t) throw t; return e }, format(s) { const [e] = Le(s); return ge(e, 2, 10).join("-") }, validate(s) { const [e, t] = Le(s); if (t) return { isValid: !1, error: t }; if (e.length !== 11) return { isValid: !1, error: new Xe }; if (!et(e)) return { isValid: !1, error: new Ht }; const [i, n, r] = ge(e, 2, 10); return Ai.includes(i) ? "012345678990"[11 - He(i + n, { weights: [5, 4, 3, 2, 7, 6, 5, 4, 3, 2], modulus: 11 })] !== r ? { isValid: !1, error: new jt } : { isValid: !0, compact: e, isIndividual: i[0] === "2", isCompany: i[0] === "3" } : { isValid: !1, error: new Qe } } }, { validate: Ii, format: Ti, compact: wi } = Fi, Di = Object.freeze(Object.defineProperty({ __proto__: null, compact: wi, format: Ti, validate: Ii }, Symbol.toStringTag, { value: "Module" })); function Ve(s) { return tt(s, " .") } const xi = { compact(s) { const [e, t] = Ve(s); if (t) throw t; return e }, format(s) { const [e] = Ve(s); return ge(e, e.length - 6, e.length - 3).join(".") }, validate(s) { const [e, t] = Ve(s); return t ? { isValid: !1, error: t } : e.length !== 7 && e.length !== 8 ? { isValid: !1, error: new Xe } : et(e) ? { isValid: !0, compact: e, isIndividual: !1, isCompany: !1 } : { isValid: !1, error: new Qe } } }, { validate: Bi, format: Mi, compact: Oi } = xi, Li = Object.freeze(Object.defineProperty({ __proto__: null, compact: Oi, format: Mi, validate: Bi }, Symbol.toStringTag, { value: "Module" })), Vi = Object.freeze(Object.defineProperty({ __proto__: null, cbu: ki, cuit: Di, dni: Li }, Symbol.toStringTag, { value: "Module" })); function ht(s) { const e = s.replace(/([FBUP])\1*/g, i => `(\\d{${i.length}})`), t = new RegExp(`^${e}$`); return i => { var n, r, a, o; const u = t.exec(i); return u ? { match: !0, f: (n = u[1]) !== null && n !== void 0 ? n : "", b: (r = u[2]) !== null && r !== void 0 ? r : "", u: (a = u[3]) !== null && a !== void 0 ? a : "", p: (o = u[4]) !== null && o !== void 0 ? o : "" } : { match: !1 } } } function I(s, e) { return { region: ht(s), country: ht(e) } } I("FFBBBUUUUP", "28FF0BBBUUUUP"), I("FFFBBBUUUUP", "9FFF0BBBUUUUP"), I("FFBBBUUUUP", "11FF0BBBUUUUP"), I("0FFBBBUUUUP", "30FF0BBBUUUUP"), I("FFBBBUUUUP", "24FF0BBBUUUUP"), I("FFBBBUUUUP", "22FF0BBBUUUUP"), I("0FFBBBUUUUP", "26FF0BBBUUUUP"), I("0FFBBBUUUUP", "40FF0BBBUUUUP"), I("FFBBBUUUUP", "23FF0BBBUUUUP"), I("FFFBBBBUUUP", "5FFF0BBBBUUUP"), I("FFBBBUUUUP", "27FF0BBBUUUUP"), I("0FFBBBUUUUP", "10FF0BBBUUUUP"), I("2FFBBBUUUUP", "32FF0BBBUUUUP"), I("1FFBBBUUUUP", "31FF0BBBUUUUP"), I("FFBBBUUUUP", "21FF0BBBUUUUP"), I("1FFBBBUUUUP", "41FF0BBBUUUUP"); const Ni = [[10, "Aguascalientes"], [12, "Calvillo"], [14, "Jesús María"], [20, "Mexicali"], [22, "Ensenada"], [27, "Tecate"], [27, "Tijuana"], [28, "La Mesa"], [28, "Rosarito"], [28, "Tijuana [alternate]"], [40, "La Paz"], [41, "Cabo San Lucas"], [42, "Ciudad Constitución"], [43, "Guerrero Negro"], [45, "San José del Cabo"], [46, "Santa Rosalía"], [50, "Campeche"], [51, "Calkiní"], [52, "Ciudad del Carmen"], [53, "Champotón"], [60, "Gómez Palacio"], [60, "Torreón"], [62, "Ciudad Acuña"], [68, "Monclova"], [71, "Nava"], [72, "Nueva Rosita"], [74, "Parras de la Fuente"], [75, "Piedras Negras"], [76, "Ramos Arizpe"], [77, "Sabinas"], [78, "Saltillo"], [80, "San Pedro de las Colonias"], [90, "Colima"], [95, "Manzanillo"], [97, "Tecomán"], [100, "Terán"], [100, "Tuxtla Gutiérrez"], [103, "Arriaga"], [107, "Cintalapa"], [109, "Comitán"], [109, "Villa Las Rosas"], [111, "Chiapa de Corso"], [113, "F. Comalapa"], [114, "Huixtla"], [123, "Ocosingo"], [124, "Ocozocuautla"], [125, "Palenque"], [126, "Pichucalco"], [127, "Pijijiapan"], [128, "Reforma"], [130, "San Cristóbal de las Casas"], [131, "Simojovel"], [133, "Tapachula"], [135, "Tonala"], [137, "Venustiano Carranza"], [138, "Villa Flores"], [140, "Yajalón"], [150, "Chihuahua"], [150, "Ciudad Delicias"], [152, "Ciudad Anáhuac"], [155, "Ciudad Camargo"], [158, "Ciudad Cuauhtémoc"], [161, "Ciudad Guerrero"], [162, "Parral"], [163, "Ciudad Jiménez"], [164, "Ciudad Juárez"], [165, "Ciudad Madera"], [167, "El Molino de Namiquipa"], [168, "Nuevo Casas Grandes"], [180, "Atizapan"], [180, "Chalco"], [180, "Ciudad de México"], [180, "Coacalco"], [180, "Cuautitlán Izcalli"], [180, "Cuautitlán"], [180, "Ecatepec"], [180, "Huehuetoca"], [180, "Huixquilucan"], [180, "Ixtapaluca"], [180, "Los Reyes La Paz"], [180, "Naucalpan"], [180, "Nezahualcóyotl"], [180, "Tecamac"], [180, "Teotihuacán"], [180, "Texcoco"], [180, "Tlalnepantla"], [190, "Durango"], [198, "N/A"], [201, "Tepehuanes"], [202, "Vicente Guerrero"], [210, "Guanajuato"], [211, "Abasolo"], [212, "Acámbaro"], [213, "Apaseo el Alto"], [214, "Apaseo el Grande"], [215, "Celaya"], [216, "Comonfort"], [217, "Coroneo"], [218, "Cortazar"], [219, "Cuerámaro"], [220, "Dolores Hidalgo"], [222, "Irapuato"], [223, "Jaral del Progreso"], [224, "Jerécuaro"], [225, "León"], [226, "Cd. Manuel Doblado"], [227, "Moroleón"], [229, "Pénjamo"], [232, "Romita"], [233, "Salamanca"], [234, "Salvatierra"], [236, "San Felipe"], [237, "Purísima de Bustos"], [237, "San Francisco del Rincoón"], [238, "San José Iturbide"], [239, "San Luis de la Paz"], [240, "San Miguel Allende"], [244, "Silao"], [247, "Uriangato"], [248, "Valle de Santiago"], [249, "Yuriria"], [260, "Chilpancingo"], [261, "Acapulco"], [263, "Arcelia"], [264, "Atoyac de Álvarez"], [266, "Ciudad Altamirano"], [267, "Coyuca de Benítez"], [270, "Chilapa"], [271, "Huitzuco"], [272, "Iguala"], [272, "La Sabana"], [274, "Cuajinicuilapa"], [274, "Ometepec"], [275, "San Marcos"], [276, "Taxco"], [278, "Teloloapan"], [281, "Tlapa"], [282, "Ixtapa Zihuatanejo"], [282, "Zihuatanejo"], [290, "Pachuca"], [291, "Actopan"], [292, "Apam"], [293, "Atotonilco el Grande"], [294, "Ciudad Sahagún"], [294, "Teocaltiche"], [295, "Cuautepec"], [296, "Huejutla"], [297, "Huichapan"], [298, "Ixmiquilpan"], [303, "Progreso de Obregón"], [305, "Tepeapulco"], [308, "Tizayuca"], [311, "Tula de Allende"], [312, "Tulancingo"], [313, "Zacualtipán"], [314, "Zimapán"], [320, "El Salto"], [320, "Guadalajara"], [320, "San Pedro Tlaquepaque"], [320, "Tlajomulco"], [320, "Tonala [alternate]"], [320, "Zapopan"], [326, "Ameca"], [327, "Arandas"], [330, "Atotonilco el Alto"], [331, "Atequiza"], [333, "Autlán"], [334, "Azteca"], [340, "Casimiro Castillo"], [341, "Cihuatlán"], [342, "Ciudad Guzmán"], [346, "Chapala"], [348, "El Grullo"], [355, "Ixtlahuacán del Río"], [356, "Jalostotitlán"], [357, "Jamay"], [361, "La Barca"], [362, "Lagos de Moreno"], [370, "Ocotlán"], [373, "Pihuamo"], [375, "Las Juntas"], [375, "Nuevo Vallarta"], [375, "Pitillal"], [375, "Puerto Vallarta"], [381, "San Juan de los Lagos"], [382, "N/A"], [384, "San Miguel el Alto"], [385, "San Patricio Melaque"], [386, "Sayula"], [387, "Tala"], [389, "Tamazula de Gordiano"], [391, "Tecalitlán"], [396, "Tepatitlán"], [397, "Tequila"], [403, "Tototlán"], [404, "Túxpam"], [411, "Villa Hidalgo"], [413, "Zacoalco de Torres"], [414, "Zapotiltic"], [416, "Zapotlanejo"], [420, "Toluca"], [421, "Acambay"], [422, "Almoloya de Juárez"], [424, "Amecameca"], [425, "Apaxco"], [426, "Atlacomulco"], [428, "Coatepec de Harinas"], [430, "Chicoloapan"], [431, "Chiconcuac"], [432, "El Oro"], [433, "Ixtapan de la Sal"], [434, "Ixtlahuaca"], [435, "Jilotepec"], [438, "Lerma"], [441, "Metepec"], [443, "Otumba"], [445, "San Mateo Atenco"], [446, "Tejupilco"], [448, "Temascaltepec"], [449, "Temoaya"], [450, "Tenancingo"], [451, "Tenago del Valle"], [453, "Santiago Tiangistenco"], [455, "Tultepec"], [456, "Tultitlán"], [457, "Valle de Bravo"], [460, "Villa Nicolás Romero"], [463, "Zumpango"], [470, "Morelia"], [472, "Aguililla"], [476, "Apatzingán"], [480, "Ciudad Hidalgo"], [483, "Cotija"], [484, "Cuitzeo"], [492, "Huetamo"], [493, "Jacona"], [494, "Jiquilpan"], [496, "La Piedad"], [497, "Lázaro Cárdenas"], [498, "Los Reyes"], [499, "Maravatío"], [501, "Nueva Italia"], [506, "Pátzcuaro"], [508, "Purépero"], [509, "Puruandiro"], [512, "Sahuayo"], [515, "Tacámbaro"], [517, "Tangancícuaro"], [519, "Tepalcatepec"], [523, "Tlazazalca"], [528, "Uruapan"], [533, "Yurécuaro"], [534, "Zacapu"], [535, "Zamora"], [536, "Zinapécuaro"], [537, "Zitácuaro"], [540, "Cuernavaca"], [542, "Cuautla"], [542, "Oaxtepec, Morelos"], [543, "Jiutepec"], [544, "Jojutla"], [545, "Puente de Ixtla"], [546, "Temixco"], [548, "Tetecala"], [549, "Yautepec"], [552, "Zacatepec"], [560, "Tepic"], [561, "Acaponeta"], [562, "Ahuacatlán"], [564, "Compostela"], [566, "Ixtlán del Río"], [571, "San Blas"], [573, "Santiago Ixcuintla"], [575, "Túxpam [alternate]"], [580, "Apodaca"], [580, "Cadereyta"], [580, "Cd. Guadalupe"], [580, "General Escobedo"], [580, "Monterrey"], [580, "San Nicolás de los Garza"], [580, "San Pedro Garza García"], [580, "Santa Catarina"], [583, "Allende"], [592, "General Zuazua"], [595, "Linares"], [597, "Montemorelos"], [599, "Sabinas Hidalgo"], [600, "Salinas Victoria"], [601, "El Cercado"], [601, "Villa de Santiago"], [610, "Oaxaca"], [613, "Tlaxiaco"], [614, "Huajuapan de León"], [616, "Ixtepec"], [617, "Juchitán"], [619, "Loma Bonita"], [620, "Matías Romero"], [621, "Miahuatlán"], [622, "Ocotlán [alternate]"], [624, "Puerto Escondido"], [626, "Salina Cruz"], [627, "Lagunas"], [628, "Tuxtepec"], [630, "Pochutla"], [631, "San Pedro Tapanatepec"], [632, "Santa Lucía del Camino"], [634, "Bahías de Huatulco"], [635, "Santiago Juxtlahuaca"], [636, "Pinotepa Nacional"], [637, "Tehuantepec"], [638, "Tlacolula"], [640, "Zimatlán"], [650, "Cholula"], [650, "La Resurrección"], [650, "Puebla"], [650, "San Baltazar Campeche"], [651, "N/A"], [652, "Acatzingo"], [654, "Atlixco"], [656, "Cuetzalan"], [659, "Huauchinango"], [660, "Huejotzingo"], [662, "Izúcar de Matamoros"], [667, "San Martín Texmelucan"], [668, "San Felipe Hueyotlipan"], [669, "Tecamachalco"], [670, "Tehuacán"], [671, "San Lorenzo"], [672, "Teziutlán"], [674, "Xicotepec de Juárez"], [676, "Zacatlán"], [680, "Pedro Escobedo"], [680, "Querétaro"], [680, "Villa Corregidora"], [681, "Amealco"], [685, "San Juan del Río"], [686, "Tequisquiapan"], [690, "Chetumal"], [691, "Cancún"], [691, "Col. Puerto Juárez"], [692, "Cozumel"], [693, "N/A"], [694, "Playa del Carmen"], [700, "San Luis Potosí"], [703, "Cerritos"], [705, "Ciudad Valles"], [709, "Matehuala"], [711, "Río Verde"], [716, "Tamuín"], [730, "Culiacán"], [735, "Concordia"], [736, "Cosala"], [737, "Choix"], [738, "El Fuerte"], [739, "Escuinapa"], [740, "Guamúchil"], [741, "Guasave"], [743, "Los Mochis"], [743, "Topolobampo"], [744, "Mazatlán"], [745, "Mocorito"], [746, "Navolato"], [760, "Hermosillo"], [761, "Agua Prieta"], [765, "Caborca"], [766, "Cananea"], [767, "Ciudad Obregón"], [767, "Esperanza"], [769, "Empalme"], [770, "Guaymas"], [770, "San Carlos"], [771, "Huatabampo"], [773, "Magdalena"], [776, "Nacozari de García"], [777, "Navojoa"], [778, "Nogales"], [779, "Puerto Peñasco"], [780, "San Luis Río Colorado"], [790, "Tamulte"], [790, "Villa Hermosa"], [792, "Cárdenas"], [793, "Ciudad Pemex"], [794, "Comalcalco"], [796, "Emiliano Zapata"], [797, "Frontera"], [798, "Huimanguillo"], [800, "Jalpa de Méndez"], [802, "Macuspana"], [803, "Nacajuca"], [804, "Paraíso"], [805, "Tacotalpa"], [806, "Teapa"], [807, "Tenosique"], [810, "Ciudad Victoria"], [811, "Altamira"], [813, "Ciudad Madero"], [813, "Tampico"], [814, "Ciudad Mante"], [818, "Matamoros"], [821, "Colombia"], [821, "Nuevo Laredo"], [822, "Reynosa"], [823, "Río Bravo"], [825, "Soto La Marina"], [826, "Valle Hermoso"], [830, "Tlaxcala"], [832, "Apizaco"], [834, "Santa Ana Chiautempan"], [840, "Jalapa"], [841, "Acayucan"], [843, "Agua Dulce"], [845, "Álamo"], [846, "Altotonga"], [848, "Banderilla"], [849, "Boca del Río"], [852, "Ciudad Mendoza"], [853, "Coatepec"], [854, "Coatzacoalcos"], [855, "Córdoba"], [856, "Cosamaloapan"], [860, "Cuitláhuac"], [863, "Fortín de las Flores"], [864, "Gutiérrez Zamora"], [865, "Huatusco"], [867, "Isla"], [868, "Ixtaczoquitlán"], [869, "Jáltipan"], [871, "Juan Rodríguez Clara"], [872, "Villa José Cardel"], [873, "Las Choapas"], [875, "Naranjos"], [876, "Martínez de la Torre"], [877, "Minatitlán"], [878, "Misantla"], [879, "Nanchital"], [882, "Orizaba"], [885, "Papantla"], [886, "Perote"], [888, "Poza Rica"], [889, "Río Blanco"], [890, "San Andrés Tuxtla"], [891, "San Rafael"], [894, "Platón Sánchez"], [894, "Tantoyuca"], [895, "Tempoal"], [898, "Tierra Blanca"], [901, "Tlapacoyan"], [903, "Túxpam de Rodríguez Cano"], [905, "Cd. Industrial Framboyan"], [905, "Veracruz"], [910, "Mérida"], [913, "Motul"], [914, "Oxkutzcab"], [915, "Progreso"], [917, "Ticul"], [918, "Tizimín"], [920, "Valladolid"], [930, "Zacatecas"], [933, "Fresnillo"], [934, "Guadalupe"], [935, "Jalpa"], [936, "Jerez de G. Salinas"], [938, "Juchipila"], [939, "Loreto"], [946, "Nochistlán"], [958, "Valparaíso"], [960, "Calera de V. Rosales"]]; Ni.reduce((s, [e, t]) => Object.assign(Object.assign({}, s), { [e]: t }), {}); const Ri = "0123456789ABCDEFGHIJKLMN&OPQRSTUVWXYZ"; Ri.split("").reduce((s, e, t) => Object.assign(Object.assign({}, s), { [e]: t }), {}); function* Ui() { for (let s = 0; s <= 41; s += 1)yield s; yield 51, yield 52 } new Set(Ui()); const dt = { AR: Vi }; function je({ document_number: s }) { return console.log("checkDocumentServerValidate 2222"), console.log(s), new Promise(e => { setTimeout(() => { let t = {}; s && s.length > 3 && window.globalConfig.testDocumentValidationResponseStatusSuccess ? (t.status = "success", t.number = String(Math.floor(Math.random() * 1e9)) + String(Math.floor(Math.random() * 1e9))) : t.status = "error", e(t) }, 1e3) }) } function Pi(s) { if (console.log("sendFinalData"), console.log(s), typeof s == "object") return new Promise(e => { setTimeout(() => { let t = {}; window.globalConfig.testFinalSendResponseStatusSuccess ? t.status = "success" : t.status = "error", e(t) }, 1e3) }) } const Hi = { fallbackCopyTextToClipboard(s) { const e = document.createElement("textarea"); e.value = s, e.style.top = "0", e.style.left = "0", e.style.position = "fixed", document.body.appendChild(e), e.focus(), e.select(); try { const t = document.execCommand("copy"); return document.body.removeChild(e), { isError: !t, err: null } } catch (t) { return { isError: !0, err: t } } }, copyTextToClipboard(s) { if (!navigator.clipboard) { this.fallbackCopyTextToClipboard(s); return } return navigator.clipboard.writeText(s).then(function () { return { isError: !1, err: null } }, function (e) { return { isError: !0, err: e } }) } }; function ji() { const s = document.querySelector(".cvu-block"); s && s.querySelector(".copy-btn").addEventListener("click", e => { const t = s.querySelector(".value").innerHTML; Hi.copyTextToClipboard(t).then(i => { console.log(i), i.isError || (s.classList.add("is-show-badge"), setTimeout(() => { s.classList.remove("is-show-badge") }, 3e3)) }) }) } function Ki({ show_thanks_page: s = !1 }) { const e = document.querySelector(".payment-wrapper-outer"), t = document.querySelector(".payment-main-container"), i = document.querySelector(".payment-content-result .close"); i && i.querySelector("a").addEventListener("click", n => { n.preventDefault(), typeof window.globalConfig.redirectUrl == "string" && window.globalConfig.redirectUrl !== "" && (s ? (t.classList.add("vertical-align-content"), e.innerHTML = Sn({ text: "Gracias por elegir", image: "./images/compass-logo.svg" }), setTimeout(() => { window.location.href = window.globalConfig.redirectUrl }, 1500)) : window.location.href = window.globalConfig.redirectUrl) }) } var Ke = function (s, e) { return Ke = Object.setPrototypeOf || { __proto__: [] } instanceof Array && function (t, i) { t.__proto__ = i } || function (t, i) { for (var n in i) Object.prototype.hasOwnProperty.call(i, n) && (t[n] = i[n]) }, Ke(s, e) }; function Kt(s, e) { if (typeof e != "function" && e !== null) throw new TypeError("Class extends value " + String(e) + " is not a constructor or null"); Ke(s, e); function t() { this.constructor = s } s.prototype = e === null ? Object.create(e) : (t.prototype = e.prototype, new t) } var O = function () { return O = Object.assign || function (e) { for (var t, i = 1, n = arguments.length; i < n; i++) { t = arguments[i]; for (var r in t) Object.prototype.hasOwnProperty.call(t, r) && (e[r] = t[r]) } return e }, O.apply(this, arguments) }; function zi(s, e, t) { for (var i = 0, n = e.length, r; i < n; i++)(r || !(i in e)) && (r || (r = Array.prototype.slice.call(e, 0, i)), r[i] = e[i]); return s.concat(r || Array.prototype.slice.call(e)) } var k = { ADD_CHOICE: "ADD_CHOICE", REMOVE_CHOICE: "REMOVE_CHOICE", FILTER_CHOICES: "FILTER_CHOICES", ACTIVATE_CHOICES: "ACTIVATE_CHOICES", CLEAR_CHOICES: "CLEAR_CHOICES", ADD_GROUP: "ADD_GROUP", ADD_ITEM: "ADD_ITEM", REMOVE_ITEM: "REMOVE_ITEM", HIGHLIGHT_ITEM: "HIGHLIGHT_ITEM" }, M = { showDropdown: "showDropdown", hideDropdown: "hideDropdown", change: "change", choice: "choice", search: "search", addItem: "addItem", removeItem: "removeItem", highlightItem: "highlightItem", highlightChoice: "highlightChoice", unhighlightItem: "unhighlightItem" }, T = { TAB_KEY: 9, SHIFT_KEY: 16, BACK_KEY: 46, DELETE_KEY: 8, ENTER_KEY: 13, A_KEY: 65, ESC_KEY: 27, UP_KEY: 38, DOWN_KEY: 40, PAGE_UP_KEY: 33, PAGE_DOWN_KEY: 34 }, $i = ["fuseOptions", "classNames"], X = { Text: "text", SelectOne: "select-one", SelectMultiple: "select-multiple" }, pt = function (s) { return { type: k.ADD_CHOICE, choice: s } }, Gi = function (s) { return { type: k.REMOVE_CHOICE, choice: s } }, qi = function (s) { return { type: k.FILTER_CHOICES, results: s } }, Yi = function (s) { return { type: k.ACTIVATE_CHOICES, active: s } }, Wi = function (s) { return { type: k.ADD_GROUP, group: s } }, ft = function (s) { return { type: k.ADD_ITEM, item: s } }, mt = function (s) { return { type: k.REMOVE_ITEM, item: s } }, _e = function (s, e) { return { type: k.HIGHLIGHT_ITEM, item: s, highlighted: e } }, Ji = function (s, e) { return Math.floor(Math.random() * (e - s) + s) }, gt = function (s) { return Array.from({ length: s }, function () { return Ji(0, 36).toString(36) }).join("") }, Zi = function (s, e) { var t = s.id || s.name && "".concat(s.name, "-").concat(gt(2)) || gt(4); return t = t.replace(/(:|\.|\[|\]|,)/g, ""), t = "".concat(e, "-").concat(t), t }, Xi = function (s, e, t) { t === void 0 && (t = 1); for (var i = "".concat(t > 0 ? "next" : "previous", "ElementSibling"), n = s[i]; n;) { if (n.matches(e)) return n; n = n[i] } return null }, Qi = function (s, e, t) { t === void 0 && (t = 1); var i; return t > 0 ? i = e.scrollTop + e.offsetHeight >= s.offsetTop + s.offsetHeight : i = s.offsetTop >= e.scrollTop, i }, we = function (s) { if (typeof s != "string") { if (s == null) return ""; if (typeof s == "object") { if ("raw" in s) return we(s.raw); if ("trusted" in s) return s.trusted } return s } return s.replace(/&/g, "&amp;").replace(/>/g, "&gt;").replace(/</g, "&lt;").replace(/'/g, "&#039;").replace(/"/g, "&quot;") }, es = (function () { var s = document.createElement("div"); return function (e) { s.innerHTML = e.trim(); for (var t = s.children[0]; s.firstChild;)s.removeChild(s.firstChild); return t } })(), fe = function (s, e) { return typeof s == "function" ? s(we(e), e) : s }, vt = function (s) { return typeof s == "function" ? s() : s }, re = function (s) { if (typeof s == "string") return s; if (typeof s == "object") { if ("trusted" in s) return s.trusted; if ("raw" in s) return s.raw } return "" }, zt = function (s) { if (typeof s == "string") return s; if (typeof s == "object") { if ("escaped" in s) return s.escaped; if ("trusted" in s) return s.trusted } return "" }, it = function (s, e) { return s ? zt(e) : we(e) }, z = function (s, e, t) { s.innerHTML = it(e, t) }, ts = function (s, e) { var t = s.value, i = s.label, n = i === void 0 ? t : i, r = e.value, a = e.label, o = a === void 0 ? r : a; return re(n).localeCompare(re(o), [], { sensitivity: "base", ignorePunctuation: !0, numeric: !0 }) }, is = function (s, e) { return s.rank - e.rank }, ss = function (s, e, t) { t === void 0 && (t = null); var i = new CustomEvent(e, { detail: t, bubbles: !0, cancelable: !0 }); return s.dispatchEvent(i) }, ns = function (s, e) { var t = Object.keys(s).sort(), i = Object.keys(e).sort(); return t.filter(function (n) { return i.indexOf(n) < 0 }) }, De = function (s) { return Array.isArray(s) ? s : [s] }, he = function (s) { return s && Array.isArray(s) ? s.map(function (e) { return ".".concat(e) }).join("") : ".".concat(s) }, E = function (s, e) { var t; (t = s.classList).add.apply(t, De(e)) }, H = function (s, e) { var t; (t = s.classList).remove.apply(t, De(e)) }, rs = function (s) { if (typeof s < "u") try { return JSON.parse(s) } catch { return s } return {} }, as = function (s, e, t) { var i = s.itemEl; i && (H(i, t), E(i, e)) }, os = (function () { function s(e) { var t = e.element, i = e.type, n = e.classNames; this.element = t, this.classNames = n, this.type = i, this.isActive = !1 } return s.prototype.show = function () { return E(this.element, this.classNames.activeState), this.element.setAttribute("aria-expanded", "true"), this.isActive = !0, this }, s.prototype.hide = function () { return H(this.element, this.classNames.activeState), this.element.setAttribute("aria-expanded", "false"), this.isActive = !1, this }, s })(), _t = (function () { function s(e) { var t = e.element, i = e.type, n = e.classNames, r = e.position; this.element = t, this.classNames = n, this.type = i, this.position = r, this.isOpen = !1, this.isFlipped = !1, this.isDisabled = !1, this.isLoading = !1 } return s.prototype.shouldFlip = function (e, t) { var i = !1; return this.position === "auto" ? i = this.element.getBoundingClientRect().top - t >= 0 && !window.matchMedia("(min-height: ".concat(e + 1, "px)")).matches : this.position === "top" && (i = !0), i }, s.prototype.setActiveDescendant = function (e) { this.element.setAttribute("aria-activedescendant", e) }, s.prototype.removeActiveDescendant = function () { this.element.removeAttribute("aria-activedescendant") }, s.prototype.open = function (e, t) { E(this.element, this.classNames.openState), this.element.setAttribute("aria-expanded", "true"), this.isOpen = !0, this.shouldFlip(e, t) && (E(this.element, this.classNames.flippedState), this.isFlipped = !0) }, s.prototype.close = function () { H(this.element, this.classNames.openState), this.element.setAttribute("aria-expanded", "false"), this.removeActiveDescendant(), this.isOpen = !1, this.isFlipped && (H(this.element, this.classNames.flippedState), this.isFlipped = !1) }, s.prototype.addFocusState = function () { E(this.element, this.classNames.focusState) }, s.prototype.removeFocusState = function () { H(this.element, this.classNames.focusState) }, s.prototype.enable = function () { H(this.element, this.classNames.disabledState), this.element.removeAttribute("aria-disabled"), this.type === X.SelectOne && this.element.setAttribute("tabindex", "0"), this.isDisabled = !1 }, s.prototype.disable = function () { E(this.element, this.classNames.disabledState), this.element.setAttribute("aria-disabled", "true"), this.type === X.SelectOne && this.element.setAttribute("tabindex", "-1"), this.isDisabled = !0 }, s.prototype.wrap = function (e) { var t = this.element, i = e.parentNode; i && (e.nextSibling ? i.insertBefore(t, e.nextSibling) : i.appendChild(t)), t.appendChild(e) }, s.prototype.unwrap = function (e) { var t = this.element, i = t.parentNode; i && (i.insertBefore(e, t), i.removeChild(t)) }, s.prototype.addLoadingState = function () { E(this.element, this.classNames.loadingState), this.element.setAttribute("aria-busy", "true"), this.isLoading = !0 }, s.prototype.removeLoadingState = function () { H(this.element, this.classNames.loadingState), this.element.removeAttribute("aria-busy"), this.isLoading = !1 }, s })(), us = (function () { function s(e) { var t = e.element, i = e.type, n = e.classNames, r = e.preventPaste; this.element = t, this.type = i, this.classNames = n, this.preventPaste = r, this.isFocussed = this.element.isEqualNode(document.activeElement), this.isDisabled = t.disabled, this._onPaste = this._onPaste.bind(this), this._onInput = this._onInput.bind(this), this._onFocus = this._onFocus.bind(this), this._onBlur = this._onBlur.bind(this) } return Object.defineProperty(s.prototype, "placeholder", { set: function (e) { this.element.placeholder = e }, enumerable: !1, configurable: !0 }), Object.defineProperty(s.prototype, "value", { get: function () { return this.element.value }, set: function (e) { this.element.value = e }, enumerable: !1, configurable: !0 }), s.prototype.addEventListeners = function () { var e = this.element; e.addEventListener("paste", this._onPaste), e.addEventListener("input", this._onInput, { passive: !0 }), e.addEventListener("focus", this._onFocus, { passive: !0 }), e.addEventListener("blur", this._onBlur, { passive: !0 }) }, s.prototype.removeEventListeners = function () { var e = this.element; e.removeEventListener("input", this._onInput), e.removeEventListener("paste", this._onPaste), e.removeEventListener("focus", this._onFocus), e.removeEventListener("blur", this._onBlur) }, s.prototype.enable = function () { var e = this.element; e.removeAttribute("disabled"), this.isDisabled = !1 }, s.prototype.disable = function () { var e = this.element; e.setAttribute("disabled", ""), this.isDisabled = !0 }, s.prototype.focus = function () { this.isFocussed || this.element.focus() }, s.prototype.blur = function () { this.isFocussed && this.element.blur() }, s.prototype.clear = function (e) { return e === void 0 && (e = !0), this.element.value = "", e && this.setWidth(), this }, s.prototype.setWidth = function () { var e = this.element; e.style.minWidth = "".concat(e.placeholder.length + 1, "ch"), e.style.width = "".concat(e.value.length + 1, "ch") }, s.prototype.setActiveDescendant = function (e) { this.element.setAttribute("aria-activedescendant", e) }, s.prototype.removeActiveDescendant = function () { this.element.removeAttribute("aria-activedescendant") }, s.prototype._onInput = function () { this.type !== X.SelectOne && this.setWidth() }, s.prototype._onPaste = function (e) { this.preventPaste && e.preventDefault() }, s.prototype._onFocus = function () { this.isFocussed = !0 }, s.prototype._onBlur = function () { this.isFocussed = !1 }, s })(), ls = 4, Ct = (function () { function s(e) { var t = e.element; this.element = t, this.scrollPos = this.element.scrollTop, this.height = this.element.offsetHeight } return s.prototype.prepend = function (e) { var t = this.element.firstElementChild; t ? this.element.insertBefore(e, t) : this.element.append(e) }, s.prototype.scrollToTop = function () { this.element.scrollTop = 0 }, s.prototype.scrollToChildElement = function (e, t) { var i = this; if (e) { var n = this.element.offsetHeight, r = this.element.scrollTop + n, a = e.offsetHeight, o = e.offsetTop + a, u = t > 0 ? this.element.scrollTop + o - r : e.offsetTop; requestAnimationFrame(function () { i._animateScroll(u, t) }) } }, s.prototype._scrollDown = function (e, t, i) { var n = (i - e) / t, r = n > 1 ? n : 1; this.element.scrollTop = e + r }, s.prototype._scrollUp = function (e, t, i) { var n = (e - i) / t, r = n > 1 ? n : 1; this.element.scrollTop = e - r }, s.prototype._animateScroll = function (e, t) { var i = this, n = ls, r = this.element.scrollTop, a = !1; t > 0 ? (this._scrollDown(r, n, e), r < e && (a = !0)) : (this._scrollUp(r, n, e), r > e && (a = !0)), a && requestAnimationFrame(function () { i._animateScroll(e, t) }) }, s })(), $t = (function () { function s(e) { var t = e.element, i = e.classNames; this.element = t, this.classNames = i, this.isDisabled = !1 } return Object.defineProperty(s.prototype, "isActive", { get: function () { return this.element.dataset.choice === "active" }, enumerable: !1, configurable: !0 }), Object.defineProperty(s.prototype, "dir", { get: function () { return this.element.dir }, enumerable: !1, configurable: !0 }), Object.defineProperty(s.prototype, "value", { get: function () { return this.element.value }, set: function (e) { this.element.setAttribute("value", e), this.element.value = e }, enumerable: !1, configurable: !0 }), s.prototype.conceal = function () { var e = this.element; E(e, this.classNames.input), e.hidden = !0, e.tabIndex = -1; var t = e.getAttribute("style"); t && e.setAttribute("data-choice-orig-style", t), e.setAttribute("data-choice", "active") }, s.prototype.reveal = function () { var e = this.element; H(e, this.classNames.input), e.hidden = !1, e.removeAttribute("tabindex"); var t = e.getAttribute("data-choice-orig-style"); t ? (e.removeAttribute("data-choice-orig-style"), e.setAttribute("style", t)) : e.removeAttribute("style"), e.removeAttribute("data-choice") }, s.prototype.enable = function () { this.element.removeAttribute("disabled"), this.element.disabled = !1, this.isDisabled = !1 }, s.prototype.disable = function () { this.element.setAttribute("disabled", ""), this.element.disabled = !0, this.isDisabled = !0 }, s.prototype.triggerEvent = function (e, t) { ss(this.element, e, t || {}) }, s })(), cs = (function (s) { Kt(e, s); function e() { return s !== null && s.apply(this, arguments) || this } return e })($t), pe = function (s, e) { return e === void 0 && (e = !0), typeof s > "u" ? e : !!s }, Gt = function (s) { if (typeof s == "string" && (s = s.split(" ").filter(function (e) { return e.length })), Array.isArray(s) && s.length) return s }, P = function (s, e, t) { if (t === void 0 && (t = !0), typeof s == "string") { var i = we(s), n = t || i === s ? s : { escaped: i, raw: s }, r = P({ value: s, label: n, selected: !0 }, !1); return r } var a = s; if ("choices" in a) { if (!e) throw new TypeError("optGroup is not allowed"); var o = a, u = o.choices.map(function (p) { return P(p, !1) }), l = { id: 0, label: re(o.label) || o.value, active: !!u.length, disabled: !!o.disabled, choices: u }; return l } var c = a, d = { id: 0, group: null, score: 0, rank: 0, value: c.value, label: c.label || c.value, active: pe(c.active), selected: pe(c.selected, !1), disabled: pe(c.disabled, !1), placeholder: pe(c.placeholder, !1), highlighted: !1, labelClass: Gt(c.labelClass), labelDescription: c.labelDescription, customProperties: c.customProperties }; return d }, hs = function (s) { return s.tagName === "INPUT" }, qt = function (s) { return s.tagName === "SELECT" }, ds = function (s) { return s.tagName === "OPTION" }, ps = function (s) { return s.tagName === "OPTGROUP" }, fs = (function (s) { Kt(e, s); function e(t) { var i = t.element, n = t.classNames, r = t.template, a = t.extractPlaceholder, o = s.call(this, { element: i, classNames: n }) || this; return o.template = r, o.extractPlaceholder = a, o } return Object.defineProperty(e.prototype, "placeholderOption", { get: function () { return this.element.querySelector('option[value=""]') || this.element.querySelector("option[placeholder]") }, enumerable: !1, configurable: !0 }), e.prototype.addOptions = function (t) { var i = this, n = document.createDocumentFragment(); t.forEach(function (r) { var a = r; if (!a.element) { var o = i.template(a); n.appendChild(o), a.element = o } }), this.element.appendChild(n) }, e.prototype.optionsAsChoices = function () { var t = this, i = []; return this.element.querySelectorAll(":scope > option, :scope > optgroup").forEach(function (n) { ds(n) ? i.push(t._optionToChoice(n)) : ps(n) && i.push(t._optgroupToChoice(n)) }), i }, e.prototype._optionToChoice = function (t) { return !t.hasAttribute("value") && t.hasAttribute("placeholder") && (t.setAttribute("value", ""), t.value = ""), { id: 0, group: null, score: 0, rank: 0, value: t.value, label: t.label, element: t, active: !0, selected: this.extractPlaceholder ? t.selected : t.hasAttribute("selected"), disabled: t.disabled, highlighted: !1, placeholder: this.extractPlaceholder && (!t.value || t.hasAttribute("placeholder")), labelClass: typeof t.dataset.labelClass < "u" ? Gt(t.dataset.labelClass) : void 0, labelDescription: typeof t.dataset.labelDescription < "u" ? t.dataset.labelDescription : void 0, customProperties: rs(t.dataset.customProperties) } }, e.prototype._optgroupToChoice = function (t) { var i = this, n = t.querySelectorAll("option"), r = Array.from(n).map(function (a) { return i._optionToChoice(a) }); return { id: 0, label: t.label || "", element: t, active: !!r.length, disabled: t.disabled, choices: r } }, e })($t), ms = { containerOuter: ["choices"], containerInner: ["choices__inner"], input: ["choices__input"], inputCloned: ["choices__input--cloned"], list: ["choices__list"], listItems: ["choices__list--multiple"], listSingle: ["choices__list--single"], listDropdown: ["choices__list--dropdown"], item: ["choices__item"], itemSelectable: ["choices__item--selectable"], itemDisabled: ["choices__item--disabled"], itemChoice: ["choices__item--choice"], description: ["choices__description"], placeholder: ["choices__placeholder"], group: ["choices__group"], groupHeading: ["choices__heading"], button: ["choices__button"], activeState: ["is-active"], focusState: ["is-focused"], openState: ["is-open"], disabledState: ["is-disabled"], highlightedState: ["is-highlighted"], selectedState: ["is-selected"], flippedState: ["is-flipped"], loadingState: ["is-loading"], notice: ["choices__notice"], addChoice: ["choices__item--selectable", "add-choice"], noResults: ["has-no-results"], noChoices: ["has-no-choices"] }, Et = { items: [], choices: [], silent: !1, renderChoiceLimit: -1, maxItemCount: -1, closeDropdownOnSelect: "auto", singleModeForMultiSelect: !1, addChoices: !1, addItems: !0, addItemFilter: function (s) { return !!s && s !== "" }, removeItems: !0, removeItemButton: !1, removeItemButtonAlignLeft: !1, editItems: !1, allowHTML: !1, allowHtmlUserInput: !1, duplicateItemsAllowed: !0, delimiter: ",", paste: !0, searchEnabled: !0, searchChoices: !0, searchFloor: 1, searchResultLimit: 4, searchFields: ["label", "value"], position: "auto", resetScrollPosition: !0, shouldSort: !0, shouldSortItems: !1, sorter: ts, shadowRoot: null, placeholder: !0, placeholderValue: null, searchPlaceholderValue: null, prependValue: null, appendValue: null, renderSelectedChoices: "auto", loadingText: "Loading...", noResultsText: "No results found", noChoicesText: "No choices to choose from", itemSelectText: "Press to select", uniqueItemText: "Only unique values can be added", customAddItemText: "Only values matching specific conditions can be added", addItemText: function (s) { return 'Press Enter to add <b>"'.concat(s, '"</b>') }, removeItemIconText: function () { return "Remove item" }, removeItemLabelText: function (s) { return "Remove item: ".concat(s) }, maxItemText: function (s) { return "Only ".concat(s, " values can be added") }, valueComparer: function (s, e) { return s === e }, fuseOptions: { includeScore: !0 }, labelId: "", callbackOnInit: null, callbackOnCreateTemplates: null, classNames: ms, appendGroupInSearch: !1 }, yt = function (s) { var e = s.itemEl; e && (e.remove(), s.itemEl = void 0) }; function gs(s, e, t) { var i = s, n = !0; switch (e.type) { case k.ADD_ITEM: { e.item.selected = !0; var r = e.item.element; r && (r.selected = !0, r.setAttribute("selected", "")), i.push(e.item); break } case k.REMOVE_ITEM: { e.item.selected = !1; var r = e.item.element; if (r) { r.selected = !1, r.removeAttribute("selected"); var a = r.parentElement; a && qt(a) && a.type === X.SelectOne && (a.value = "") } yt(e.item), i = i.filter(function (c) { return c.id !== e.item.id }); break } case k.REMOVE_CHOICE: { yt(e.choice), i = i.filter(function (l) { return l.id !== e.choice.id }); break } case k.HIGHLIGHT_ITEM: { var o = e.highlighted, u = i.find(function (l) { return l.id === e.item.id }); u && u.highlighted !== o && (u.highlighted = o, t && as(u, o ? t.classNames.highlightedState : t.classNames.selectedState, o ? t.classNames.selectedState : t.classNames.highlightedState)); break } default: { n = !1; break } }return { state: i, update: n } } function vs(s, e) { var t = s, i = !0; switch (e.type) { case k.ADD_GROUP: { t.push(e.group); break } case k.CLEAR_CHOICES: { t = []; break } default: { i = !1; break } }return { state: t, update: i } } function _s(s, e, t) { var i = s, n = !0; switch (e.type) { case k.ADD_CHOICE: { i.push(e.choice); break } case k.REMOVE_CHOICE: { e.choice.choiceEl = void 0, e.choice.group && (e.choice.group.choices = e.choice.group.choices.filter(function (a) { return a.id !== e.choice.id })), i = i.filter(function (a) { return a.id !== e.choice.id }); break } case k.ADD_ITEM: case k.REMOVE_ITEM: { e.item.choiceEl = void 0; break } case k.FILTER_CHOICES: { var r = []; e.results.forEach(function (a) { r[a.item.id] = a }), i.forEach(function (a) { var o = r[a.id]; o !== void 0 ? (a.score = o.score, a.rank = o.rank, a.active = !0) : (a.score = 0, a.rank = 0, a.active = !1), t && t.appendGroupInSearch && (a.choiceEl = void 0) }); break } case k.ACTIVATE_CHOICES: { i.forEach(function (a) { a.active = e.active, t && t.appendGroupInSearch && (a.choiceEl = void 0) }); break } case k.CLEAR_CHOICES: { i = []; break } default: { n = !1; break } }return { state: i, update: n } } var bt = { groups: vs, items: gs, choices: _s }, Cs = (function () { function s(e) { this._state = this.defaultState, this._listeners = [], this._txn = 0, this._context = e } return Object.defineProperty(s.prototype, "defaultState", { get: function () { return { groups: [], items: [], choices: [] } }, enumerable: !1, configurable: !0 }), s.prototype.changeSet = function (e) { return { groups: e, items: e, choices: e } }, s.prototype.reset = function () { this._state = this.defaultState; var e = this.changeSet(!0); this._txn ? this._changeSet = e : this._listeners.forEach(function (t) { return t(e) }) }, s.prototype.subscribe = function (e) { return this._listeners.push(e), this }, s.prototype.dispatch = function (e) { var t = this, i = this._state, n = !1, r = this._changeSet || this.changeSet(!1); Object.keys(bt).forEach(function (a) { var o = bt[a](i[a], e, t._context); o.update && (n = !0, r[a] = !0, i[a] = o.state) }), n && (this._txn ? this._changeSet = r : this._listeners.forEach(function (a) { return a(r) })) }, s.prototype.withTxn = function (e) { this._txn++; try { e() } finally { if (this._txn = Math.max(0, this._txn - 1), !this._txn) { var t = this._changeSet; t && (this._changeSet = void 0, this._listeners.forEach(function (i) { return i(t) })) } } }, Object.defineProperty(s.prototype, "state", { get: function () { return this._state }, enumerable: !1, configurable: !0 }), Object.defineProperty(s.prototype, "items", { get: function () { return this.state.items }, enumerable: !1, configurable: !0 }), Object.defineProperty(s.prototype, "highlightedActiveItems", { get: function () { return this.items.filter(function (e) { return e.active && e.highlighted }) }, enumerable: !1, configurable: !0 }), Object.defineProperty(s.prototype, "choices", { get: function () { return this.state.choices }, enumerable: !1, configurable: !0 }), Object.defineProperty(s.prototype, "activeChoices", { get: function () { return this.choices.filter(function (e) { return e.active }) }, enumerable: !1, configurable: !0 }), Object.defineProperty(s.prototype, "searchableChoices", { get: function () { return this.choices.filter(function (e) { return !e.disabled && !e.placeholder }) }, enumerable: !1, configurable: !0 }), Object.defineProperty(s.prototype, "groups", { get: function () { return this.state.groups }, enumerable: !1, configurable: !0 }), Object.defineProperty(s.prototype, "activeGroups", { get: function () { var e = this; return this.state.groups.filter(function (t) { var i = t.active && !t.disabled, n = e.state.choices.some(function (r) { return r.active && !r.disabled }); return i && n }, []) }, enumerable: !1, configurable: !0 }), s.prototype.inTxn = function () { return this._txn > 0 }, s.prototype.getChoiceById = function (e) { return this.activeChoices.find(function (t) { return t.id === e }) }, s.prototype.getGroupById = function (e) { return this.groups.find(function (t) { return t.id === e }) }, s })(), A = { noChoices: "no-choices", noResults: "no-results", addChoice: "add-choice", generic: "" }; function Es(s, e, t) { return (e = bs(e)) in s ? Object.defineProperty(s, e, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : s[e] = t, s } function St(s, e) { var t = Object.keys(s); if (Object.getOwnPropertySymbols) { var i = Object.getOwnPropertySymbols(s); e && (i = i.filter(function (n) { return Object.getOwnPropertyDescriptor(s, n).enumerable })), t.push.apply(t, i) } return t } function le(s) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e] != null ? arguments[e] : {}; e % 2 ? St(Object(t), !0).forEach(function (i) { Es(s, i, t[i]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(s, Object.getOwnPropertyDescriptors(t)) : St(Object(t)).forEach(function (i) { Object.defineProperty(s, i, Object.getOwnPropertyDescriptor(t, i)) }) } return s } function ys(s, e) { if (typeof s != "object" || !s) return s; var t = s[Symbol.toPrimitive]; if (t !== void 0) { var i = t.call(s, e); if (typeof i != "object") return i; throw new TypeError("@@toPrimitive must return a primitive value.") } return (e === "string" ? String : Number)(s) } function bs(s) { var e = ys(s, "string"); return typeof e == "symbol" ? e : e + "" } function W(s) { return Array.isArray ? Array.isArray(s) : Jt(s) === "[object Array]" } function Ss(s) { if (typeof s == "string") return s; let e = s + ""; return e == "0" && 1 / s == -1 / 0 ? "-0" : e } function ks(s) { return s == null ? "" : Ss(s) } function K(s) { return typeof s == "string" } function Yt(s) { return typeof s == "number" } function As(s) { return s === !0 || s === !1 || Fs(s) && Jt(s) == "[object Boolean]" } function Wt(s) { return typeof s == "object" } function Fs(s) { return Wt(s) && s !== null } function N(s) { return s != null } function Ne(s) { return !s.trim().length } function Jt(s) { return s == null ? s === void 0 ? "[object Undefined]" : "[object Null]" : Object.prototype.toString.call(s) } const Is = "Incorrect 'index' type", Ts = s => `Invalid value for key ${s}`, ws = s => `Pattern length exceeds max of ${s}.`, Ds = s => `Missing ${s} property in key`, xs = s => `Property 'weight' in key '${s}' must be a positive integer`, kt = Object.prototype.hasOwnProperty; class Bs { constructor(e) { this._keys = [], this._keyMap = {}; let t = 0; e.forEach(i => { let n = Zt(i); this._keys.push(n), this._keyMap[n.id] = n, t += n.weight }), this._keys.forEach(i => { i.weight /= t }) } get(e) { return this._keyMap[e] } keys() { return this._keys } toJSON() { return JSON.stringify(this._keys) } } function Zt(s) { let e = null, t = null, i = null, n = 1, r = null; if (K(s) || W(s)) i = s, e = At(s), t = ze(s); else { if (!kt.call(s, "name")) throw new Error(Ds("name")); const a = s.name; if (i = a, kt.call(s, "weight") && (n = s.weight, n <= 0)) throw new Error(xs(a)); e = At(a), t = ze(a), r = s.getFn } return { path: e, id: t, weight: n, src: i, getFn: r } } function At(s) { return W(s) ? s : s.split(".") } function ze(s) { return W(s) ? s.join(".") : s } function Ms(s, e) { let t = [], i = !1; const n = (r, a, o) => { if (N(r)) if (!a[o]) t.push(r); else { let u = a[o]; const l = r[u]; if (!N(l)) return; if (o === a.length - 1 && (K(l) || Yt(l) || As(l))) t.push(ks(l)); else if (W(l)) { i = !0; for (let c = 0, d = l.length; c < d; c += 1)n(l[c], a, o + 1) } else a.length && n(l, a, o + 1) } }; return n(s, K(e) ? e.split(".") : e, 0), i ? t : t[0] } const Os = { includeMatches: !1, findAllMatches: !1, minMatchCharLength: 1 }, Ls = { isCaseSensitive: !1, includeScore: !1, keys: [], shouldSort: !0, sortFn: (s, e) => s.score === e.score ? s.idx < e.idx ? -1 : 1 : s.score < e.score ? -1 : 1 }, Vs = { location: 0, threshold: .6, distance: 100 }, Ns = { useExtendedSearch: !1, getFn: Ms, ignoreLocation: !1, ignoreFieldNorm: !1, fieldNormWeight: 1 }; var C = le(le(le(le({}, Ls), Os), Vs), Ns); const Rs = /[^ ]+/g; function Us(s = 1, e = 3) { const t = new Map, i = Math.pow(10, e); return { get(n) { const r = n.match(Rs).length; if (t.has(r)) return t.get(r); const a = 1 / Math.pow(r, .5 * s), o = parseFloat(Math.round(a * i) / i); return t.set(r, o), o }, clear() { t.clear() } } } class st { constructor({ getFn: e = C.getFn, fieldNormWeight: t = C.fieldNormWeight } = {}) { this.norm = Us(t, 3), this.getFn = e, this.isCreated = !1, this.setIndexRecords() } setSources(e = []) { this.docs = e } setIndexRecords(e = []) { this.records = e } setKeys(e = []) { this.keys = e, this._keysMap = {}, e.forEach((t, i) => { this._keysMap[t.id] = i }) } create() { this.isCreated || !this.docs.length || (this.isCreated = !0, K(this.docs[0]) ? this.docs.forEach((e, t) => { this._addString(e, t) }) : this.docs.forEach((e, t) => { this._addObject(e, t) }), this.norm.clear()) } add(e) { const t = this.size(); K(e) ? this._addString(e, t) : this._addObject(e, t) } removeAt(e) { this.records.splice(e, 1); for (let t = e, i = this.size(); t < i; t += 1)this.records[t].i -= 1 } getValueForItemAtKeyId(e, t) { return e[this._keysMap[t]] } size() { return this.records.length } _addString(e, t) { if (!N(e) || Ne(e)) return; let i = { v: e, i: t, n: this.norm.get(e) }; this.records.push(i) } _addObject(e, t) { let i = { i: t, $: {} }; this.keys.forEach((n, r) => { let a = n.getFn ? n.getFn(e) : this.getFn(e, n.path); if (N(a)) { if (W(a)) { let o = []; const u = [{ nestedArrIndex: -1, value: a }]; for (; u.length;) { const { nestedArrIndex: l, value: c } = u.pop(); if (N(c)) if (K(c) && !Ne(c)) { let d = { v: c, i: l, n: this.norm.get(c) }; o.push(d) } else W(c) && c.forEach((d, p) => { u.push({ nestedArrIndex: p, value: d }) }) } i.$[r] = o } else if (K(a) && !Ne(a)) { let o = { v: a, n: this.norm.get(a) }; i.$[r] = o } } }), this.records.push(i) } toJSON() { return { keys: this.keys, records: this.records } } } function Xt(s, e, { getFn: t = C.getFn, fieldNormWeight: i = C.fieldNormWeight } = {}) { const n = new st({ getFn: t, fieldNormWeight: i }); return n.setKeys(s.map(Zt)), n.setSources(e), n.create(), n } function Ps(s, { getFn: e = C.getFn, fieldNormWeight: t = C.fieldNormWeight } = {}) { const { keys: i, records: n } = s, r = new st({ getFn: e, fieldNormWeight: t }); return r.setKeys(i), r.setIndexRecords(n), r } function Ce(s, { errors: e = 0, currentLocation: t = 0, expectedLocation: i = 0, distance: n = C.distance, ignoreLocation: r = C.ignoreLocation } = {}) { const a = e / s.length; if (r) return a; const o = Math.abs(i - t); return n ? a + o / n : o ? 1 : a } function Hs(s = [], e = C.minMatchCharLength) { let t = [], i = -1, n = -1, r = 0; for (let a = s.length; r < a; r += 1) { let o = s[r]; o && i === -1 ? i = r : !o && i !== -1 && (n = r - 1, n - i + 1 >= e && t.push([i, n]), i = -1) } return s[r - 1] && r - i >= e && t.push([i, r - 1]), t } const se = 32; function js(s, e, t, { location: i = C.location, distance: n = C.distance, threshold: r = C.threshold, findAllMatches: a = C.findAllMatches, minMatchCharLength: o = C.minMatchCharLength, includeMatches: u = C.includeMatches, ignoreLocation: l = C.ignoreLocation } = {}) { if (e.length > se) throw new Error(ws(se)); const c = e.length, d = s.length, p = Math.max(0, Math.min(i, d)); let v = r, f = p; const g = o > 1 || u, S = g ? Array(d) : []; let b; for (; (b = s.indexOf(e, f)) > -1;) { let R = Ce(e, { currentLocation: b, expectedLocation: p, distance: n, ignoreLocation: l }); if (v = Math.min(R, v), f = b + c, g) { let J = 0; for (; J < c;)S[b + J] = 1, J += 1 } } f = -1; let x = [], B = 1, ie = c + d; const si = 1 << c - 1; for (let R = 0; R < c; R += 1) { let J = 0, Z = ie; for (; J < Z;)Ce(e, { errors: R, currentLocation: p + Z, expectedLocation: p, distance: n, ignoreLocation: l }) <= v ? J = Z : ie = Z, Z = Math.floor((ie - J) / 2 + J); ie = Z; let ot = Math.max(1, p - Z + 1), Be = a ? d : Math.min(p + Z, d) + c, ue = Array(Be + 2); ue[Be + 1] = (1 << R) - 1; for (let U = Be; U >= ot; U -= 1) { let ve = U - 1, ut = t[s.charAt(ve)]; if (g && (S[ve] = +!!ut), ue[U] = (ue[U + 1] << 1 | 1) & ut, R && (ue[U] |= (x[U + 1] | x[U]) << 1 | 1 | x[U + 1]), ue[U] & si && (B = Ce(e, { errors: R, currentLocation: ve, expectedLocation: p, distance: n, ignoreLocation: l }), B <= v)) { if (v = B, f = ve, f <= p) break; ot = Math.max(1, 2 * p - f) } } if (Ce(e, { errors: R + 1, currentLocation: p, expectedLocation: p, distance: n, ignoreLocation: l }) > v) break; x = ue } const xe = { isMatch: f >= 0, score: Math.max(.001, B) }; if (g) { const R = Hs(S, o); R.length ? u && (xe.indices = R) : xe.isMatch = !1 } return xe } function Ks(s) { let e = {}; for (let t = 0, i = s.length; t < i; t += 1) { const n = s.charAt(t); e[n] = (e[n] || 0) | 1 << i - t - 1 } return e } class Qt { constructor(e, { location: t = C.location, threshold: i = C.threshold, distance: n = C.distance, includeMatches: r = C.includeMatches, findAllMatches: a = C.findAllMatches, minMatchCharLength: o = C.minMatchCharLength, isCaseSensitive: u = C.isCaseSensitive, ignoreLocation: l = C.ignoreLocation } = {}) { if (this.options = { location: t, threshold: i, distance: n, includeMatches: r, findAllMatches: a, minMatchCharLength: o, isCaseSensitive: u, ignoreLocation: l }, this.pattern = u ? e : e.toLowerCase(), this.chunks = [], !this.pattern.length) return; const c = (p, v) => { this.chunks.push({ pattern: p, alphabet: Ks(p), startIndex: v }) }, d = this.pattern.length; if (d > se) { let p = 0; const v = d % se, f = d - v; for (; p < f;)c(this.pattern.substr(p, se), p), p += se; if (v) { const g = d - se; c(this.pattern.substr(g), g) } } else c(this.pattern, 0) } searchIn(e) { const { isCaseSensitive: t, includeMatches: i } = this.options; if (t || (e = e.toLowerCase()), this.pattern === e) { let f = { isMatch: !0, score: 0 }; return i && (f.indices = [[0, e.length - 1]]), f } const { location: n, distance: r, threshold: a, findAllMatches: o, minMatchCharLength: u, ignoreLocation: l } = this.options; let c = [], d = 0, p = !1; this.chunks.forEach(({ pattern: f, alphabet: g, startIndex: S }) => { const { isMatch: b, score: x, indices: B } = js(e, f, g, { location: n + S, distance: r, threshold: a, findAllMatches: o, minMatchCharLength: u, includeMatches: i, ignoreLocation: l }); b && (p = !0), d += x, b && B && (c = [...c, ...B]) }); let v = { isMatch: p, score: p ? d / this.chunks.length : 1 }; return p && i && (v.indices = c), v } } class te { constructor(e) { this.pattern = e } static isMultiMatch(e) { return Ft(e, this.multiRegex) } static isSingleMatch(e) { return Ft(e, this.singleRegex) } search() { } } function Ft(s, e) { const t = s.match(e); return t ? t[1] : null } class zs extends te { constructor(e) { super(e) } static get type() { return "exact" } static get multiRegex() { return /^="(.*)"$/ } static get singleRegex() { return /^=(.*)$/ } search(e) { const t = e === this.pattern; return { isMatch: t, score: t ? 0 : 1, indices: [0, this.pattern.length - 1] } } } class $s extends te { constructor(e) { super(e) } static get type() { return "inverse-exact" } static get multiRegex() { return /^!"(.*)"$/ } static get singleRegex() { return /^!(.*)$/ } search(e) { const i = e.indexOf(this.pattern) === -1; return { isMatch: i, score: i ? 0 : 1, indices: [0, e.length - 1] } } } class Gs extends te { constructor(e) { super(e) } static get type() { return "prefix-exact" } static get multiRegex() { return /^\^"(.*)"$/ } static get singleRegex() { return /^\^(.*)$/ } search(e) { const t = e.startsWith(this.pattern); return { isMatch: t, score: t ? 0 : 1, indices: [0, this.pattern.length - 1] } } } class qs extends te { constructor(e) { super(e) } static get type() { return "inverse-prefix-exact" } static get multiRegex() { return /^!\^"(.*)"$/ } static get singleRegex() { return /^!\^(.*)$/ } search(e) { const t = !e.startsWith(this.pattern); return { isMatch: t, score: t ? 0 : 1, indices: [0, e.length - 1] } } } class Ys extends te { constructor(e) { super(e) } static get type() { return "suffix-exact" } static get multiRegex() { return /^"(.*)"\$$/ } static get singleRegex() { return /^(.*)\$$/ } search(e) { const t = e.endsWith(this.pattern); return { isMatch: t, score: t ? 0 : 1, indices: [e.length - this.pattern.length, e.length - 1] } } } class Ws extends te { constructor(e) { super(e) } static get type() { return "inverse-suffix-exact" } static get multiRegex() { return /^!"(.*)"\$$/ } static get singleRegex() { return /^!(.*)\$$/ } search(e) { const t = !e.endsWith(this.pattern); return { isMatch: t, score: t ? 0 : 1, indices: [0, e.length - 1] } } } class ei extends te { constructor(e, { location: t = C.location, threshold: i = C.threshold, distance: n = C.distance, includeMatches: r = C.includeMatches, findAllMatches: a = C.findAllMatches, minMatchCharLength: o = C.minMatchCharLength, isCaseSensitive: u = C.isCaseSensitive, ignoreLocation: l = C.ignoreLocation } = {}) { super(e), this._bitapSearch = new Qt(e, { location: t, threshold: i, distance: n, includeMatches: r, findAllMatches: a, minMatchCharLength: o, isCaseSensitive: u, ignoreLocation: l }) } static get type() { return "fuzzy" } static get multiRegex() { return /^"(.*)"$/ } static get singleRegex() { return /^(.*)$/ } search(e) { return this._bitapSearch.searchIn(e) } } class ti extends te { constructor(e) { super(e) } static get type() { return "include" } static get multiRegex() { return /^'"(.*)"$/ } static get singleRegex() { return /^'(.*)$/ } search(e) { let t = 0, i; const n = [], r = this.pattern.length; for (; (i = e.indexOf(this.pattern, t)) > -1;)t = i + r, n.push([i, t - 1]); const a = !!n.length; return { isMatch: a, score: a ? 0 : 1, indices: n } } } const $e = [zs, ti, Gs, qs, Ws, Ys, $s, ei], It = $e.length, Js = / +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/, Zs = "|"; function Xs(s, e = {}) { return s.split(Zs).map(t => { let i = t.trim().split(Js).filter(r => r && !!r.trim()), n = []; for (let r = 0, a = i.length; r < a; r += 1) { const o = i[r]; let u = !1, l = -1; for (; !u && ++l < It;) { const c = $e[l]; let d = c.isMultiMatch(o); d && (n.push(new c(d, e)), u = !0) } if (!u) for (l = -1; ++l < It;) { const c = $e[l]; let d = c.isSingleMatch(o); if (d) { n.push(new c(d, e)); break } } } return n }) } const Qs = new Set([ei.type, ti.type]); class en { constructor(e, { isCaseSensitive: t = C.isCaseSensitive, includeMatches: i = C.includeMatches, minMatchCharLength: n = C.minMatchCharLength, ignoreLocation: r = C.ignoreLocation, findAllMatches: a = C.findAllMatches, location: o = C.location, threshold: u = C.threshold, distance: l = C.distance } = {}) { this.query = null, this.options = { isCaseSensitive: t, includeMatches: i, minMatchCharLength: n, findAllMatches: a, ignoreLocation: r, location: o, threshold: u, distance: l }, this.pattern = t ? e : e.toLowerCase(), this.query = Xs(this.pattern, this.options) } static condition(e, t) { return t.useExtendedSearch } searchIn(e) { const t = this.query; if (!t) return { isMatch: !1, score: 1 }; const { includeMatches: i, isCaseSensitive: n } = this.options; e = n ? e : e.toLowerCase(); let r = 0, a = [], o = 0; for (let u = 0, l = t.length; u < l; u += 1) { const c = t[u]; a.length = 0, r = 0; for (let d = 0, p = c.length; d < p; d += 1) { const v = c[d], { isMatch: f, indices: g, score: S } = v.search(e); if (f) { if (r += 1, o += S, i) { const b = v.constructor.type; Qs.has(b) ? a = [...a, ...g] : a.push(g) } } else { o = 0, r = 0, a.length = 0; break } } if (r) { let d = { isMatch: !0, score: o / r }; return i && (d.indices = a), d } } return { isMatch: !1, score: 1 } } } const Ge = []; function tn(...s) { Ge.push(...s) } function qe(s, e) { for (let t = 0, i = Ge.length; t < i; t += 1) { let n = Ge[t]; if (n.condition(s, e)) return new n(s, e) } return new Qt(s, e) } const Se = { AND: "$and", OR: "$or" }, Ye = { PATH: "$path", PATTERN: "$val" }, We = s => !!(s[Se.AND] || s[Se.OR]), sn = s => !!s[Ye.PATH], nn = s => !W(s) && Wt(s) && !We(s), Tt = s => ({ [Se.AND]: Object.keys(s).map(e => ({ [e]: s[e] })) }); function ii(s, e, { auto: t = !0 } = {}) { const i = n => { let r = Object.keys(n); const a = sn(n); if (!a && r.length > 1 && !We(n)) return i(Tt(n)); if (nn(n)) { const u = a ? n[Ye.PATH] : r[0], l = a ? n[Ye.PATTERN] : n[u]; if (!K(l)) throw new Error(Ts(u)); const c = { keyId: ze(u), pattern: l }; return t && (c.searcher = qe(l, e)), c } let o = { children: [], operator: r[0] }; return r.forEach(u => { const l = n[u]; W(l) && l.forEach(c => { o.children.push(i(c)) }) }), o }; return We(s) || (s = Tt(s)), i(s) } function rn(s, { ignoreFieldNorm: e = C.ignoreFieldNorm }) { s.forEach(t => { let i = 1; t.matches.forEach(({ key: n, norm: r, score: a }) => { const o = n ? n.weight : null; i *= Math.pow(a === 0 && o ? Number.EPSILON : a, (o || 1) * (e ? 1 : r)) }), t.score = i }) } function an(s, e) { const t = s.matches; e.matches = [], N(t) && t.forEach(i => { if (!N(i.indices) || !i.indices.length) return; const { indices: n, value: r } = i; let a = { indices: n, value: r }; i.key && (a.key = i.key.src), i.idx > -1 && (a.refIndex = i.idx), e.matches.push(a) }) } function on(s, e) { e.score = s.score } function un(s, e, { includeMatches: t = C.includeMatches, includeScore: i = C.includeScore } = {}) { const n = []; return t && n.push(an), i && n.push(on), s.map(r => { const { idx: a } = r, o = { item: e[a], refIndex: a }; return n.length && n.forEach(u => { u(r, o) }), o }) } class ce { constructor(e, t = {}, i) { this.options = le(le({}, C), t), this.options.useExtendedSearch, this._keyStore = new Bs(this.options.keys), this.setCollection(e, i) } setCollection(e, t) { if (this._docs = e, t && !(t instanceof st)) throw new Error(Is); this._myIndex = t || Xt(this.options.keys, this._docs, { getFn: this.options.getFn, fieldNormWeight: this.options.fieldNormWeight }) } add(e) { N(e) && (this._docs.push(e), this._myIndex.add(e)) } remove(e = () => !1) { const t = []; for (let i = 0, n = this._docs.length; i < n; i += 1) { const r = this._docs[i]; e(r, i) && (this.removeAt(i), i -= 1, n -= 1, t.push(r)) } return t } removeAt(e) { this._docs.splice(e, 1), this._myIndex.removeAt(e) } getIndex() { return this._myIndex } search(e, { limit: t = -1 } = {}) { const { includeMatches: i, includeScore: n, shouldSort: r, sortFn: a, ignoreFieldNorm: o } = this.options; let u = K(e) ? K(this._docs[0]) ? this._searchStringList(e) : this._searchObjectList(e) : this._searchLogical(e); return rn(u, { ignoreFieldNorm: o }), r && u.sort(a), Yt(t) && t > -1 && (u = u.slice(0, t)), un(u, this._docs, { includeMatches: i, includeScore: n }) } _searchStringList(e) { const t = qe(e, this.options), { records: i } = this._myIndex, n = []; return i.forEach(({ v: r, i: a, n: o }) => { if (!N(r)) return; const { isMatch: u, score: l, indices: c } = t.searchIn(r); u && n.push({ item: r, idx: a, matches: [{ score: l, value: r, norm: o, indices: c }] }) }), n } _searchLogical(e) { const t = ii(e, this.options), i = (o, u, l) => { if (!o.children) { const { keyId: d, searcher: p } = o, v = this._findMatches({ key: this._keyStore.get(d), value: this._myIndex.getValueForItemAtKeyId(u, d), searcher: p }); return v && v.length ? [{ idx: l, item: u, matches: v }] : [] } const c = []; for (let d = 0, p = o.children.length; d < p; d += 1) { const v = o.children[d], f = i(v, u, l); if (f.length) c.push(...f); else if (o.operator === Se.AND) return [] } return c }, n = this._myIndex.records, r = {}, a = []; return n.forEach(({ $: o, i: u }) => { if (N(o)) { let l = i(t, o, u); l.length && (r[u] || (r[u] = { idx: u, item: o, matches: [] }, a.push(r[u])), l.forEach(({ matches: c }) => { r[u].matches.push(...c) })) } }), a } _searchObjectList(e) { const t = qe(e, this.options), { keys: i, records: n } = this._myIndex, r = []; return n.forEach(({ $: a, i: o }) => { if (!N(a)) return; let u = []; i.forEach((l, c) => { u.push(...this._findMatches({ key: l, value: a[c], searcher: t })) }), u.length && r.push({ idx: o, item: a, matches: u }) }), r } _findMatches({ key: e, value: t, searcher: i }) { if (!N(t)) return []; let n = []; if (W(t)) t.forEach(({ v: r, i: a, n: o }) => { if (!N(r)) return; const { isMatch: u, score: l, indices: c } = i.searchIn(r); u && n.push({ score: l, key: e, value: r, idx: a, norm: o, indices: c }) }); else { const { v: r, n: a } = t, { isMatch: o, score: u, indices: l } = i.searchIn(r); o && n.push({ score: u, key: e, value: r, norm: a, indices: l }) } return n } } ce.version = "7.0.0"; ce.createIndex = Xt; ce.parseIndex = Ps; ce.config = C; ce.parseQuery = ii; tn(en); var ln = (function () { function s(e) { this._haystack = [], this._fuseOptions = O(O({}, e.fuseOptions), { keys: zi([], e.searchFields), includeMatches: !0 }) } return s.prototype.index = function (e) { this._haystack = e, this._fuse && this._fuse.setCollection(e) }, s.prototype.reset = function () { this._haystack = [], this._fuse = void 0 }, s.prototype.isEmptyIndex = function () { return !this._haystack.length }, s.prototype.search = function (e) { this._fuse || (this._fuse = new ce(this._haystack, this._fuseOptions)); var t = this._fuse.search(e); return t.map(function (i, n) { return { item: i.item, score: i.score || 0, rank: n + 1 } }) }, s })(); function cn(s) { return new ln(s) } var hn = function (s) { for (var e in s) if (Object.prototype.hasOwnProperty.call(s, e)) return !1; return !0 }, Re = function (s, e, t) { var i = s.dataset, n = e.customProperties, r = e.labelClass, a = e.labelDescription; r && (i.labelClass = De(r).join(" ")), a && (i.labelDescription = a), t && n && (typeof n == "string" ? i.customProperties = n : typeof n == "object" && !hn(n) && (i.customProperties = JSON.stringify(n))) }, wt = function (s, e, t) { var i = e && s.querySelector("label[for='".concat(e, "']")), n = i && i.innerText; n && t.setAttribute("aria-label", n) }, dn = { containerOuter: function (s, e, t, i, n, r, a) { var o = s.classNames.containerOuter, u = document.createElement("div"); return E(u, o), u.dataset.type = r, e && (u.dir = e), i && (u.tabIndex = 0), t && (u.setAttribute("role", n ? "combobox" : "listbox"), n ? u.setAttribute("aria-autocomplete", "list") : a || wt(this._docRoot, this.passedElement.element.id, u), u.setAttribute("aria-haspopup", "true"), u.setAttribute("aria-expanded", "false")), a && u.setAttribute("aria-labelledby", a), u }, containerInner: function (s) { var e = s.classNames.containerInner, t = document.createElement("div"); return E(t, e), t }, itemList: function (s, e) { var t = s.searchEnabled, i = s.classNames, n = i.list, r = i.listSingle, a = i.listItems, o = document.createElement("div"); return E(o, n), E(o, e ? r : a), this._isSelectElement && t && o.setAttribute("role", "listbox"), o }, placeholder: function (s, e) { var t = s.allowHTML, i = s.classNames.placeholder, n = document.createElement("div"); return E(n, i), z(n, t, e), n }, item: function (s, e, t) { var i = s.allowHTML, n = s.removeItemButtonAlignLeft, r = s.removeItemIconText, a = s.removeItemLabelText, o = s.classNames, u = o.item, l = o.button, c = o.highlightedState, d = o.itemSelectable, p = o.placeholder, v = re(e.value), f = document.createElement("div"); if (E(f, u), e.labelClass) { var g = document.createElement("span"); z(g, i, e.label), E(g, e.labelClass), f.appendChild(g) } else z(f, i, e.label); if (f.dataset.item = "", f.dataset.id = e.id, f.dataset.value = v, Re(f, e, !0), (e.disabled || this.containerOuter.isDisabled) && f.setAttribute("aria-disabled", "true"), this._isSelectElement && (f.setAttribute("aria-selected", "true"), f.setAttribute("role", "option")), e.placeholder && (E(f, p), f.dataset.placeholder = ""), E(f, e.highlighted ? c : d), t) { e.disabled && H(f, d), f.dataset.deletable = ""; var S = document.createElement("button"); S.type = "button", E(S, l), z(S, !0, fe(r, e.value)); var b = fe(a, e.value); b && S.setAttribute("aria-label", b), S.dataset.button = "", n ? f.insertAdjacentElement("afterbegin", S) : f.appendChild(S) } return f }, choiceList: function (s, e) { var t = s.classNames.list, i = document.createElement("div"); return E(i, t), e || i.setAttribute("aria-multiselectable", "true"), i.setAttribute("role", "listbox"), i }, choiceGroup: function (s, e) { var t = s.allowHTML, i = s.classNames, n = i.group, r = i.groupHeading, a = i.itemDisabled, o = e.id, u = e.label, l = e.disabled, c = re(u), d = document.createElement("div"); E(d, n), l && E(d, a), d.setAttribute("role", "group"), d.dataset.group = "", d.dataset.id = o, d.dataset.value = c, l && d.setAttribute("aria-disabled", "true"); var p = document.createElement("div"); return E(p, r), z(p, t, u || ""), d.appendChild(p), d }, choice: function (s, e, t, i) { var n = s.allowHTML, r = s.classNames, a = r.item, o = r.itemChoice, u = r.itemSelectable, l = r.selectedState, c = r.itemDisabled, d = r.description, p = r.placeholder, v = e.label, f = re(e.value), g = document.createElement("div"); g.id = e.elementId, E(g, a), E(g, o), i && typeof v == "string" && (v = it(n, v), v += " (".concat(i, ")"), v = { trusted: v }); var S = g; if (e.labelClass) { var b = document.createElement("span"); z(b, n, v), E(b, e.labelClass), S = b, g.appendChild(b) } else z(g, n, v); if (e.labelDescription) { var x = "".concat(e.elementId, "-description"); S.setAttribute("aria-describedby", x); var B = document.createElement("span"); z(B, n, e.labelDescription), B.id = x, E(B, d), g.appendChild(B) } return e.selected && E(g, l), e.placeholder && E(g, p), g.setAttribute("role", e.group ? "treeitem" : "option"), g.dataset.choice = "", g.dataset.id = e.id, g.dataset.value = f, t && (g.dataset.selectText = t), e.group && (g.dataset.groupId = "".concat(e.group.id)), Re(g, e, !1), e.disabled ? (E(g, c), g.dataset.choiceDisabled = "", g.setAttribute("aria-disabled", "true")) : (E(g, u), g.dataset.choiceSelectable = ""), g }, input: function (s, e) { var t = s.classNames, i = t.input, n = t.inputCloned, r = s.labelId, a = document.createElement("input"); return a.type = "search", E(a, i), E(a, n), a.autocomplete = "off", a.autocapitalize = "off", a.spellcheck = !1, a.setAttribute("aria-autocomplete", "list"), e ? a.setAttribute("aria-label", e) : r || wt(this._docRoot, this.passedElement.element.id, a), a }, dropdown: function (s) { var e = s.classNames, t = e.list, i = e.listDropdown, n = document.createElement("div"); return E(n, t), E(n, i), n.setAttribute("aria-expanded", "false"), n }, notice: function (s, e, t) { var i = s.classNames, n = i.item, r = i.itemChoice, a = i.addChoice, o = i.noResults, u = i.noChoices, l = i.notice; t === void 0 && (t = A.generic); var c = document.createElement("div"); switch (z(c, !0, e), E(c, n), E(c, r), E(c, l), t) { case A.addChoice: E(c, a); break; case A.noResults: E(c, o); break; case A.noChoices: E(c, u); break }return t === A.addChoice && (c.dataset.choiceSelectable = "", c.dataset.choice = ""), c }, option: function (s) { var e = re(s.label), t = new Option(e, s.value, !1, s.selected); return Re(t, s, !0), t.disabled = s.disabled, s.selected && t.setAttribute("selected", ""), t } }, pn = "-ms-scroll-limit" in document.documentElement.style && "-ms-ime-align" in document.documentElement.style, fn = {}, Ue = function (s) { if (s) return s.dataset.id ? parseInt(s.dataset.id, 10) : void 0 }, de = "[data-choice-selectable]", mn = (function () { function s(e, t) { e === void 0 && (e = "[data-choice]"), t === void 0 && (t = {}); var i = this; this.initialisedOK = void 0, this._hasNonChoicePlaceholder = !1, this._lastAddedChoiceId = 0, this._lastAddedGroupId = 0; var n = s.defaults; this.config = O(O(O({}, n.allOptions), n.options), t), $i.forEach(function (b) { i.config[b] = O(O(O({}, n.allOptions[b]), n.options[b]), t[b]) }); var r = this.config; r.silent || this._validateConfig(); var a = r.shadowRoot || document.documentElement; this._docRoot = a; var o = typeof e == "string" ? a.querySelector(e) : e; if (!o || typeof o != "object" || !(hs(o) || qt(o))) throw TypeError(!o && typeof e == "string" ? "Selector ".concat(e, " failed to find an element") : "Expected one of the following types text|select-one|select-multiple"); var u = o.type, l = u === X.Text; (l || r.maxItemCount !== 1) && (r.singleModeForMultiSelect = !1), r.singleModeForMultiSelect && (u = X.SelectMultiple); var c = u === X.SelectOne, d = u === X.SelectMultiple, p = c || d; if (this._elementType = u, this._isTextElement = l, this._isSelectOneElement = c, this._isSelectMultipleElement = d, this._isSelectElement = c || d, this._canAddUserChoices = l && r.addItems || p && r.addChoices, typeof r.renderSelectedChoices != "boolean" && (r.renderSelectedChoices = r.renderSelectedChoices === "always" || c), r.closeDropdownOnSelect === "auto" ? r.closeDropdownOnSelect = l || c || r.singleModeForMultiSelect : r.closeDropdownOnSelect = pe(r.closeDropdownOnSelect), r.placeholder && (r.placeholderValue ? this._hasNonChoicePlaceholder = !0 : o.dataset.placeholder && (this._hasNonChoicePlaceholder = !0, r.placeholderValue = o.dataset.placeholder)), t.addItemFilter && typeof t.addItemFilter != "function") { var v = t.addItemFilter instanceof RegExp ? t.addItemFilter : new RegExp(t.addItemFilter); r.addItemFilter = v.test.bind(v) } if (this._isTextElement) this.passedElement = new cs({ element: o, classNames: r.classNames }); else { var f = o; this.passedElement = new fs({ element: f, classNames: r.classNames, template: function (b) { return i._templates.option(b) }, extractPlaceholder: r.placeholder && !this._hasNonChoicePlaceholder }) } if (this.initialised = !1, this._store = new Cs(r), this._currentValue = "", r.searchEnabled = !l && r.searchEnabled || d, this._canSearch = r.searchEnabled, this._isScrollingOnIe = !1, this._highlightPosition = 0, this._wasTap = !0, this._placeholderValue = this._generatePlaceholderValue(), this._baseId = Zi(o, "choices-"), this._direction = o.dir, !this._direction) { var g = window.getComputedStyle(o).direction, S = window.getComputedStyle(document.documentElement).direction; g !== S && (this._direction = g) } if (this._idNames = { itemChoice: "item-choice" }, this._templates = n.templates, this._render = this._render.bind(this), this._onFocus = this._onFocus.bind(this), this._onBlur = this._onBlur.bind(this), this._onKeyUp = this._onKeyUp.bind(this), this._onKeyDown = this._onKeyDown.bind(this), this._onInput = this._onInput.bind(this), this._onClick = this._onClick.bind(this), this._onTouchMove = this._onTouchMove.bind(this), this._onTouchEnd = this._onTouchEnd.bind(this), this._onMouseDown = this._onMouseDown.bind(this), this._onMouseOver = this._onMouseOver.bind(this), this._onFormReset = this._onFormReset.bind(this), this._onSelectKey = this._onSelectKey.bind(this), this._onEnterKey = this._onEnterKey.bind(this), this._onEscapeKey = this._onEscapeKey.bind(this), this._onDirectionKey = this._onDirectionKey.bind(this), this._onDeleteKey = this._onDeleteKey.bind(this), this.passedElement.isActive) { r.silent || console.warn("Trying to initialise Choices on element already initialised", { element: e }), this.initialised = !0, this.initialisedOK = !1; return } this.init(), this._initialItems = this._store.items.map(function (b) { return b.value }) } return Object.defineProperty(s, "defaults", { get: function () { return Object.preventExtensions({ get options() { return fn }, get allOptions() { return Et }, get templates() { return dn } }) }, enumerable: !1, configurable: !0 }), s.prototype.init = function () { if (!(this.initialised || this.initialisedOK !== void 0)) { this._searcher = cn(this.config), this._loadChoices(), this._createTemplates(), this._createElements(), this._createStructure(), this._isTextElement && !this.config.addItems || this.passedElement.element.hasAttribute("disabled") || this.passedElement.element.closest("fieldset:disabled") ? this.disable() : (this.enable(), this._addEventListeners()), this._initStore(), this.initialised = !0, this.initialisedOK = !0; var e = this.config.callbackOnInit; typeof e == "function" && e.call(this) } }, s.prototype.destroy = function () { this.initialised && (this._removeEventListeners(), this.passedElement.reveal(), this.containerOuter.unwrap(this.passedElement.element), this._store._listeners = [], this.clearStore(!1), this._stopSearch(), this._templates = s.defaults.templates, this.initialised = !1, this.initialisedOK = void 0) }, s.prototype.enable = function () { return this.passedElement.isDisabled && this.passedElement.enable(), this.containerOuter.isDisabled && (this._addEventListeners(), this.input.enable(), this.containerOuter.enable()), this }, s.prototype.disable = function () { return this.passedElement.isDisabled || this.passedElement.disable(), this.containerOuter.isDisabled || (this._removeEventListeners(), this.input.disable(), this.containerOuter.disable()), this }, s.prototype.highlightItem = function (e, t) { if (t === void 0 && (t = !0), !e || !e.id) return this; var i = this._store.items.find(function (n) { return n.id === e.id }); return !i || i.highlighted ? this : (this._store.dispatch(_e(i, !0)), t && this.passedElement.triggerEvent(M.highlightItem, this._getChoiceForOutput(i)), this) }, s.prototype.unhighlightItem = function (e, t) { if (t === void 0 && (t = !0), !e || !e.id) return this; var i = this._store.items.find(function (n) { return n.id === e.id }); return !i || !i.highlighted ? this : (this._store.dispatch(_e(i, !1)), t && this.passedElement.triggerEvent(M.unhighlightItem, this._getChoiceForOutput(i)), this) }, s.prototype.highlightAll = function () { var e = this; return this._store.withTxn(function () { e._store.items.forEach(function (t) { t.highlighted || (e._store.dispatch(_e(t, !0)), e.passedElement.triggerEvent(M.highlightItem, e._getChoiceForOutput(t))) }) }), this }, s.prototype.unhighlightAll = function () { var e = this; return this._store.withTxn(function () { e._store.items.forEach(function (t) { t.highlighted && (e._store.dispatch(_e(t, !1)), e.passedElement.triggerEvent(M.highlightItem, e._getChoiceForOutput(t))) }) }), this }, s.prototype.removeActiveItemsByValue = function (e) { var t = this; return this._store.withTxn(function () { t._store.items.filter(function (i) { return i.value === e }).forEach(function (i) { return t._removeItem(i) }) }), this }, s.prototype.removeActiveItems = function (e) { var t = this; return this._store.withTxn(function () { t._store.items.filter(function (i) { var n = i.id; return n !== e }).forEach(function (i) { return t._removeItem(i) }) }), this }, s.prototype.removeHighlightedItems = function (e) { var t = this; return e === void 0 && (e = !1), this._store.withTxn(function () { t._store.highlightedActiveItems.forEach(function (i) { t._removeItem(i), e && t._triggerChange(i.value) }) }), this }, s.prototype.showDropdown = function (e) { var t = this; return this.dropdown.isActive ? this : (e === void 0 && (e = !this._canSearch), requestAnimationFrame(function () { t.dropdown.show(); var i = t.dropdown.element.getBoundingClientRect(); t.containerOuter.open(i.bottom, i.height), e || t.input.focus(), t.passedElement.triggerEvent(M.showDropdown) }), this) }, s.prototype.hideDropdown = function (e) { var t = this; return this.dropdown.isActive ? (requestAnimationFrame(function () { t.dropdown.hide(), t.containerOuter.close(), !e && t._canSearch && (t.input.removeActiveDescendant(), t.input.blur()), t.passedElement.triggerEvent(M.hideDropdown) }), this) : this }, s.prototype.getValue = function (e) { var t = this, i = this._store.items.map(function (n) { return e ? n.value : t._getChoiceForOutput(n) }); return this._isSelectOneElement || this.config.singleModeForMultiSelect ? i[0] : i }, s.prototype.setValue = function (e) { var t = this; return this.initialisedOK ? (this._store.withTxn(function () { e.forEach(function (i) { i && t._addChoice(P(i, !1)) }) }), this._searcher.reset(), this) : (this._warnChoicesInitFailed("setValue"), this) }, s.prototype.setChoiceByValue = function (e) { var t = this; return this.initialisedOK ? this._isTextElement ? this : (this._store.withTxn(function () { var i = Array.isArray(e) ? e : [e]; i.forEach(function (n) { return t._findAndSelectChoiceByValue(n) }), t.unhighlightAll() }), this._searcher.reset(), this) : (this._warnChoicesInitFailed("setChoiceByValue"), this) }, s.prototype.setChoices = function (e, t, i, n, r, a) { var o = this; if (e === void 0 && (e = []), t === void 0 && (t = "value"), i === void 0 && (i = "label"), n === void 0 && (n = !1), r === void 0 && (r = !0), a === void 0 && (a = !1), !this.initialisedOK) return this._warnChoicesInitFailed("setChoices"), this; if (!this._isSelectElement) throw new TypeError("setChoices can't be used with INPUT based Choices"); if (typeof t != "string" || !t) throw new TypeError("value parameter must be a name of 'value' field in passed objects"); if (typeof e == "function") { var u = e(this); if (typeof Promise == "function" && u instanceof Promise) return new Promise(function (l) { return requestAnimationFrame(l) }).then(function () { return o._handleLoadingState(!0) }).then(function () { return u }).then(function (l) { return o.setChoices(l, t, i, n, r, a) }).catch(function (l) { o.config.silent || console.error(l) }).then(function () { return o._handleLoadingState(!1) }).then(function () { return o }); if (!Array.isArray(u)) throw new TypeError(".setChoices first argument function must return either array of choices or Promise, got: ".concat(typeof u)); return this.setChoices(u, t, i, !1) } if (!Array.isArray(e)) throw new TypeError(".setChoices must be called either with array of choices with a function resulting into Promise of array of choices"); return this.containerOuter.removeLoadingState(), this._store.withTxn(function () { r && (o._isSearching = !1), n && o.clearChoices(!0, a); var l = t === "value", c = i === "label"; e.forEach(function (d) { if ("choices" in d) { var p = d; c || (p = O(O({}, p), { label: p[i] })), o._addGroup(P(p, !0)) } else { var v = d; (!c || !l) && (v = O(O({}, v), { value: v[t], label: v[i] })); var f = P(v, !1); o._addChoice(f), f.placeholder && !o._hasNonChoicePlaceholder && (o._placeholderValue = zt(f.label)) } }), o.unhighlightAll() }), this._searcher.reset(), this }, s.prototype.refresh = function (e, t, i) { var n = this; return e === void 0 && (e = !1), t === void 0 && (t = !1), i === void 0 && (i = !1), this._isSelectElement ? (this._store.withTxn(function () { var r = n.passedElement.optionsAsChoices(), a = {}; i || n._store.items.forEach(function (u) { u.id && u.active && u.selected && (a[u.value] = !0) }), n.clearStore(!1); var o = function (u) { i ? n._store.dispatch(mt(u)) : a[u.value] && (u.selected = !0) }; r.forEach(function (u) { if ("choices" in u) { u.choices.forEach(o); return } o(u) }), n._addPredefinedChoices(r, t, e), n._isSearching && n._searchChoices(n.input.value) }), this) : (this.config.silent || console.warn("refresh method can only be used on choices backed by a <select> element"), this) }, s.prototype.removeChoice = function (e) { var t = this._store.choices.find(function (i) { return i.value === e }); return t ? (this._clearNotice(), this._store.dispatch(Gi(t)), this._searcher.reset(), t.selected && this.passedElement.triggerEvent(M.removeItem, this._getChoiceForOutput(t)), this) : this }, s.prototype.clearChoices = function (e, t) { var i = this; return e === void 0 && (e = !0), t === void 0 && (t = !1), e && (t ? this.passedElement.element.replaceChildren("") : this.passedElement.element.querySelectorAll(":not([selected])").forEach(function (n) { n.remove() })), this.itemList.element.replaceChildren(""), this.choiceList.element.replaceChildren(""), this._clearNotice(), this._store.withTxn(function () { var n = t ? [] : i._store.items; i._store.reset(), n.forEach(function (r) { i._store.dispatch(pt(r)), i._store.dispatch(ft(r)) }) }), this._searcher.reset(), this }, s.prototype.clearStore = function (e) { return e === void 0 && (e = !0), this.clearChoices(e, !0), this._stopSearch(), this._lastAddedChoiceId = 0, this._lastAddedGroupId = 0, this }, s.prototype.clearInput = function () { var e = !this._isSelectOneElement; return this.input.clear(e), this._stopSearch(), this }, s.prototype._validateConfig = function () { var e = this.config, t = ns(e, Et); t.length && console.warn("Unknown config option(s) passed", t.join(", ")), e.allowHTML && e.allowHtmlUserInput && (e.addItems && console.warn("Warning: allowHTML/allowHtmlUserInput/addItems all being true is strongly not recommended and may lead to XSS attacks"), e.addChoices && console.warn("Warning: allowHTML/allowHtmlUserInput/addChoices all being true is strongly not recommended and may lead to XSS attacks")) }, s.prototype._render = function (e) { e === void 0 && (e = { choices: !0, groups: !0, items: !0 }), !this._store.inTxn() && (this._isSelectElement && (e.choices || e.groups) && this._renderChoices(), e.items && this._renderItems()) }, s.prototype._renderChoices = function () { var e = this; if (this._canAddItems()) { var t = this, i = t.config, n = t._isSearching, r = this._store, a = r.activeGroups, o = r.activeChoices, u = 0; if (n && i.searchResultLimit > 0 ? u = i.searchResultLimit : i.renderChoiceLimit > 0 && (u = i.renderChoiceLimit), this._isSelectElement) { var l = o.filter(function (f) { return !f.element }); l.length && this.passedElement.addOptions(l) } var c = document.createDocumentFragment(), d = function (f) { return f.filter(function (g) { return !g.placeholder && (n ? !!g.rank : i.renderSelectedChoices || !g.selected) }) }, p = !1, v = function (f, g, S) { n ? f.sort(is) : i.shouldSort && f.sort(i.sorter); var b = f.length; b = !g && u && b > u ? u : b, b--, f.every(function (x, B) { var ie = x.choiceEl || e._templates.choice(i, x, i.itemSelectText, S); return x.choiceEl = ie, c.appendChild(ie), (n || !x.selected) && (p = !0), B < b }) }; o.length && (i.resetScrollPosition && requestAnimationFrame(function () { return e.choiceList.scrollToTop() }), !this._hasNonChoicePlaceholder && !n && this._isSelectOneElement && v(o.filter(function (f) { return f.placeholder && !f.group }), !1, void 0), a.length && !n ? (i.shouldSort && a.sort(i.sorter), v(o.filter(function (f) { return !f.placeholder && !f.group }), !1, void 0), a.forEach(function (f) { var g = d(f.choices); if (g.length) { if (f.label) { var S = f.groupEl || e._templates.choiceGroup(e.config, f); f.groupEl = S, S.remove(), c.appendChild(S) } v(g, !0, i.appendGroupInSearch && n ? f.label : void 0) } })) : v(d(o), !1, void 0)), !p && (n || !c.children.length || !i.renderSelectedChoices) && (this._notice || (this._notice = { text: vt(n ? i.noResultsText : i.noChoicesText), type: n ? A.noResults : A.noChoices }), c.replaceChildren("")), this._renderNotice(c), this.choiceList.element.replaceChildren(c), p && this._highlightChoice() } }, s.prototype._renderItems = function () { var e = this, t = this._store.items || [], i = this.itemList.element, n = this.config, r = document.createDocumentFragment(), a = function (d) { return i.querySelector('[data-item][data-id="'.concat(d.id, '"]')) }, o = function (d) { var p = d.itemEl; p && p.parentElement || (p = a(d) || e._templates.item(n, d, n.removeItemButton), d.itemEl = p, r.appendChild(p)) }; t.forEach(o); var u = !!r.childNodes.length; if (this._isSelectOneElement) { var l = i.children.length; if (u || l > 1) { var c = i.querySelector(he(n.classNames.placeholder)); c && c.remove() } else !u && !l && this._placeholderValue && (u = !0, o(P({ selected: !0, value: "", label: this._placeholderValue, placeholder: !0 }, !1))) } u && (i.append(r), n.shouldSortItems && !this._isSelectOneElement && (t.sort(n.sorter), t.forEach(function (d) { var p = a(d); p && (p.remove(), r.append(p)) }), i.append(r))), this._isTextElement && (this.passedElement.value = t.map(function (d) { var p = d.value; return p }).join(n.delimiter)) }, s.prototype._displayNotice = function (e, t, i) { i === void 0 && (i = !0); var n = this._notice; if (n && (n.type === t && n.text === e || n.type === A.addChoice && (t === A.noResults || t === A.noChoices))) { i && this.showDropdown(!0); return } this._clearNotice(), this._notice = e ? { text: e, type: t } : void 0, this._renderNotice(), i && e && this.showDropdown(!0) }, s.prototype._clearNotice = function () { if (this._notice) { var e = this.choiceList.element.querySelector(he(this.config.classNames.notice)); e && e.remove(), this._notice = void 0 } }, s.prototype._renderNotice = function (e) { var t = this._notice; if (t) { var i = this._templates.notice(this.config, t.text, t.type); e ? e.append(i) : this.choiceList.prepend(i) } }, s.prototype._getChoiceForOutput = function (e, t) { return { id: e.id, highlighted: e.highlighted, labelClass: e.labelClass, labelDescription: e.labelDescription, customProperties: e.customProperties, disabled: e.disabled, active: e.active, label: e.label, placeholder: e.placeholder, value: e.value, groupValue: e.group ? e.group.label : void 0, element: e.element, keyCode: t } }, s.prototype._triggerChange = function (e) { e != null && this.passedElement.triggerEvent(M.change, { value: e }) }, s.prototype._handleButtonAction = function (e) { var t = this, i = this._store.items; if (!(!i.length || !this.config.removeItems || !this.config.removeItemButton)) { var n = e && Ue(e.parentElement), r = n && i.find(function (a) { return a.id === n }); r && this._store.withTxn(function () { if (t._removeItem(r), t._triggerChange(r.value), t._isSelectOneElement && !t._hasNonChoicePlaceholder) { var a = (t.config.shouldSort ? t._store.choices.reverse() : t._store.choices).find(function (o) { return o.placeholder }); a && (t._addItem(a), t.unhighlightAll(), a.value && t._triggerChange(a.value)) } }) } }, s.prototype._handleItemAction = function (e, t) { var i = this; t === void 0 && (t = !1); var n = this._store.items; if (!(!n.length || !this.config.removeItems || this._isSelectOneElement)) { var r = Ue(e); r && (n.forEach(function (a) { a.id === r && !a.highlighted ? i.highlightItem(a) : !t && a.highlighted && i.unhighlightItem(a) }), this.input.focus()) } }, s.prototype._handleChoiceAction = function (e) { var t = this, i = Ue(e), n = i && this._store.getChoiceById(i); if (!n || n.disabled) return !1; var r = this.dropdown.isActive; if (!n.selected) { if (!this._canAddItems()) return !0; this._store.withTxn(function () { t._addItem(n, !0, !0), t.clearInput(), t.unhighlightAll() }), this._triggerChange(n.value) } return r && this.config.closeDropdownOnSelect && (this.hideDropdown(!0), this.containerOuter.element.focus()), !0 }, s.prototype._handleBackspace = function (e) { var t = this.config; if (!(!t.removeItems || !e.length)) { var i = e[e.length - 1], n = e.some(function (r) { return r.highlighted }); t.editItems && !n && i ? (this.input.value = i.value, this.input.setWidth(), this._removeItem(i), this._triggerChange(i.value)) : (n || this.highlightItem(i, !1), this.removeHighlightedItems(!0)) } }, s.prototype._loadChoices = function () { var e, t = this, i = this.config; if (this._isTextElement) { if (this._presetChoices = i.items.map(function (a) { return P(a, !1) }), this.passedElement.value) { var n = this.passedElement.value.split(i.delimiter).map(function (a) { return P(a, !1, t.config.allowHtmlUserInput) }); this._presetChoices = this._presetChoices.concat(n) } this._presetChoices.forEach(function (a) { a.selected = !0 }) } else if (this._isSelectElement) { this._presetChoices = i.choices.map(function (a) { return P(a, !0) }); var r = this.passedElement.optionsAsChoices(); r && (e = this._presetChoices).push.apply(e, r) } }, s.prototype._handleLoadingState = function (e) { e === void 0 && (e = !0); var t = this.itemList.element; e ? (this.disable(), this.containerOuter.addLoadingState(), this._isSelectOneElement ? t.replaceChildren(this._templates.placeholder(this.config, this.config.loadingText)) : this.input.placeholder = this.config.loadingText) : (this.enable(), this.containerOuter.removeLoadingState(), this._isSelectOneElement ? (t.replaceChildren(""), this._render()) : this.input.placeholder = this._placeholderValue || "") }, s.prototype._handleSearch = function (e) { if (this.input.isFocussed) if (e !== null && typeof e < "u" && e.length >= this.config.searchFloor) { var t = this.config.searchChoices ? this._searchChoices(e) : 0; t !== null && this.passedElement.triggerEvent(M.search, { value: e, resultCount: t }) } else this._store.choices.some(function (i) { return !i.active }) && this._stopSearch() }, s.prototype._canAddItems = function () { var e = this.config, t = e.maxItemCount, i = e.maxItemText; return !e.singleModeForMultiSelect && t > 0 && t <= this._store.items.length ? (this.choiceList.element.replaceChildren(""), this._notice = void 0, this._displayNotice(typeof i == "function" ? i(t) : i, A.addChoice), !1) : (this._notice && this._notice.type === A.addChoice && this._clearNotice(), !0) }, s.prototype._canCreateItem = function (e) { var t = this.config, i = !0, n = ""; if (i && typeof t.addItemFilter == "function" && !t.addItemFilter(e) && (i = !1, n = fe(t.customAddItemText, e)), i) { var r = this._store.choices.find(function (a) { return t.valueComparer(a.value, e) }); if (r) { if (this._isSelectElement) return this._displayNotice("", A.addChoice), !1; t.duplicateItemsAllowed || (i = !1, n = fe(t.uniqueItemText, e)) } } return i && (n = fe(t.addItemText, e)), n && this._displayNotice(n, A.addChoice), i }, s.prototype._searchChoices = function (e) { var t = e.trim().replace(/\s{2,}/, " "); if (!t.length || t === this._currentValue) return null; var i = this._searcher; i.isEmptyIndex() && i.index(this._store.searchableChoices); var n = i.search(t); this._currentValue = t, this._highlightPosition = 0, this._isSearching = !0; var r = this._notice, a = r && r.type; return a !== A.addChoice && (n.length ? this._clearNotice() : this._displayNotice(vt(this.config.noResultsText), A.noResults)), this._store.dispatch(qi(n)), n.length }, s.prototype._stopSearch = function () { this._isSearching && (this._currentValue = "", this._isSearching = !1, this._clearNotice(), this._store.dispatch(Yi(!0)), this.passedElement.triggerEvent(M.search, { value: "", resultCount: 0 })) }, s.prototype._addEventListeners = function () { var e = this._docRoot, t = this.containerOuter.element, i = this.input.element; e.addEventListener("touchend", this._onTouchEnd, !0), t.addEventListener("keydown", this._onKeyDown, !0), t.addEventListener("mousedown", this._onMouseDown, !0), e.addEventListener("click", this._onClick, { passive: !0 }), e.addEventListener("touchmove", this._onTouchMove, { passive: !0 }), this.dropdown.element.addEventListener("mouseover", this._onMouseOver, { passive: !0 }), this._isSelectOneElement && (t.addEventListener("focus", this._onFocus, { passive: !0 }), t.addEventListener("blur", this._onBlur, { passive: !0 })), i.addEventListener("keyup", this._onKeyUp, { passive: !0 }), i.addEventListener("input", this._onInput, { passive: !0 }), i.addEventListener("focus", this._onFocus, { passive: !0 }), i.addEventListener("blur", this._onBlur, { passive: !0 }), i.form && i.form.addEventListener("reset", this._onFormReset, { passive: !0 }), this.input.addEventListeners() }, s.prototype._removeEventListeners = function () { var e = this._docRoot, t = this.containerOuter.element, i = this.input.element; e.removeEventListener("touchend", this._onTouchEnd, !0), t.removeEventListener("keydown", this._onKeyDown, !0), t.removeEventListener("mousedown", this._onMouseDown, !0), e.removeEventListener("click", this._onClick), e.removeEventListener("touchmove", this._onTouchMove), this.dropdown.element.removeEventListener("mouseover", this._onMouseOver), this._isSelectOneElement && (t.removeEventListener("focus", this._onFocus), t.removeEventListener("blur", this._onBlur)), i.removeEventListener("keyup", this._onKeyUp), i.removeEventListener("input", this._onInput), i.removeEventListener("focus", this._onFocus), i.removeEventListener("blur", this._onBlur), i.form && i.form.removeEventListener("reset", this._onFormReset), this.input.removeEventListeners() }, s.prototype._onKeyDown = function (e) { var t = e.keyCode, i = this.dropdown.isActive, n = e.key.length === 1 || e.key.length === 2 && e.key.charCodeAt(0) >= 55296 || e.key === "Unidentified"; switch (!this._isTextElement && !i && t !== T.ESC_KEY && t !== T.TAB_KEY && t !== T.SHIFT_KEY && (this.showDropdown(), !this.input.isFocussed && n && (this.input.value += e.key, e.key === " " && e.preventDefault())), t) { case T.A_KEY: return this._onSelectKey(e, this.itemList.element.hasChildNodes()); case T.ENTER_KEY: return this._onEnterKey(e, i); case T.ESC_KEY: return this._onEscapeKey(e, i); case T.UP_KEY: case T.PAGE_UP_KEY: case T.DOWN_KEY: case T.PAGE_DOWN_KEY: return this._onDirectionKey(e, i); case T.DELETE_KEY: case T.BACK_KEY: return this._onDeleteKey(e, this._store.items, this.input.isFocussed) } }, s.prototype._onKeyUp = function () { this._canSearch = this.config.searchEnabled }, s.prototype._onInput = function () { var e = this.input.value; if (!e) { this._isTextElement ? this.hideDropdown(!0) : this._stopSearch(); return } this._canAddItems() && (this._canSearch && this._handleSearch(e), this._canAddUserChoices && (this._canCreateItem(e), this._isSelectElement && (this._highlightPosition = 0, this._highlightChoice()))) }, s.prototype._onSelectKey = function (e, t) { if ((e.ctrlKey || e.metaKey) && t) { this._canSearch = !1; var i = this.config.removeItems && !this.input.value && this.input.element === document.activeElement; i && this.highlightAll() } }, s.prototype._onEnterKey = function (e, t) { var i = this, n = this.input.value, r = e.target; if (e.preventDefault(), r && r.hasAttribute("data-button")) { this._handleButtonAction(r); return } if (!t) { (this._isSelectElement || this._notice) && this.showDropdown(); return } var a = this.dropdown.element.querySelector(he(this.config.classNames.highlightedState)); if (!(a && this._handleChoiceAction(a))) { if (!r || !n) { this.hideDropdown(!0); return } if (this._canAddItems()) { var o = !1; this._store.withTxn(function () { if (o = i._findAndSelectChoiceByValue(n, !0), !o) { if (!i._canAddUserChoices || !i._canCreateItem(n)) return; i._addChoice(P(n, !1, i.config.allowHtmlUserInput), !0, !0), o = !0 } i.clearInput(), i.unhighlightAll() }), o && (this._triggerChange(n), this.config.closeDropdownOnSelect && this.hideDropdown(!0)) } } }, s.prototype._onEscapeKey = function (e, t) { t && (e.stopPropagation(), this.hideDropdown(!0), this._stopSearch(), this.containerOuter.element.focus()) }, s.prototype._onDirectionKey = function (e, t) { var i = e.keyCode; if (t || this._isSelectOneElement) { this.showDropdown(), this._canSearch = !1; var n = i === T.DOWN_KEY || i === T.PAGE_DOWN_KEY ? 1 : -1, r = e.metaKey || i === T.PAGE_DOWN_KEY || i === T.PAGE_UP_KEY, a = void 0; if (r) n > 0 ? a = this.dropdown.element.querySelector("".concat(de, ":last-of-type")) : a = this.dropdown.element.querySelector(de); else { var o = this.dropdown.element.querySelector(he(this.config.classNames.highlightedState)); o ? a = Xi(o, de, n) : a = this.dropdown.element.querySelector(de) } a && (Qi(a, this.choiceList.element, n) || this.choiceList.scrollToChildElement(a, n), this._highlightChoice(a)), e.preventDefault() } }, s.prototype._onDeleteKey = function (e, t, i) { !this._isSelectOneElement && !e.target.value && i && (this._handleBackspace(t), e.preventDefault()) }, s.prototype._onTouchMove = function () { this._wasTap && (this._wasTap = !1) }, s.prototype._onTouchEnd = function (e) { var t = (e || e.touches[0]).target, i = this._wasTap && this.containerOuter.element.contains(t); if (i) { var n = t === this.containerOuter.element || t === this.containerInner.element; n && (this._isTextElement ? this.input.focus() : this._isSelectMultipleElement && this.showDropdown()), e.stopPropagation() } this._wasTap = !0 }, s.prototype._onMouseDown = function (e) { var t = e.target; if (t instanceof HTMLElement) { if (pn && this.choiceList.element.contains(t)) { var i = this.choiceList.element.firstElementChild; this._isScrollingOnIe = this._direction === "ltr" ? e.offsetX >= i.offsetWidth : e.offsetX < i.offsetLeft } if (t !== this.input.element) { var n = t.closest("[data-button],[data-item],[data-choice]"); n instanceof HTMLElement && ("button" in n.dataset ? this._handleButtonAction(n) : "item" in n.dataset ? this._handleItemAction(n, e.shiftKey) : "choice" in n.dataset && this._handleChoiceAction(n)), e.preventDefault() } } }, s.prototype._onMouseOver = function (e) { var t = e.target; t instanceof HTMLElement && "choice" in t.dataset && this._highlightChoice(t) }, s.prototype._onClick = function (e) { var t = e.target, i = this.containerOuter, n = i.element.contains(t); n ? !this.dropdown.isActive && !i.isDisabled ? this._isTextElement ? document.activeElement !== this.input.element && this.input.focus() : (this.showDropdown(), i.element.focus()) : this._isSelectOneElement && t !== this.input.element && !this.dropdown.element.contains(t) && this.hideDropdown() : (i.removeFocusState(), this.hideDropdown(!0), this.unhighlightAll()) }, s.prototype._onFocus = function (e) { var t = e.target, i = this.containerOuter, n = t && i.element.contains(t); if (n) { var r = t === this.input.element; this._isTextElement ? r && i.addFocusState() : this._isSelectMultipleElement ? r && (this.showDropdown(!0), i.addFocusState()) : (i.addFocusState(), r && this.showDropdown(!0)) } }, s.prototype._onBlur = function (e) { var t = e.target, i = this.containerOuter, n = t && i.element.contains(t); n && !this._isScrollingOnIe ? t === this.input.element ? (i.removeFocusState(), this.hideDropdown(!0), (this._isTextElement || this._isSelectMultipleElement) && this.unhighlightAll()) : t === this.containerOuter.element && (i.removeFocusState(), this._canSearch || this.hideDropdown(!0)) : (this._isScrollingOnIe = !1, this.input.element.focus()) }, s.prototype._onFormReset = function () { var e = this; this._store.withTxn(function () { e.clearInput(), e.hideDropdown(), e.refresh(!1, !1, !0), e._initialItems.length && e.setChoiceByValue(e._initialItems) }) }, s.prototype._highlightChoice = function (e) { e === void 0 && (e = null); var t = Array.from(this.dropdown.element.querySelectorAll(de)); if (t.length) { var i = e, n = this.config.classNames.highlightedState, r = Array.from(this.dropdown.element.querySelectorAll(he(n))); r.forEach(function (a) { H(a, n), a.setAttribute("aria-selected", "false") }), i ? this._highlightPosition = t.indexOf(i) : (t.length > this._highlightPosition ? i = t[this._highlightPosition] : i = t[t.length - 1], i || (i = t[0])), E(i, n), i.setAttribute("aria-selected", "true"), this.passedElement.triggerEvent(M.highlightChoice, { el: i }), this.dropdown.isActive && (this.input.setActiveDescendant(i.id), this.containerOuter.setActiveDescendant(i.id)) } }, s.prototype._addItem = function (e, t, i) { if (t === void 0 && (t = !0), i === void 0 && (i = !1), !e.id) throw new TypeError("item.id must be set before _addItem is called for a choice/item"); (this.config.singleModeForMultiSelect || this._isSelectOneElement) && this.removeActiveItems(e.id), this._store.dispatch(ft(e)), t && (this.passedElement.triggerEvent(M.addItem, this._getChoiceForOutput(e)), i && this.passedElement.triggerEvent(M.choice, this._getChoiceForOutput(e))) }, s.prototype._removeItem = function (e) { if (e.id) { this._store.dispatch(mt(e)); var t = this._notice; t && t.type === A.noChoices && this._clearNotice(), this.passedElement.triggerEvent(M.removeItem, this._getChoiceForOutput(e)) } }, s.prototype._addChoice = function (e, t, i) { if (t === void 0 && (t = !0), i === void 0 && (i = !1), e.id) throw new TypeError("Can not re-add a choice which has already been added"); var n = this.config; if (!(!n.duplicateItemsAllowed && this._store.choices.find(function (o) { return n.valueComparer(o.value, e.value) }))) { this._lastAddedChoiceId++, e.id = this._lastAddedChoiceId, e.elementId = "".concat(this._baseId, "-").concat(this._idNames.itemChoice, "-").concat(e.id); var r = n.prependValue, a = n.appendValue; r && (e.value = r + e.value), a && (e.value += a.toString()), (r || a) && e.element && (e.element.value = e.value), this._clearNotice(), this._store.dispatch(pt(e)), e.selected && this._addItem(e, t, i) } }, s.prototype._addGroup = function (e, t) { var i = this; if (t === void 0 && (t = !0), e.id) throw new TypeError("Can not re-add a group which has already been added"); this._store.dispatch(Wi(e)), e.choices && (this._lastAddedGroupId++, e.id = this._lastAddedGroupId, e.choices.forEach(function (n) { n.group = e, e.disabled && (n.disabled = !0), i._addChoice(n, t) })) }, s.prototype._createTemplates = function () { var e = this, t = this.config.callbackOnCreateTemplates, i = {}; typeof t == "function" && (i = t.call(this, es, it, De)); var n = {}; Object.keys(this._templates).forEach(function (r) { r in i ? n[r] = i[r].bind(e) : n[r] = e._templates[r].bind(e) }), this._templates = n }, s.prototype._createElements = function () { var e = this._templates, t = this, i = t.config, n = t._isSelectOneElement, r = i.position, a = i.classNames, o = this._elementType; this.containerOuter = new _t({ element: e.containerOuter(i, this._direction, this._isSelectElement, n, i.searchEnabled, o, i.labelId), classNames: a, type: o, position: r }), this.containerInner = new _t({ element: e.containerInner(i), classNames: a, type: o, position: r }), this.input = new us({ element: e.input(i, this._placeholderValue), classNames: a, type: o, preventPaste: !i.paste }), this.choiceList = new Ct({ element: e.choiceList(i, n) }), this.itemList = new Ct({ element: e.itemList(i, n) }), this.dropdown = new os({ element: e.dropdown(i), classNames: a, type: o }) }, s.prototype._createStructure = function () { var e = this, t = e.containerInner, i = e.containerOuter, n = e.passedElement, r = this.dropdown.element; n.conceal(), t.wrap(n.element), i.wrap(t.element), this._isSelectOneElement ? this.input.placeholder = this.config.searchPlaceholderValue || "" : (this._placeholderValue && (this.input.placeholder = this._placeholderValue), this.input.setWidth()), i.element.appendChild(t.element), i.element.appendChild(r), t.element.appendChild(this.itemList.element), r.appendChild(this.choiceList.element), this._isSelectOneElement ? this.config.searchEnabled && r.insertBefore(this.input.element, r.firstChild) : t.element.appendChild(this.input.element), this._highlightPosition = 0, this._isSearching = !1 }, s.prototype._initStore = function () { var e = this; this._store.subscribe(this._render).withTxn(function () { e._addPredefinedChoices(e._presetChoices, e._isSelectOneElement && !e._hasNonChoicePlaceholder, !1) }), (!this._store.choices.length || this._isSelectOneElement && this._hasNonChoicePlaceholder) && this._render() }, s.prototype._addPredefinedChoices = function (e, t, i) { var n = this; if (t === void 0 && (t = !1), i === void 0 && (i = !0), t) { var r = e.findIndex(function (a) { return a.selected }) === -1; r && e.some(function (a) { return a.disabled || "choices" in a ? !1 : (a.selected = !0, !0) }) } e.forEach(function (a) { "choices" in a ? n._isSelectElement && n._addGroup(a, i) : n._addChoice(a, i) }) }, s.prototype._findAndSelectChoiceByValue = function (e, t) { var i = this; t === void 0 && (t = !1); var n = this._store.choices.find(function (r) { return i.config.valueComparer(r.value, e) }); return n && !n.disabled && !n.selected ? (this._addItem(n, !0, t), !0) : !1 }, s.prototype._generatePlaceholderValue = function () { var e = this.config; if (!e.placeholder) return null; if (this._hasNonChoicePlaceholder) return e.placeholderValue; if (this._isSelectElement) { var t = this.passedElement.placeholderOption; return t ? t.text : null } return null }, s.prototype._warnChoicesInitFailed = function (e) { if (!this.config.silent) if (this.initialised) { if (!this.initialisedOK) throw new TypeError("".concat(e, " called for an element which has multiple instances of Choices initialised on it")) } else throw new TypeError("".concat(e, " called on a non-initialised instance of Choices")) }, s.version = "11.1.0", s })(); const gn = document.querySelector(".payment-content-form-inner"); function G({ name: s, label: e = "", placeholder: t = "", disabled: i = !1, mask: n, classes: r = "" }) {
    const a = h.formData[s] || "", o = h.errors[s] ? h.errors[s] : ""; return `
        <div class="form-group${h.errors[s] ? " error" : ""} ${i ? "disabled" : ""} ${s} ${r}">
            ${e !== "" ? `
                        <div class="form-group-label">
                            <label>${e}</label>
                        </div>
                      `: ""}
            <div class="form-control">
                <input type="text" 
                       name="${s}" 
                       class="form-control-input" 
                       placeholder="${t}" 
                       value="${a}"
                       ${typeof n == "string" ? 'data-imask="' + n + '"' : ""}
                >
                <div class="icon"></div>
            </div>
            ${o ? `<div class="err-text">${o}</div>` : ""}
        </div>
    `} function vn({ name: s, label: e, options: t = [] }) {
    return t.map(i => `<option value="${i.value}">${i.text}</option>`).join(""), `
        <div class="form-group ${s}">
            <div class="form-group-label">
                <label>${e}</label>
            </div>
            <div class="form-control">
                <div class="select-wrap" data-options='${JSON.stringify(t)}'>
                    <select name="${s}"></select>
                </div>
                
            </div>
        </div>
    `} function _n() {
    let s = ""; switch (s += `<div class="payment-content-form-amount">
            <strong>Importe:</strong>
            <div class="payment-content-form-amount-value">
                <span class="currency">${h.currency}</span>
                <span class="cost">${h.cost}</span>
            </div>
        </div>`, h.initialFormType) { case F.CUIT_ONLY: s += '<h4 class="payment-content-form-title">Introduzca su CUIT/CUIL</h4>', s += G({ name: "cuit", label: "Número de documento", placeholder: "11-11111111-1", mask: "00-00000000-0", classes: h.currentCVU !== "" && h.errors.cuit === void 0 ? "success" : "" }); break; case F.FULLNAME_ONLY: s += '<h4 class="payment-content-form-title">Introduzca su nombre y apellidos</h4>', s += G({ name: "fullName", placeholder: "Nombre y apellidos", mask: "^[a-zA-ZáéíóúüÁÉÍÓÚÜñÑs '-]*$", classes: h.currentCVU !== "" && h.errors.fullName === void 0 ? "success" : "" }); break; case F.SELECT_AND_DOC: s += '<h4 class="payment-content-form-title">Introduzca su CUIT/CUIL o DNI</h4>', s += vn({ name: "documentType", label: "Tipo de documento", selected: h.formData.documentType, options: [{ value: "CUIT", text: "CUIT" }, { value: "DNI", text: "DNI" }] }), h.formData.documentType === "CUIT" ? s += G({ name: "cuit", label: "Número de documento", placeholder: "11-11111111-1", mask: "00-00000000-0", classes: h.currentCVU !== "" && h.errors.cuit === void 0 ? "success" : "" }) : h.formData.documentType === "DNI" && (s += G({ name: "dni", label: "Número de documento", placeholder: "11.111.111", mask: "00.000.000", classes: h.currentCVU !== "" && h.errors.dni === void 0 ? "success" : "" })); break; default: s += "<h4>Error de configuración del formulario.</h4>"; break }return s
} function Cn() {
    let s = ""; switch (s += `<div class="payment-content-form-amount">
            <strong>Importe:</strong>
            <div class="payment-content-form-amount-value">
                <span class="currency">${h.currency}</span>
                <span class="cost">${h.cost}</span>
            </div>
        </div>`, h.initialFormType) { case F.CUIT_ONLY: s += '<h4 class="payment-content-form-title">CUIT/CUIL del titular de la cuenta</h4>', s += G({ name: "cuit", placeholder: "11-11111111-2", disabled: !0 }); break; case F.FULLNAME_ONLY: s += '<h4 class="payment-content-form-title">Nombre y apellidos del titular de la cuenta</h4>', s += G({ name: "fullName", disabled: !0 }); break; case F.SELECT_AND_DOC: const e = h.formData.documentType; let t = ""; e === "CUIT" ? t = "cuit" : e === "DNI" && (t = "dni"), s += '<h4 class="payment-content-form-title">CUIT/CUIL o DNI del titular de la cuenta</h4>', s += G({ name: t, disabled: !0 }); break; default: s += "<h4>Error de configuración del formulario.</h4>"; break }return h.currentCVU !== "" && (s += '<h4 class="payment-content-form-title" style="padding-top:5px;">Copie la CVU del destinatario de la transferencia</h4>', s += bn(h.currentCVU)), s
} function En() { if (h.currentStep !== q.CuitInput) return !0; h.errors = {}; let s = !0; switch (h.initialFormType) { case F.CUIT_ONLY: const e = h.formData.cuit.trim(); (!e || e.length !== 13) && (h.errors.cuit = "CUIT/CUIL no es válido", s = !1); break; case F.FULLNAME_ONLY: const t = h.formData.fullName.trim(), i = /\S+\s+\S+/; !t && t.length < 3 ? (h.errors.fullName = "Este campo es obligatorio", s = !1) : i.test(t) || (h.errors.fullName = "Introduzca su nombre completo", s = !1); break; case F.SELECT_AND_DOC: const n = h.formData.documentType; if (n === "CUIT") { const r = h.formData.cuit.trim(); (!r || r.length !== 13) && (h.errors.cuit = "CUIT/CUIL no es válido", s = !1) } else if (n === "DNI") { const r = h.formData.dni.trim(); (!r || r.length !== 10) && (h.errors.dni = "DNI no es válido", s = !1) } break }return s } function ae(s) { let e = ""; switch (h.currentStep) { case q.CuitInput: e = _n(); break; case q.CVUData: e = Cn(); break }s.innerHTML = e } function nt(s, e) { e && (s.innerHTML = e) } function oe({ name: s, value: e }) { { const t = document.querySelector(`.form-group.${s} .select-wrap`), i = t ? t.dataset?.options : ""; if (i !== void 0 && i !== "") { const n = JSON.parse(i); if (n.length > 0) { const r = new mn(t.querySelector("select"), { placeholder: "Seleccione el tipo", searchEnabled: !1, itemSelectText: "" }); let a = []; h.formData.documentType === "DNI" ? a = n.map(o => o.value) : h.formData.documentType === "CUIT" && (a = n.map(o => o.value).reverse()), r.setValue(a), r.passedElement.element.addEventListener("change", function (o) { const u = o.detail?.value; let l = null, c = ""; h.formData[s] = u, u === "CUIT" ? (l = document.querySelector(".form-group.dni"), c = G({ name: "cuit", label: "Número de documento", placeholder: "11-11111111-1", mask: "00-00000000-0" }), h.formData.dni = "", delete h.errors.dni) : u === "DNI" && (l = document.querySelector(".form-group.cuit"), c = G({ name: "dni", label: "Número de documento", placeholder: "11.111.111", mask: "00.000.000" }), h.formData.cuit = "", delete h.errors.cuit), l.outerHTML = c, Q(gn) }, !1) } } } } function yn() {
    const s = document.querySelector(".payment-header"), e = document.querySelector(".payment-content"); s.classList.add("logo"), e.style.padding = 0; let t = `<div class="payment-content-loading">
        <div class="inner">
            <div class="ui-loader"></div>
            <p><strong>Procesando el pago...</strong></p>
        </div>
    </div>`; e.innerHTML = t
} function Je({ status: s, text: e, cost: t = 0, currency: i = "" }) {
    const n = document.querySelector(".payment-wrapper"), r = document.querySelector(".payment-header"), a = document.querySelector(".payment-content"); n.classList.add("full-bg"), r.classList.add("logo"), a.style.padding = 0; let o = `<div class="payment-content-result">
        <div class="info-main">
            <div class="icon ${s === "success" ? "success" : "error"}"></div>
            <h2>${s === "success" ? "¡Éxito!" : "¡Error!"}</h2>
            ${e && e !== "" ? "<p>" + e + "</p>" : ""}
        </div>
        <div class="info-bottom">
            <div class="amount">
                <strong>Importe</strong>
                <span>${i}</span>
                <span>${t}</span>
            </div>
            <div class="close">
                <a href="#" class="btn btn-border">Cerrar</a>
            </div>
        </div>
    </div>`; a.innerHTML = o, Ki({ show_thanks_page: !0 })
} function bn(s) {
    if (s && s !== "") return `<div class="cvu-block">
            <div class="cvu-block-inner">
                <p class="value">${s}</p>
                <div class="copy-btn"></div>
            </div>
            <div class="copy-badge">
                <span>La CVU ha sido copiado</span>
            </div>
        </div>`} function Sn({ text: s, image: e }) {
    return `<div class="payment-content-thanks">
            ${'<div class="text">' + s + "</div>"}
            ${'<div class="img"><img src="' + e + '" /></div>'}
        </div>`} function kn({ cost: s, currency: e }) { const t = document.querySelector(".payment-header"), i = t.querySelector(".payment-header-amount .cost"), n = t.querySelector(".payment-header-amount .currency"); i && s && (i.innerHTML = s), n && e && (n.innerHTML = e) } window.maskInstances = window.maskInstances || {}; function Dt(s) { const { name: e, value: t } = s.target; e && (h.formData[e] = t) } async function An(s, e) { e.unmaskedValue; let t = e.value; const i = document.querySelector(".payment-content-form-inner"); if (h.formData[s] = t, s === "cuit" || s === "dni") { const n = i.querySelector(`.form-group.${s}`); if (h.errors[s] !== void 0 && (delete h.errors[s], n.classList.remove("error"), n.querySelector(".err-text").remove()), e.mask.length === t.length) { if (s === "cuit") if (dt.AR.cuit.validate(t)?.isValid) { const a = await je({ document_number: t }); a.status === "success" ? a?.number && (delete h.errors.cuit, h.currentCVU = a?.number, n.classList.add("success")) : h.errors.cuit = "CUIT/CUIL no es válido" } else n.classList.remove("success"), h.currentCVU = "", h.errors.cuit = "CUIT/CUIL no es válido"; else if (s === "dni") if (dt.AR.dni.validate(t)?.isValid) { const a = await je({ document_number: t }); a.status === "success" ? a?.number && (delete h.errors.dni, h.currentCVU = a?.number, n.classList.add("success")) : h.errors.dni = "DNI no es válido" } else n.classList.remove("success"), h.currentCVU = "", h.errors.dni = "DNI no es válido"; ae(i), oe({ name: "documentType", value: h.formData.documentType }), Q(i) } else h.currentCVU = "", n.classList.remove("success") } } function xt(s) { const e = document.querySelector(".form-group.documentType .choices"); if (e && e.classList.contains("is-open") || s.key !== "Enter") return; const t = document.querySelector(".next-step"); t && (s.preventDefault(), t.click()) } function Q(s) { if (document.querySelector(".form-group.documentType .choices"), document.removeEventListener("keydown", xt), document.addEventListener("keydown", xt), typeof _ > "u") { console.error("IMask not found"); return } if (s.querySelectorAll("input:not([data-imask]), select, textarea").forEach(t => { t.removeEventListener("input", Dt), t.addEventListener("input", Dt) }), h.currentStep === q.CuitInput) { const t = s.querySelector('input[name="cuit"], input[name="dni"], input[name="fullName"]'); if (t) { let i = null, n = t.name; const r = t.dataset.imask; switch (h.initialFormType) { case F.SELECT_AND_DOC: const a = h.formData.documentType; a === "DNI" ? (i = { mask: r, lazy: !0, autofix: !0 }, n = "dni") : a === "CUIT" && (i = { mask: r, lazy: !0, autofix: !0 }, n = "cuit"); break; case F.CUIT_ONLY: i = { mask: r, lazy: !0, autofix: !0 }, n = "cuit"; break; case F.FULLNAME_ONLY: i = { mask: new RegExp(r, "u"), lazy: !0, autofix: !0 }, n = "fullName" }if (i) { const a = n; let o = window.maskInstances[a]; try { o = _(t, i), window.maskInstances[a] = o, o.on("accept", u => { An(n, o) }) } catch (u) { console.error("Error init IMask:", u) } } } } ji() } const Fn = document.querySelector(".payment-header-timer .value"), L = document.querySelector(".payment-content-form-inner"), rt = document.querySelector(".payment-content-info-text"), In = document.querySelector(".buttons"), Bt = document.querySelector(".prev-step"), Mt = document.querySelector(".next-step"); async function Tn() { if (!En()) { ae(L), oe({ name: "documentType", value: h.formData.documentType }), Q(L); return } if (h.initialFormType === F.FULLNAME_ONLY) { let s = h.formData.fullName; Mt.classList.add("is-loading"); const e = L.querySelector(".form-group.fullName"); setTimeout(() => { delete h.errors.fullName, e.classList.remove("error"), ae(L), oe({ name: "documentType", value: h.formData.documentType }), Q(L) }, 100); const t = await je({ document_number: s }); Mt.classList.remove("is-loading"), t?.status === "success" && typeof t?.number == "string" && t?.number !== "" ? (h.formData.documentType = "fullName", h.currentCVU = t?.number) : (h.errors.fullName = "Compruebe que los datos introducidos sean correctos", ae(L), oe({ name: "documentType", value: h.formData.documentType }), Q(L)) } if (h.currentCVU !== "" && Object.keys(h.errors).length === 0) { if (h.currentStep < q.CVUData) h.currentStep++; else { const e = { cost: h.cost, currency: h.currency, cvu: h.currentCVU }; h.formData.documentType === "DNI" ? e.cuit = h.formData.cuit : h.formData.documentType === "CUIT" ? e.cuit = h.formData.dni : h.formData.documentType === "fullName" && (e.fullName = h.formData.fullName), h.currentStep++, yn(), (await Pi(e))?.status === "success" ? Je({ status: "success", text: `Transferencia a la cuenta ${h.currentCVU} finalizada con éxito`, currency: h.currency, cost: h.cost }) : Je({ status: "error", text: `La transferencia a la cuenta ${h.currentCVU} ha sido denegada.`, currency: h.currency, cost: h.cost }) } ae(L), oe({ name: "documentType", value: h.formData.documentType }); let s = ""; h.initialFormType === F.CUIT_ONLY ? s = window.globalConfig.warningContent_Step2_CUIT_ONLY : h.initialFormType === F.FULLNAME_ONLY ? s = window.globalConfig.warningContent_Step2_FULLNAME_ONLY : h.initialFormType === F.SELECT_AND_DOC && (s = window.globalConfig.warningContent_Step2_SELECT_AND_DOC), nt(rt, s), at(), Q(L), console.log("next step"), console.log(h) } } function wn() { h.currentStep < q.CuitInput ? (h.currentStep--, ae(L), oe({ name: "documentType", value: h.formData.documentType }), nt(rt, config.warningContent_Step1), at(), Q(L)) : window.globalConfig && window.globalConfig.cancelRedirectUrl ? (window.location.href = window.globalConfig.cancelRedirectUrl, console.log("Cancel payment - redirecting to:", window.globalConfig.cancelRedirectUrl)) : console.log("Cancel payment - no redirect URL configured"), console.log("prev step"), console.log(h) } function Dn(s) { const e = s.target; e.classList.contains("next-step") ? Tn() : e.classList.contains("prev-step") && wn() } function at() { h.currentStep === q.CuitInput || h.currentStep === q.CVUData ? Bt.textContent = "Cancelar" : Bt.textContent = "Atrás" } function xn() { (h.currentStep === 1 || h.currentStep === 2) && Je({ status: "error", text: "El tiempo para realizar la transferencia ha expirado. Por favor, inicie el pago de nuevo.", currency: h.currency, cost: h.cost }) } async function Bn() { try { const s = await fetch("./config.json"); if (!s.ok) throw new Error(`HTTP error! status: ${s.status}`); return await s.json() } catch (s) { console.error("Failed to load settings:", s) } } async function Mn() { const s = await Bn(); if (window.globalConfig = s, h.initialFormType = s.initialFormType, h.currency = "ARS", h.cost = "500.00", h.timerDuration = s.timerSecond, typeof s.brand == "string" && s.brand !== "") { let e = ""; s.brand === "mercado-pago" ? e = "brand-mercado-pago" : s.brand === "transferencia-bancaria" && (e = "brand-transferencia-bancaria"), document.querySelector("body").classList.add(e) } if (typeof s.showCompassLogo == "string" && s.showCompassLogo !== "") { let e = ""; s.showCompassLogo === "logo-top" ? e = "compass-logo-type-header" : s.showCompassLogo, document.querySelector("body").classList.add(e) } kn({ cost: h.cost, currency: h.currency }), ae(L), oe({ name: "documentType", value: h.formData.documentType }), nt(rt, s.warningContent_compass_Step1), ai(h, Fn, xn), In.addEventListener("click", Dn), Q(L), at(), document.querySelector("body").classList.remove("is-not-ready") } document.addEventListener("DOMContentLoaded", function () { Mn() });
